var Vo=Object.defineProperty;var Ko=(o,e,t)=>e in o?Vo(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var vt=(o,e,t)=>Ko(o,typeof e!="symbol"?e+"":e,t);import{z as O,X as Nr,bk as pn,bl as Mr,bm as Xo,bn as $o,E as I,g as D,ak as kn,ah as qt,bo as Dr,L as ut,aJ as jo,bp as Zo,an as Qo,aG as Jo,O as Pr,bq as es,br as Ir,bs as ct,x as kr,bt as mn,bu as ts,a3 as ns,bv as rs,T as os,N as ss,bw as is,bx as as,by as us,bz as cs,bA as ls,bB as ds,bC as fs,bD as hs,bE as _s,bF as ps,bG as ms,a1 as gs,a2 as vs,d as ys,A as bs,o as Ts}from"./index-eN2tjum9.js";import{c as Zt,a as xs,b as Ct,l as ot,e as Et,r as nr,s as yt,_ as Ss}from"./ResponsiveCanvas.vue_vue_type_script_setup_true_lang-UUvp_of4.js";function Ne(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function Rr(o,e){o.prototype=Object.create(e.prototype),o.prototype.constructor=o,o.__proto__=e}/*!
 * GSAP 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var he={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},lt={duration:.5,overwrite:!1,delay:0},Rn,te,W,me=1e8,U=1/me,gn=Math.PI*2,Cs=gn/4,Es=0,Br=Math.sqrt,As=Math.cos,ws=Math.sin,j=function(e){return typeof e=="string"},Y=function(e){return typeof e=="function"},De=function(e){return typeof e=="number"},Bn=function(e){return typeof e>"u"},we=function(e){return typeof e=="object"},oe=function(e){return e!==!1},Fn=function(){return typeof window<"u"},Ut=function(e){return Y(e)||j(e)},Fr=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},ne=Array.isArray,vn=/(?:-?\.?\d|\.)+/gi,Lr=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,nt=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,on=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Ur=/[+-]=-?[.\d]+/,zr=/[^,'"\[\]\s]+/gi,Os=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,q,Se,yn,Ln,_e={},Ht={},Gr,Wr=function(e){return(Ht=Ze(e,_e))&&ue},Un=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},Nt=function(e,t){return!t&&console.warn(e)},qr=function(e,t){return e&&(_e[e]=t)&&Ht&&(Ht[e]=t)||_e},Mt=function(){return 0},Ns={suppressEvents:!0,isStart:!0,kill:!1},zt={suppressEvents:!0,kill:!1},Ms={suppressEvents:!0},zn={},Fe=[],bn={},Hr,le={},sn={},rr=30,Gt=[],Gn="",Wn=function(e){var t=e[0],n,r;if(we(t)||Y(t)||(e=[e]),!(n=(t._gsap||{}).harness)){for(r=Gt.length;r--&&!Gt[r].targetTest(t););n=Gt[r]}for(r=e.length;r--;)e[r]&&(e[r]._gsap||(e[r]._gsap=new po(e[r],n)))||e.splice(r,1);return e},Ke=function(e){return e._gsap||Wn(ge(e))[0]._gsap},Yr=function(e,t,n){return(n=e[t])&&Y(n)?e[t]():Bn(n)&&e.getAttribute&&e.getAttribute(t)||n},se=function(e,t){return(e=e.split(",")).forEach(t)||e},V=function(e){return Math.round(e*1e5)/1e5||0},$=function(e){return Math.round(e*1e7)/1e7||0},st=function(e,t){var n=t.charAt(0),r=parseFloat(t.substr(2));return e=parseFloat(e),n==="+"?e+r:n==="-"?e-r:n==="*"?e*r:e/r},Ds=function(e,t){for(var n=t.length,r=0;e.indexOf(t[r])<0&&++r<n;);return r<n},Yt=function(){var e=Fe.length,t=Fe.slice(0),n,r;for(bn={},Fe.length=0,n=0;n<e;n++)r=t[n],r&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},Vr=function(e,t,n,r){Fe.length&&!te&&Yt(),e.render(t,n,te&&t<0&&(e._initted||e._startAt)),Fe.length&&!te&&Yt()},Kr=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(zr).length<2?t:j(e)?e.trim():e},Xr=function(e){return e},ve=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},Ps=function(e){return function(t,n){for(var r in n)r in t||r==="duration"&&e||r==="ease"||(t[r]=n[r])}},Ze=function(e,t){for(var n in t)e[n]=t[n];return e},or=function o(e,t){for(var n in t)n!=="__proto__"&&n!=="constructor"&&n!=="prototype"&&(e[n]=we(t[n])?o(e[n]||(e[n]={}),t[n]):t[n]);return e},Vt=function(e,t){var n={},r;for(r in e)r in t||(n[r]=e[r]);return n},At=function(e){var t=e.parent||q,n=e.keyframes?Ps(ne(e.keyframes)):ve;if(oe(e.inherit))for(;t;)n(e,t.vars.defaults),t=t.parent||t._dp;return e},Is=function(e,t){for(var n=e.length,r=n===t.length;r&&n--&&e[n]===t[n];);return n<0},$r=function(e,t,n,r,s){var i=e[r],a;if(s)for(a=t[s];i&&i[s]>a;)i=i._prev;return i?(t._next=i._next,i._next=t):(t._next=e[n],e[n]=t),t._next?t._next._prev=t:e[r]=t,t._prev=i,t.parent=t._dp=e,t},Qt=function(e,t,n,r){n===void 0&&(n="_first"),r===void 0&&(r="_last");var s=t._prev,i=t._next;s?s._next=i:e[n]===t&&(e[n]=i),i?i._prev=s:e[r]===t&&(e[r]=s),t._next=t._prev=t.parent=null},Ue=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},Xe=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},ks=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},Tn=function(e,t,n,r){return e._startAt&&(te?e._startAt.revert(zt):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,r))},Rs=function o(e){return!e||e._ts&&o(e.parent)},sr=function(e){return e._repeat?dt(e._tTime,e=e.duration()+e._rDelay)*e:0},dt=function(e,t){var n=Math.floor(e/=t);return e&&n===e?n-1:n},Kt=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},Jt=function(e){return e._end=$(e._start+(e._tDur/Math.abs(e._ts||e._rts||U)||0))},en=function(e,t){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=$(n._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),Jt(e),n._dirty||Xe(n,e)),e},jr=function(e,t){var n;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(n=Kt(e.rawTime(),t),(!t._dur||Bt(0,t.totalDuration(),n)-t._tTime>U)&&t.render(n,!0)),Xe(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-U}},Ce=function(e,t,n,r){return t.parent&&Ue(t),t._start=$((De(n)?n:n||e!==q?pe(e,n,t):e._time)+t._delay),t._end=$(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),$r(e,t,"_first","_last",e._sort?"_start":0),xn(t)||(e._recent=t),r||jr(e,t),e._ts<0&&en(e,e._tTime),e},Zr=function(e,t){return(_e.ScrollTrigger||Un("scrollTrigger",t))&&_e.ScrollTrigger.create(t,e)},Qr=function(e,t,n,r,s){if(Hn(e,t,s),!e._initted)return 1;if(!n&&e._pt&&!te&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&Hr!==de.frame)return Fe.push(e),e._lazy=[s,r],1},Bs=function o(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||o(t))},xn=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},Fs=function(e,t,n,r){var s=e.ratio,i=t<0||!t&&(!e._start&&Bs(e)&&!(!e._initted&&xn(e))||(e._ts<0||e._dp._ts<0)&&!xn(e))?0:1,a=e._rDelay,u=0,c,l,h;if(a&&e._repeat&&(u=Bt(0,e._tDur,t),l=dt(u,a),e._yoyo&&l&1&&(i=1-i),l!==dt(e._tTime,a)&&(s=1-i,e.vars.repeatRefresh&&e._initted&&e.invalidate())),i!==s||te||r||e._zTime===U||!t&&e._zTime){if(!e._initted&&Qr(e,t,r,n,u))return;for(h=e._zTime,e._zTime=t||(n?U:0),n||(n=t&&!h),e.ratio=i,e._from&&(i=1-i),e._time=0,e._tTime=u,c=e._pt;c;)c.r(i,c.d),c=c._next;t<0&&Tn(e,t,n,!0),e._onUpdate&&!n&&fe(e,"onUpdate"),u&&e._repeat&&!n&&e.parent&&fe(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===i&&(i&&Ue(e,1),!n&&!te&&(fe(e,i?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},Ls=function(e,t,n){var r;if(n>t)for(r=e._first;r&&r._start<=n;){if(r.data==="isPause"&&r._start>t)return r;r=r._next}else for(r=e._last;r&&r._start>=n;){if(r.data==="isPause"&&r._start<t)return r;r=r._prev}},ft=function(e,t,n,r){var s=e._repeat,i=$(t)||0,a=e._tTime/e._tDur;return a&&!r&&(e._time*=i/e._dur),e._dur=i,e._tDur=s?s<0?1e10:$(i*(s+1)+e._rDelay*s):i,a>0&&!r&&en(e,e._tTime=e._tDur*a),e.parent&&Jt(e),n||Xe(e.parent,e),e},ir=function(e){return e instanceof re?Xe(e):ft(e,e._dur)},Us={_start:0,endTime:Mt,totalDuration:Mt},pe=function o(e,t,n){var r=e.labels,s=e._recent||Us,i=e.duration()>=me?s.endTime(!1):e._dur,a,u,c;return j(t)&&(isNaN(t)||t in r)?(u=t.charAt(0),c=t.substr(-1)==="%",a=t.indexOf("="),u==="<"||u===">"?(a>=0&&(t=t.replace(/=/,"")),(u==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(c?(a<0?s:n).totalDuration()/100:1)):a<0?(t in r||(r[t]=i),r[t]):(u=parseFloat(t.charAt(a-1)+t.substr(a+1)),c&&n&&(u=u/100*(ne(n)?n[0]:n).totalDuration()),a>1?o(e,t.substr(0,a-1),n)+u:i+u)):t==null?i:+t},wt=function(e,t,n){var r=De(t[1]),s=(r?2:1)+(e<2?0:1),i=t[s],a,u;if(r&&(i.duration=t[1]),i.parent=n,e){for(a=i,u=n;u&&!("immediateRender"in a);)a=u.vars.defaults||{},u=oe(u.vars.inherit)&&u.parent;i.immediateRender=oe(a.immediateRender),e<2?i.runBackwards=1:i.startAt=t[s-1]}return new K(t[0],i,t[s+1])},Ge=function(e,t){return e||e===0?t(e):t},Bt=function(e,t,n){return n<e?e:n>t?t:n},ee=function(e,t){return!j(e)||!(t=Os.exec(e))?"":t[1]},zs=function(e,t,n){return Ge(n,function(r){return Bt(e,t,r)})},Sn=[].slice,Jr=function(e,t){return e&&we(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&we(e[0]))&&!e.nodeType&&e!==Se},Gs=function(e,t,n){return n===void 0&&(n=[]),e.forEach(function(r){var s;return j(r)&&!t||Jr(r,1)?(s=n).push.apply(s,ge(r)):n.push(r)})||n},ge=function(e,t,n){return W&&!t&&W.selector?W.selector(e):j(e)&&!n&&(yn||!ht())?Sn.call((t||Ln).querySelectorAll(e),0):ne(e)?Gs(e,n):Jr(e)?Sn.call(e,0):e?[e]:[]},Cn=function(e){return e=ge(e)[0]||Nt("Invalid scope")||{},function(t){var n=e.current||e.nativeElement||e;return ge(t,n.querySelectorAll?n:n===e?Nt("Invalid scope")||Ln.createElement("div"):e)}},eo=function(e){return e.sort(function(){return .5-Math.random()})},to=function(e){if(Y(e))return e;var t=we(e)?e:{each:e},n=$e(t.ease),r=t.from||0,s=parseFloat(t.base)||0,i={},a=r>0&&r<1,u=isNaN(r)||a,c=t.axis,l=r,h=r;return j(r)?l=h={center:.5,edges:.5,end:1}[r]||0:!a&&u&&(l=r[0],h=r[1]),function(d,f,p){var _=(p||t).length,y=i[_],g,E,x,C,S,m,b,v,T;if(!y){if(T=t.grid==="auto"?0:(t.grid||[1,me])[1],!T){for(b=-me;b<(b=p[T++].getBoundingClientRect().left)&&T<_;);T<_&&T--}for(y=i[_]=[],g=u?Math.min(T,_)*l-.5:r%T,E=T===me?0:u?_*h/T-.5:r/T|0,b=0,v=me,m=0;m<_;m++)x=m%T-g,C=E-(m/T|0),y[m]=S=c?Math.abs(c==="y"?C:x):Br(x*x+C*C),S>b&&(b=S),S<v&&(v=S);r==="random"&&eo(y),y.max=b-v,y.min=v,y.v=_=(parseFloat(t.amount)||parseFloat(t.each)*(T>_?_-1:c?c==="y"?_/T:T:Math.max(T,_/T))||0)*(r==="edges"?-1:1),y.b=_<0?s-_:s,y.u=ee(t.amount||t.each)||0,n=n&&_<0?fo(n):n}return _=(y[d]-y.min)/y.max||0,$(y.b+(n?n(_):_)*y.v)+y.u}},En=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(n){var r=$(Math.round(parseFloat(n)/e)*e*t);return(r-r%1)/t+(De(n)?0:ee(n))}},no=function(e,t){var n=ne(e),r,s;return!n&&we(e)&&(r=n=e.radius||me,e.values?(e=ge(e.values),(s=!De(e[0]))&&(r*=r)):e=En(e.increment)),Ge(t,n?Y(e)?function(i){return s=e(i),Math.abs(s-i)<=r?s:i}:function(i){for(var a=parseFloat(s?i.x:i),u=parseFloat(s?i.y:0),c=me,l=0,h=e.length,d,f;h--;)s?(d=e[h].x-a,f=e[h].y-u,d=d*d+f*f):d=Math.abs(e[h]-a),d<c&&(c=d,l=h);return l=!r||c<=r?e[l]:i,s||l===i||De(i)?l:l+ee(i)}:En(e))},ro=function(e,t,n,r){return Ge(ne(e)?!t:n===!0?!!(n=0):!r,function(){return ne(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(r=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(t-e+n*.99))/n)*n*r)/r})},Ws=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return t.reduce(function(s,i){return i(s)},r)}},qs=function(e,t){return function(n){return e(parseFloat(n))+(t||ee(n))}},Hs=function(e,t,n){return so(e,t,0,1,n)},oo=function(e,t,n){return Ge(n,function(r){return e[~~t(r)]})},Ys=function o(e,t,n){var r=t-e;return ne(e)?oo(e,o(0,e.length),t):Ge(n,function(s){return(r+(s-e)%r)%r+e})},Vs=function o(e,t,n){var r=t-e,s=r*2;return ne(e)?oo(e,o(0,e.length-1),t):Ge(n,function(i){return i=(s+(i-e)%s)%s||0,e+(i>r?s-i:i)})},Dt=function(e){for(var t=0,n="",r,s,i,a;~(r=e.indexOf("random(",t));)i=e.indexOf(")",r),a=e.charAt(r+7)==="[",s=e.substr(r+7,i-r-7).match(a?zr:vn),n+=e.substr(t,r-t)+ro(a?s:+s[0],a?0:+s[1],+s[2]||1e-5),t=i+1;return n+e.substr(t,e.length-t)},so=function(e,t,n,r,s){var i=t-e,a=r-n;return Ge(s,function(u){return n+((u-e)/i*a||0)})},Ks=function o(e,t,n,r){var s=isNaN(e+t)?0:function(f){return(1-f)*e+f*t};if(!s){var i=j(e),a={},u,c,l,h,d;if(n===!0&&(r=1)&&(n=null),i)e={p:e},t={p:t};else if(ne(e)&&!ne(t)){for(l=[],h=e.length,d=h-2,c=1;c<h;c++)l.push(o(e[c-1],e[c]));h--,s=function(p){p*=h;var _=Math.min(d,~~p);return l[_](p-_)},n=t}else r||(e=Ze(ne(e)?[]:{},e));if(!l){for(u in t)qn.call(a,e,u,"get",t[u]);s=function(p){return Kn(p,a)||(i?e.p:e)}}}return Ge(n,s)},ar=function(e,t,n){var r=e.labels,s=me,i,a,u;for(i in r)a=r[i]-t,a<0==!!n&&a&&s>(a=Math.abs(a))&&(u=i,s=a);return u},fe=function(e,t,n){var r=e.vars,s=r[t],i=W,a=e._ctx,u,c,l;if(s)return u=r[t+"Params"],c=r.callbackScope||e,n&&Fe.length&&Yt(),a&&(W=a),l=u?s.apply(c,u):s.call(c),W=i,l},Tt=function(e){return Ue(e),e.scrollTrigger&&e.scrollTrigger.kill(!!te),e.progress()<1&&fe(e,"onInterrupt"),e},rt,io=[],ao=function(e){if(e)if(e=!e.name&&e.default||e,Fn()||e.headless){var t=e.name,n=Y(e),r=t&&!n&&e.init?function(){this._props=[]}:e,s={init:Mt,render:Kn,add:qn,kill:ci,modifier:ui,rawVars:0},i={targetTest:0,get:0,getSetter:Vn,aliases:{},register:0};if(ht(),e!==r){if(le[t])return;ve(r,ve(Vt(e,s),i)),Ze(r.prototype,Ze(s,Vt(e,i))),le[r.prop=t]=r,e.targetTest&&(Gt.push(r),zn[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}qr(t,r),e.register&&e.register(ue,r,ie)}else io.push(e)},B=255,xt={aqua:[0,B,B],lime:[0,B,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,B],navy:[0,0,128],white:[B,B,B],olive:[128,128,0],yellow:[B,B,0],orange:[B,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[B,0,0],pink:[B,192,203],cyan:[0,B,B],transparent:[B,B,B,0]},an=function(e,t,n){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(n-t)*e*6:e<.5?n:e*3<2?t+(n-t)*(2/3-e)*6:t)*B+.5|0},uo=function(e,t,n){var r=e?De(e)?[e>>16,e>>8&B,e&B]:0:xt.black,s,i,a,u,c,l,h,d,f,p;if(!r){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),xt[e])r=xt[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),i=e.charAt(2),a=e.charAt(3),e="#"+s+s+i+i+a+a+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return r=parseInt(e.substr(1,6),16),[r>>16,r>>8&B,r&B,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),r=[e>>16,e>>8&B,e&B]}else if(e.substr(0,3)==="hsl"){if(r=p=e.match(vn),!t)u=+r[0]%360/360,c=+r[1]/100,l=+r[2]/100,i=l<=.5?l*(c+1):l+c-l*c,s=l*2-i,r.length>3&&(r[3]*=1),r[0]=an(u+1/3,s,i),r[1]=an(u,s,i),r[2]=an(u-1/3,s,i);else if(~e.indexOf("="))return r=e.match(Lr),n&&r.length<4&&(r[3]=1),r}else r=e.match(vn)||xt.transparent;r=r.map(Number)}return t&&!p&&(s=r[0]/B,i=r[1]/B,a=r[2]/B,h=Math.max(s,i,a),d=Math.min(s,i,a),l=(h+d)/2,h===d?u=c=0:(f=h-d,c=l>.5?f/(2-h-d):f/(h+d),u=h===s?(i-a)/f+(i<a?6:0):h===i?(a-s)/f+2:(s-i)/f+4,u*=60),r[0]=~~(u+.5),r[1]=~~(c*100+.5),r[2]=~~(l*100+.5)),n&&r.length<4&&(r[3]=1),r},co=function(e){var t=[],n=[],r=-1;return e.split(Le).forEach(function(s){var i=s.match(nt)||[];t.push.apply(t,i),n.push(r+=i.length+1)}),t.c=n,t},ur=function(e,t,n){var r="",s=(e+r).match(Le),i=t?"hsla(":"rgba(",a=0,u,c,l,h;if(!s)return e;if(s=s.map(function(d){return(d=uo(d,t,1))&&i+(t?d[0]+","+d[1]+"%,"+d[2]+"%,"+d[3]:d.join(","))+")"}),n&&(l=co(e),u=n.c,u.join(r)!==l.c.join(r)))for(c=e.replace(Le,"1").split(nt),h=c.length-1;a<h;a++)r+=c[a]+(~u.indexOf(a)?s.shift()||i+"0,0,0,0)":(l.length?l:s.length?s:n).shift());if(!c)for(c=e.split(Le),h=c.length-1;a<h;a++)r+=c[a]+s[a];return r+c[h]},Le=function(){var o="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in xt)o+="|"+e+"\\b";return new RegExp(o+")","gi")}(),Xs=/hsl[a]?\(/,lo=function(e){var t=e.join(" "),n;if(Le.lastIndex=0,Le.test(t))return n=Xs.test(t),e[1]=ur(e[1],n),e[0]=ur(e[0],n,co(e[1])),!0},Pt,de=function(){var o=Date.now,e=500,t=33,n=o(),r=n,s=1e3/240,i=s,a=[],u,c,l,h,d,f,p=function _(y){var g=o()-r,E=y===!0,x,C,S,m;if((g>e||g<0)&&(n+=g-t),r+=g,S=r-n,x=S-i,(x>0||E)&&(m=++h.frame,d=S-h.time*1e3,h.time=S=S/1e3,i+=x+(x>=s?4:s-x),C=1),E||(u=c(_)),C)for(f=0;f<a.length;f++)a[f](S,d,m,y)};return h={time:0,frame:0,tick:function(){p(!0)},deltaRatio:function(y){return d/(1e3/(y||60))},wake:function(){Gr&&(!yn&&Fn()&&(Se=yn=window,Ln=Se.document||{},_e.gsap=ue,(Se.gsapVersions||(Se.gsapVersions=[])).push(ue.version),Wr(Ht||Se.GreenSockGlobals||!Se.gsap&&Se||{}),io.forEach(ao)),l=typeof requestAnimationFrame<"u"&&requestAnimationFrame,u&&h.sleep(),c=l||function(y){return setTimeout(y,i-h.time*1e3+1|0)},Pt=1,p(2))},sleep:function(){(l?cancelAnimationFrame:clearTimeout)(u),Pt=0,c=Mt},lagSmoothing:function(y,g){e=y||1/0,t=Math.min(g||33,e)},fps:function(y){s=1e3/(y||240),i=h.time*1e3+s},add:function(y,g,E){var x=g?function(C,S,m,b){y(C,S,m,b),h.remove(x)}:y;return h.remove(y),a[E?"unshift":"push"](x),ht(),x},remove:function(y,g){~(g=a.indexOf(y))&&a.splice(g,1)&&f>=g&&f--},_listeners:a},h}(),ht=function(){return!Pt&&de.wake()},k={},$s=/^[\d.\-M][\d.\-,\s]/,js=/["']/g,Zs=function(e){for(var t={},n=e.substr(1,e.length-3).split(":"),r=n[0],s=1,i=n.length,a,u,c;s<i;s++)u=n[s],a=s!==i-1?u.lastIndexOf(","):u.length,c=u.substr(0,a),t[r]=isNaN(c)?c.replace(js,"").trim():+c,r=u.substr(a+1).trim();return t},Qs=function(e){var t=e.indexOf("(")+1,n=e.indexOf(")"),r=e.indexOf("(",t);return e.substring(t,~r&&r<n?e.indexOf(")",n+1):n)},Js=function(e){var t=(e+"").split("("),n=k[t[0]];return n&&t.length>1&&n.config?n.config.apply(null,~e.indexOf("{")?[Zs(t[1])]:Qs(e).split(",").map(Kr)):k._CE&&$s.test(e)?k._CE("",e):n},fo=function(e){return function(t){return 1-e(1-t)}},ho=function o(e,t){for(var n=e._first,r;n;)n instanceof re?o(n,t):n.vars.yoyoEase&&(!n._yoyo||!n._repeat)&&n._yoyo!==t&&(n.timeline?o(n.timeline,t):(r=n._ease,n._ease=n._yEase,n._yEase=r,n._yoyo=t)),n=n._next},$e=function(e,t){return e&&(Y(e)?e:k[e]||Js(e))||t},et=function(e,t,n,r){n===void 0&&(n=function(u){return 1-t(1-u)}),r===void 0&&(r=function(u){return u<.5?t(u*2)/2:1-t((1-u)*2)/2});var s={easeIn:t,easeOut:n,easeInOut:r},i;return se(e,function(a){k[a]=_e[a]=s,k[i=a.toLowerCase()]=n;for(var u in s)k[i+(u==="easeIn"?".in":u==="easeOut"?".out":".inOut")]=k[a+"."+u]=s[u]}),s},_o=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},un=function o(e,t,n){var r=t>=1?t:1,s=(n||(e?.3:.45))/(t<1?t:1),i=s/gn*(Math.asin(1/r)||0),a=function(l){return l===1?1:r*Math.pow(2,-10*l)*ws((l-i)*s)+1},u=e==="out"?a:e==="in"?function(c){return 1-a(1-c)}:_o(a);return s=gn/s,u.config=function(c,l){return o(e,c,l)},u},cn=function o(e,t){t===void 0&&(t=1.70158);var n=function(i){return i?--i*i*((t+1)*i+t)+1:0},r=e==="out"?n:e==="in"?function(s){return 1-n(1-s)}:_o(n);return r.config=function(s){return o(e,s)},r};se("Linear,Quad,Cubic,Quart,Quint,Strong",function(o,e){var t=e<5?e+1:e;et(o+",Power"+(t-1),e?function(n){return Math.pow(n,t)}:function(n){return n},function(n){return 1-Math.pow(1-n,t)},function(n){return n<.5?Math.pow(n*2,t)/2:1-Math.pow((1-n)*2,t)/2})});k.Linear.easeNone=k.none=k.Linear.easeIn;et("Elastic",un("in"),un("out"),un());(function(o,e){var t=1/e,n=2*t,r=2.5*t,s=function(a){return a<t?o*a*a:a<n?o*Math.pow(a-1.5/e,2)+.75:a<r?o*(a-=2.25/e)*a+.9375:o*Math.pow(a-2.625/e,2)+.984375};et("Bounce",function(i){return 1-s(1-i)},s)})(7.5625,2.75);et("Expo",function(o){return o?Math.pow(2,10*(o-1)):0});et("Circ",function(o){return-(Br(1-o*o)-1)});et("Sine",function(o){return o===1?1:-As(o*Cs)+1});et("Back",cn("in"),cn("out"),cn());k.SteppedEase=k.steps=_e.SteppedEase={config:function(e,t){e===void 0&&(e=1);var n=1/e,r=e+(t?0:1),s=t?1:0,i=1-U;return function(a){return((r*Bt(0,i,a)|0)+s)*n}}};lt.ease=k["quad.out"];se("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(o){return Gn+=o+","+o+"Params,"});var po=function(e,t){this.id=Es++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:Yr,this.set=t?t.getSetter:Vn},It=function(){function o(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,ft(this,+t.duration,1,1),this.data=t.data,W&&(this._ctx=W,W.data.push(this)),Pt||de.wake()}var e=o.prototype;return e.delay=function(n){return n||n===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+n-this._delay),this._delay=n,this):this._delay},e.duration=function(n){return arguments.length?this.totalDuration(this._repeat>0?n+(n+this._rDelay)*this._repeat:n):this.totalDuration()&&this._dur},e.totalDuration=function(n){return arguments.length?(this._dirty=0,ft(this,this._repeat<0?n:(n-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(n,r){if(ht(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(en(this,n),!s._dp||s.parent||jr(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&n<this._tDur||this._ts<0&&n>0||!this._tDur&&!n)&&Ce(this._dp,this,this._start-this._delay)}return(this._tTime!==n||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===U||!n&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=n),Vr(this,n,r)),this},e.time=function(n,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),n+sr(this))%(this._dur+this._rDelay)||(n?this._dur:0),r):this._time},e.totalProgress=function(n,r){return arguments.length?this.totalTime(this.totalDuration()*n,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},e.progress=function(n,r){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-n:n)+sr(this),r):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(n,r){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(n-1)*s,r):this._repeat?dt(this._tTime,s)+1:1},e.timeScale=function(n,r){if(!arguments.length)return this._rts===-U?0:this._rts;if(this._rts===n)return this;var s=this.parent&&this._ts?Kt(this.parent._time,this):this._tTime;return this._rts=+n||0,this._ts=this._ps||n===-U?0:this._rts,this.totalTime(Bt(-Math.abs(this._delay),this._tDur,s),r!==!1),Jt(this),ks(this)},e.paused=function(n){return arguments.length?(this._ps!==n&&(this._ps=n,n?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(ht(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==U&&(this._tTime-=U)))),this):this._ps},e.startTime=function(n){if(arguments.length){this._start=n;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&Ce(r,this,n-this._delay),this}return this._start},e.endTime=function(n){return this._start+(oe(n)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(n){var r=this.parent||this._dp;return r?n&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Kt(r.rawTime(n),this):this._tTime:this._tTime},e.revert=function(n){n===void 0&&(n=Ms);var r=te;return te=n,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(n),this.totalTime(-.01,n.suppressEvents)),this.data!=="nested"&&n.kill!==!1&&this.kill(),te=r,this},e.globalTime=function(n){for(var r=this,s=arguments.length?n:r.rawTime();r;)s=r._start+s/(Math.abs(r._ts)||1),r=r._dp;return!this.parent&&this._sat?this._sat.globalTime(n):s},e.repeat=function(n){return arguments.length?(this._repeat=n===1/0?-2:n,ir(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(n){if(arguments.length){var r=this._time;return this._rDelay=n,ir(this),r?this.time(r):this}return this._rDelay},e.yoyo=function(n){return arguments.length?(this._yoyo=n,this):this._yoyo},e.seek=function(n,r){return this.totalTime(pe(this,n),oe(r))},e.restart=function(n,r){return this.play().totalTime(n?-this._delay:0,oe(r))},e.play=function(n,r){return n!=null&&this.seek(n,r),this.reversed(!1).paused(!1)},e.reverse=function(n,r){return n!=null&&this.seek(n||this.totalDuration(),r),this.reversed(!0).paused(!1)},e.pause=function(n,r){return n!=null&&this.seek(n,r),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(n){return arguments.length?(!!n!==this.reversed()&&this.timeScale(-this._rts||(n?-U:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-U,this},e.isActive=function(){var n=this.parent||this._dp,r=this._start,s;return!!(!n||this._ts&&this._initted&&n.isActive()&&(s=n.rawTime(!0))>=r&&s<this.endTime(!0)-U)},e.eventCallback=function(n,r,s){var i=this.vars;return arguments.length>1?(r?(i[n]=r,s&&(i[n+"Params"]=s),n==="onUpdate"&&(this._onUpdate=r)):delete i[n],this):i[n]},e.then=function(n){var r=this;return new Promise(function(s){var i=Y(n)?n:Xr,a=function(){var c=r.then;r.then=null,Y(i)&&(i=i(r))&&(i.then||i===r)&&(r.then=c),s(i),r.then=c};r._initted&&r.totalProgress()===1&&r._ts>=0||!r._tTime&&r._ts<0?a():r._prom=a})},e.kill=function(){Tt(this)},o}();ve(It.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-U,_prom:0,_ps:!1,_rts:1});var re=function(o){Rr(e,o);function e(n,r){var s;return n===void 0&&(n={}),s=o.call(this,n)||this,s.labels={},s.smoothChildTiming=!!n.smoothChildTiming,s.autoRemoveChildren=!!n.autoRemoveChildren,s._sort=oe(n.sortChildren),q&&Ce(n.parent||q,Ne(s),r),n.reversed&&s.reverse(),n.paused&&s.paused(!0),n.scrollTrigger&&Zr(Ne(s),n.scrollTrigger),s}var t=e.prototype;return t.to=function(r,s,i){return wt(0,arguments,this),this},t.from=function(r,s,i){return wt(1,arguments,this),this},t.fromTo=function(r,s,i,a){return wt(2,arguments,this),this},t.set=function(r,s,i){return s.duration=0,s.parent=this,At(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new K(r,s,pe(this,i),1),this},t.call=function(r,s,i){return Ce(this,K.delayedCall(0,r,s),i)},t.staggerTo=function(r,s,i,a,u,c,l){return i.duration=s,i.stagger=i.stagger||a,i.onComplete=c,i.onCompleteParams=l,i.parent=this,new K(r,i,pe(this,u)),this},t.staggerFrom=function(r,s,i,a,u,c,l){return i.runBackwards=1,At(i).immediateRender=oe(i.immediateRender),this.staggerTo(r,s,i,a,u,c,l)},t.staggerFromTo=function(r,s,i,a,u,c,l,h){return a.startAt=i,At(a).immediateRender=oe(a.immediateRender),this.staggerTo(r,s,a,u,c,l,h)},t.render=function(r,s,i){var a=this._time,u=this._dirty?this.totalDuration():this._tDur,c=this._dur,l=r<=0?0:$(r),h=this._zTime<0!=r<0&&(this._initted||!c),d,f,p,_,y,g,E,x,C,S,m,b;if(this!==q&&l>u&&r>=0&&(l=u),l!==this._tTime||i||h){if(a!==this._time&&c&&(l+=this._time-a,r+=this._time-a),d=l,C=this._start,x=this._ts,g=!x,h&&(c||(a=this._zTime),(r||!s)&&(this._zTime=r)),this._repeat){if(m=this._yoyo,y=c+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(y*100+r,s,i);if(d=$(l%y),l===u?(_=this._repeat,d=c):(_=~~(l/y),_&&_===l/y&&(d=c,_--),d>c&&(d=c)),S=dt(this._tTime,y),!a&&this._tTime&&S!==_&&this._tTime-S*y-this._dur<=0&&(S=_),m&&_&1&&(d=c-d,b=1),_!==S&&!this._lock){var v=m&&S&1,T=v===(m&&_&1);if(_<S&&(v=!v),a=v?0:l%c?c:l,this._lock=1,this.render(a||(b?0:$(_*y)),s,!c)._lock=0,this._tTime=l,!s&&this.parent&&fe(this,"onRepeat"),this.vars.repeatRefresh&&!b&&(this.invalidate()._lock=1),a&&a!==this._time||g!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,u=this._tDur,T&&(this._lock=2,a=v?c:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!b&&this.invalidate()),this._lock=0,!this._ts&&!g)return this;ho(this,b)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(E=Ls(this,$(a),$(d)),E&&(l-=d-(d=E._start))),this._tTime=l,this._time=d,this._act=!x,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,a=0),!a&&d&&!s&&!_&&(fe(this,"onStart"),this._tTime!==l))return this;if(d>=a&&r>=0)for(f=this._first;f;){if(p=f._next,(f._act||d>=f._start)&&f._ts&&E!==f){if(f.parent!==this)return this.render(r,s,i);if(f.render(f._ts>0?(d-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(d-f._start)*f._ts,s,i),d!==this._time||!this._ts&&!g){E=0,p&&(l+=this._zTime=-U);break}}f=p}else{f=this._last;for(var A=r<0?r:d;f;){if(p=f._prev,(f._act||A<=f._end)&&f._ts&&E!==f){if(f.parent!==this)return this.render(r,s,i);if(f.render(f._ts>0?(A-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(A-f._start)*f._ts,s,i||te&&(f._initted||f._startAt)),d!==this._time||!this._ts&&!g){E=0,p&&(l+=this._zTime=A?-U:U);break}}f=p}}if(E&&!s&&(this.pause(),E.render(d>=a?0:-U)._zTime=d>=a?1:-1,this._ts))return this._start=C,Jt(this),this.render(r,s,i);this._onUpdate&&!s&&fe(this,"onUpdate",!0),(l===u&&this._tTime>=this.totalDuration()||!l&&a)&&(C===this._start||Math.abs(x)!==Math.abs(this._ts))&&(this._lock||((r||!c)&&(l===u&&this._ts>0||!l&&this._ts<0)&&Ue(this,1),!s&&!(r<0&&!a)&&(l||a||!u)&&(fe(this,l===u&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(l<u&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(r,s){var i=this;if(De(s)||(s=pe(this,s,r)),!(r instanceof It)){if(ne(r))return r.forEach(function(a){return i.add(a,s)}),this;if(j(r))return this.addLabel(r,s);if(Y(r))r=K.delayedCall(0,r);else return this}return this!==r?Ce(this,r,s):this},t.getChildren=function(r,s,i,a){r===void 0&&(r=!0),s===void 0&&(s=!0),i===void 0&&(i=!0),a===void 0&&(a=-me);for(var u=[],c=this._first;c;)c._start>=a&&(c instanceof K?s&&u.push(c):(i&&u.push(c),r&&u.push.apply(u,c.getChildren(!0,s,i)))),c=c._next;return u},t.getById=function(r){for(var s=this.getChildren(1,1,1),i=s.length;i--;)if(s[i].vars.id===r)return s[i]},t.remove=function(r){return j(r)?this.removeLabel(r):Y(r)?this.killTweensOf(r):(Qt(this,r),r===this._recent&&(this._recent=this._last),Xe(this))},t.totalTime=function(r,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=$(de.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),o.prototype.totalTime.call(this,r,s),this._forcing=0,this):this._tTime},t.addLabel=function(r,s){return this.labels[r]=pe(this,s),this},t.removeLabel=function(r){return delete this.labels[r],this},t.addPause=function(r,s,i){var a=K.delayedCall(0,s||Mt,i);return a.data="isPause",this._hasPause=1,Ce(this,a,pe(this,r))},t.removePause=function(r){var s=this._first;for(r=pe(this,r);s;)s._start===r&&s.data==="isPause"&&Ue(s),s=s._next},t.killTweensOf=function(r,s,i){for(var a=this.getTweensOf(r,i),u=a.length;u--;)ke!==a[u]&&a[u].kill(r,s);return this},t.getTweensOf=function(r,s){for(var i=[],a=ge(r),u=this._first,c=De(s),l;u;)u instanceof K?Ds(u._targets,a)&&(c?(!ke||u._initted&&u._ts)&&u.globalTime(0)<=s&&u.globalTime(u.totalDuration())>s:!s||u.isActive())&&i.push(u):(l=u.getTweensOf(a,s)).length&&i.push.apply(i,l),u=u._next;return i},t.tweenTo=function(r,s){s=s||{};var i=this,a=pe(i,r),u=s,c=u.startAt,l=u.onStart,h=u.onStartParams,d=u.immediateRender,f,p=K.to(i,ve({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:s.duration||Math.abs((a-(c&&"time"in c?c.time:i._time))/i.timeScale())||U,onStart:function(){if(i.pause(),!f){var y=s.duration||Math.abs((a-(c&&"time"in c?c.time:i._time))/i.timeScale());p._dur!==y&&ft(p,y,0,1).render(p._time,!0,!0),f=1}l&&l.apply(p,h||[])}},s));return d?p.render(0):p},t.tweenFromTo=function(r,s,i){return this.tweenTo(s,ve({startAt:{time:pe(this,r)}},i))},t.recent=function(){return this._recent},t.nextLabel=function(r){return r===void 0&&(r=this._time),ar(this,pe(this,r))},t.previousLabel=function(r){return r===void 0&&(r=this._time),ar(this,pe(this,r),1)},t.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+U)},t.shiftChildren=function(r,s,i){i===void 0&&(i=0);for(var a=this._first,u=this.labels,c;a;)a._start>=i&&(a._start+=r,a._end+=r),a=a._next;if(s)for(c in u)u[c]>=i&&(u[c]+=r);return Xe(this)},t.invalidate=function(r){var s=this._first;for(this._lock=0;s;)s.invalidate(r),s=s._next;return o.prototype.invalidate.call(this,r)},t.clear=function(r){r===void 0&&(r=!0);for(var s=this._first,i;s;)i=s._next,this.remove(s),s=i;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),Xe(this)},t.totalDuration=function(r){var s=0,i=this,a=i._last,u=me,c,l,h;if(arguments.length)return i.timeScale((i._repeat<0?i.duration():i.totalDuration())/(i.reversed()?-r:r));if(i._dirty){for(h=i.parent;a;)c=a._prev,a._dirty&&a.totalDuration(),l=a._start,l>u&&i._sort&&a._ts&&!i._lock?(i._lock=1,Ce(i,a,l-a._delay,1)._lock=0):u=l,l<0&&a._ts&&(s-=l,(!h&&!i._dp||h&&h.smoothChildTiming)&&(i._start+=l/i._ts,i._time-=l,i._tTime-=l),i.shiftChildren(-l,!1,-1/0),u=0),a._end>s&&a._ts&&(s=a._end),a=c;ft(i,i===q&&i._time>s?i._time:s,1,1),i._dirty=0}return i._tDur},e.updateRoot=function(r){if(q._ts&&(Vr(q,Kt(r,q)),Hr=de.frame),de.frame>=rr){rr+=he.autoSleep||120;var s=q._first;if((!s||!s._ts)&&he.autoSleep&&de._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||de.sleep()}}},e}(It);ve(re.prototype,{_lock:0,_hasPause:0,_forcing:0});var ei=function(e,t,n,r,s,i,a){var u=new ie(this._pt,e,t,0,1,To,null,s),c=0,l=0,h,d,f,p,_,y,g,E;for(u.b=n,u.e=r,n+="",r+="",(g=~r.indexOf("random("))&&(r=Dt(r)),i&&(E=[n,r],i(E,e,t),n=E[0],r=E[1]),d=n.match(on)||[];h=on.exec(r);)p=h[0],_=r.substring(c,h.index),f?f=(f+1)%5:_.substr(-5)==="rgba("&&(f=1),p!==d[l++]&&(y=parseFloat(d[l-1])||0,u._pt={_next:u._pt,p:_||l===1?_:",",s:y,c:p.charAt(1)==="="?st(y,p)-y:parseFloat(p)-y,m:f&&f<4?Math.round:0},c=on.lastIndex);return u.c=c<r.length?r.substring(c,r.length):"",u.fp=a,(Ur.test(r)||g)&&(u.e=0),this._pt=u,u},qn=function(e,t,n,r,s,i,a,u,c,l){Y(r)&&(r=r(s||0,e,i));var h=e[t],d=n!=="get"?n:Y(h)?c?e[t.indexOf("set")||!Y(e["get"+t.substr(3)])?t:"get"+t.substr(3)](c):e[t]():h,f=Y(h)?c?si:yo:Yn,p;if(j(r)&&(~r.indexOf("random(")&&(r=Dt(r)),r.charAt(1)==="="&&(p=st(d,r)+(ee(d)||0),(p||p===0)&&(r=p))),!l||d!==r||An)return!isNaN(d*r)&&r!==""?(p=new ie(this._pt,e,t,+d||0,r-(d||0),typeof h=="boolean"?ai:bo,0,f),c&&(p.fp=c),a&&p.modifier(a,this,e),this._pt=p):(!h&&!(t in e)&&Un(t,r),ei.call(this,e,t,d,r,f,u||he.stringFilter,c))},ti=function(e,t,n,r,s){if(Y(e)&&(e=Ot(e,s,t,n,r)),!we(e)||e.style&&e.nodeType||ne(e)||Fr(e))return j(e)?Ot(e,s,t,n,r):e;var i={},a;for(a in e)i[a]=Ot(e[a],s,t,n,r);return i},mo=function(e,t,n,r,s,i){var a,u,c,l;if(le[e]&&(a=new le[e]).init(s,a.rawVars?t[e]:ti(t[e],r,s,i,n),n,r,i)!==!1&&(n._pt=u=new ie(n._pt,s,e,0,1,a.render,a,0,a.priority),n!==rt))for(c=n._ptLookup[n._targets.indexOf(s)],l=a._props.length;l--;)c[a._props[l]]=u;return a},ke,An,Hn=function o(e,t,n){var r=e.vars,s=r.ease,i=r.startAt,a=r.immediateRender,u=r.lazy,c=r.onUpdate,l=r.runBackwards,h=r.yoyoEase,d=r.keyframes,f=r.autoRevert,p=e._dur,_=e._startAt,y=e._targets,g=e.parent,E=g&&g.data==="nested"?g.vars.targets:y,x=e._overwrite==="auto"&&!Rn,C=e.timeline,S,m,b,v,T,A,w,M,P,F,G,R,z;if(C&&(!d||!s)&&(s="none"),e._ease=$e(s,lt.ease),e._yEase=h?fo($e(h===!0?s:h,lt.ease)):0,h&&e._yoyo&&!e._repeat&&(h=e._yEase,e._yEase=e._ease,e._ease=h),e._from=!C&&!!r.runBackwards,!C||d&&!r.stagger){if(M=y[0]?Ke(y[0]).harness:0,R=M&&r[M.prop],S=Vt(r,zn),_&&(_._zTime<0&&_.progress(1),t<0&&l&&a&&!f?_.render(-1,!0):_.revert(l&&p?zt:Ns),_._lazy=0),i){if(Ue(e._startAt=K.set(y,ve({data:"isStart",overwrite:!1,parent:g,immediateRender:!0,lazy:!_&&oe(u),startAt:null,delay:0,onUpdate:c&&function(){return fe(e,"onUpdate")},stagger:0},i))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(te||!a&&!f)&&e._startAt.revert(zt),a&&p&&t<=0&&n<=0){t&&(e._zTime=t);return}}else if(l&&p&&!_){if(t&&(a=!1),b=ve({overwrite:!1,data:"isFromStart",lazy:a&&!_&&oe(u),immediateRender:a,stagger:0,parent:g},S),R&&(b[M.prop]=R),Ue(e._startAt=K.set(y,b)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(te?e._startAt.revert(zt):e._startAt.render(-1,!0)),e._zTime=t,!a)o(e._startAt,U,U);else if(!t)return}for(e._pt=e._ptCache=0,u=p&&oe(u)||u&&!p,m=0;m<y.length;m++){if(T=y[m],w=T._gsap||Wn(y)[m]._gsap,e._ptLookup[m]=F={},bn[w.id]&&Fe.length&&Yt(),G=E===y?m:E.indexOf(T),M&&(P=new M).init(T,R||S,e,G,E)!==!1&&(e._pt=v=new ie(e._pt,T,P.name,0,1,P.render,P,0,P.priority),P._props.forEach(function(X){F[X]=v}),P.priority&&(A=1)),!M||R)for(b in S)le[b]&&(P=mo(b,S,e,G,T,E))?P.priority&&(A=1):F[b]=v=qn.call(e,T,b,"get",S[b],G,E,0,r.stringFilter);e._op&&e._op[m]&&e.kill(T,e._op[m]),x&&e._pt&&(ke=e,q.killTweensOf(T,F,e.globalTime(t)),z=!e.parent,ke=0),e._pt&&u&&(bn[w.id]=1)}A&&xo(e),e._onInit&&e._onInit(e)}e._onUpdate=c,e._initted=(!e._op||e._pt)&&!z,d&&t<=0&&C.render(me,!0,!0)},ni=function(e,t,n,r,s,i,a,u){var c=(e._pt&&e._ptCache||(e._ptCache={}))[t],l,h,d,f;if(!c)for(c=e._ptCache[t]=[],d=e._ptLookup,f=e._targets.length;f--;){if(l=d[f][t],l&&l.d&&l.d._pt)for(l=l.d._pt;l&&l.p!==t&&l.fp!==t;)l=l._next;if(!l)return An=1,e.vars[t]="+=0",Hn(e,a),An=0,u?Nt(t+" not eligible for reset"):1;c.push(l)}for(f=c.length;f--;)h=c[f],l=h._pt||h,l.s=(r||r===0)&&!s?r:l.s+(r||0)+i*l.c,l.c=n-l.s,h.e&&(h.e=V(n)+ee(h.e)),h.b&&(h.b=l.s+ee(h.b))},ri=function(e,t){var n=e[0]?Ke(e[0]).harness:0,r=n&&n.aliases,s,i,a,u;if(!r)return t;s=Ze({},t);for(i in r)if(i in s)for(u=r[i].split(","),a=u.length;a--;)s[u[a]]=s[i];return s},oi=function(e,t,n,r){var s=t.ease||r||"power1.inOut",i,a;if(ne(t))a=n[e]||(n[e]=[]),t.forEach(function(u,c){return a.push({t:c/(t.length-1)*100,v:u,e:s})});else for(i in t)a=n[i]||(n[i]=[]),i==="ease"||a.push({t:parseFloat(e),v:t[i],e:s})},Ot=function(e,t,n,r,s){return Y(e)?e.call(t,n,r,s):j(e)&&~e.indexOf("random(")?Dt(e):e},go=Gn+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",vo={};se(go+",id,stagger,delay,duration,paused,scrollTrigger",function(o){return vo[o]=1});var K=function(o){Rr(e,o);function e(n,r,s,i){var a;typeof r=="number"&&(s.duration=r,r=s,s=null),a=o.call(this,i?r:At(r))||this;var u=a.vars,c=u.duration,l=u.delay,h=u.immediateRender,d=u.stagger,f=u.overwrite,p=u.keyframes,_=u.defaults,y=u.scrollTrigger,g=u.yoyoEase,E=r.parent||q,x=(ne(n)||Fr(n)?De(n[0]):"length"in r)?[n]:ge(n),C,S,m,b,v,T,A,w;if(a._targets=x.length?Wn(x):Nt("GSAP target "+n+" not found. https://gsap.com",!he.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=f,p||d||Ut(c)||Ut(l)){if(r=a.vars,C=a.timeline=new re({data:"nested",defaults:_||{},targets:E&&E.data==="nested"?E.vars.targets:x}),C.kill(),C.parent=C._dp=Ne(a),C._start=0,d||Ut(c)||Ut(l)){if(b=x.length,A=d&&to(d),we(d))for(v in d)~go.indexOf(v)&&(w||(w={}),w[v]=d[v]);for(S=0;S<b;S++)m=Vt(r,vo),m.stagger=0,g&&(m.yoyoEase=g),w&&Ze(m,w),T=x[S],m.duration=+Ot(c,Ne(a),S,T,x),m.delay=(+Ot(l,Ne(a),S,T,x)||0)-a._delay,!d&&b===1&&m.delay&&(a._delay=l=m.delay,a._start+=l,m.delay=0),C.to(T,m,A?A(S,T,x):0),C._ease=k.none;C.duration()?c=l=0:a.timeline=0}else if(p){At(ve(C.vars.defaults,{ease:"none"})),C._ease=$e(p.ease||r.ease||"none");var M=0,P,F,G;if(ne(p))p.forEach(function(R){return C.to(x,R,">")}),C.duration();else{m={};for(v in p)v==="ease"||v==="easeEach"||oi(v,p[v],m,p.easeEach);for(v in m)for(P=m[v].sort(function(R,z){return R.t-z.t}),M=0,S=0;S<P.length;S++)F=P[S],G={ease:F.e,duration:(F.t-(S?P[S-1].t:0))/100*c},G[v]=F.v,C.to(x,G,M),M+=G.duration;C.duration()<c&&C.to({},{duration:c-C.duration()})}}c||a.duration(c=C.duration())}else a.timeline=0;return f===!0&&!Rn&&(ke=Ne(a),q.killTweensOf(x),ke=0),Ce(E,Ne(a),s),r.reversed&&a.reverse(),r.paused&&a.paused(!0),(h||!c&&!p&&a._start===$(E._time)&&oe(h)&&Rs(Ne(a))&&E.data!=="nested")&&(a._tTime=-U,a.render(Math.max(0,-l)||0)),y&&Zr(Ne(a),y),a}var t=e.prototype;return t.render=function(r,s,i){var a=this._time,u=this._tDur,c=this._dur,l=r<0,h=r>u-U&&!l?u:r<U?0:r,d,f,p,_,y,g,E,x,C;if(!c)Fs(this,r,s,i);else if(h!==this._tTime||!r||i||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==l){if(d=h,x=this.timeline,this._repeat){if(_=c+this._rDelay,this._repeat<-1&&l)return this.totalTime(_*100+r,s,i);if(d=$(h%_),h===u?(p=this._repeat,d=c):(p=~~(h/_),p&&p===$(h/_)&&(d=c,p--),d>c&&(d=c)),g=this._yoyo&&p&1,g&&(C=this._yEase,d=c-d),y=dt(this._tTime,_),d===a&&!i&&this._initted&&p===y)return this._tTime=h,this;p!==y&&(x&&this._yEase&&ho(x,g),this.vars.repeatRefresh&&!g&&!this._lock&&this._time!==_&&this._initted&&(this._lock=i=1,this.render($(_*p),!0).invalidate()._lock=0))}if(!this._initted){if(Qr(this,l?r:d,i,s,h))return this._tTime=0,this;if(a!==this._time&&!(i&&this.vars.repeatRefresh&&p!==y))return this;if(c!==this._dur)return this.render(r,s,i)}if(this._tTime=h,this._time=d,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=E=(C||this._ease)(d/c),this._from&&(this.ratio=E=1-E),d&&!a&&!s&&!p&&(fe(this,"onStart"),this._tTime!==h))return this;for(f=this._pt;f;)f.r(E,f.d),f=f._next;x&&x.render(r<0?r:x._dur*x._ease(d/this._dur),s,i)||this._startAt&&(this._zTime=r),this._onUpdate&&!s&&(l&&Tn(this,r,s,i),fe(this,"onUpdate")),this._repeat&&p!==y&&this.vars.onRepeat&&!s&&this.parent&&fe(this,"onRepeat"),(h===this._tDur||!h)&&this._tTime===h&&(l&&!this._onUpdate&&Tn(this,r,!0,!0),(r||!c)&&(h===this._tDur&&this._ts>0||!h&&this._ts<0)&&Ue(this,1),!s&&!(l&&!a)&&(h||a||g)&&(fe(this,h===u?"onComplete":"onReverseComplete",!0),this._prom&&!(h<u&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(r){return(!r||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(r),o.prototype.invalidate.call(this,r)},t.resetTo=function(r,s,i,a,u){Pt||de.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts),l;return this._initted||Hn(this,c),l=this._ease(c/this._dur),ni(this,r,s,i,a,l,c,u)?this.resetTo(r,s,i,a,1):(en(this,0),this.parent||$r(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(r,s){if(s===void 0&&(s="all"),!r&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?Tt(this):this;if(this.timeline){var i=this.timeline.totalDuration();return this.timeline.killTweensOf(r,s,ke&&ke.vars.overwrite!==!0)._first||Tt(this),this.parent&&i!==this.timeline.totalDuration()&&ft(this,this._dur*this.timeline._tDur/i,0,1),this}var a=this._targets,u=r?ge(r):a,c=this._ptLookup,l=this._pt,h,d,f,p,_,y,g;if((!s||s==="all")&&Is(a,u))return s==="all"&&(this._pt=0),Tt(this);for(h=this._op=this._op||[],s!=="all"&&(j(s)&&(_={},se(s,function(E){return _[E]=1}),s=_),s=ri(a,s)),g=a.length;g--;)if(~u.indexOf(a[g])){d=c[g],s==="all"?(h[g]=s,p=d,f={}):(f=h[g]=h[g]||{},p=s);for(_ in p)y=d&&d[_],y&&((!("kill"in y.d)||y.d.kill(_)===!0)&&Qt(this,y,"_pt"),delete d[_]),f!=="all"&&(f[_]=1)}return this._initted&&!this._pt&&l&&Tt(this),this},e.to=function(r,s){return new e(r,s,arguments[2])},e.from=function(r,s){return wt(1,arguments)},e.delayedCall=function(r,s,i,a){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:s,onReverseComplete:s,onCompleteParams:i,onReverseCompleteParams:i,callbackScope:a})},e.fromTo=function(r,s,i){return wt(2,arguments)},e.set=function(r,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(r,s)},e.killTweensOf=function(r,s,i){return q.killTweensOf(r,s,i)},e}(It);ve(K.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});se("staggerTo,staggerFrom,staggerFromTo",function(o){K[o]=function(){var e=new re,t=Sn.call(arguments,0);return t.splice(o==="staggerFromTo"?5:4,0,0),e[o].apply(e,t)}});var Yn=function(e,t,n){return e[t]=n},yo=function(e,t,n){return e[t](n)},si=function(e,t,n,r){return e[t](r.fp,n)},ii=function(e,t,n){return e.setAttribute(t,n)},Vn=function(e,t){return Y(e[t])?yo:Bn(e[t])&&e.setAttribute?ii:Yn},bo=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},ai=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},To=function(e,t){var n=t._pt,r="";if(!e&&t.b)r=t.b;else if(e===1&&t.e)r=t.e;else{for(;n;)r=n.p+(n.m?n.m(n.s+n.c*e):Math.round((n.s+n.c*e)*1e4)/1e4)+r,n=n._next;r+=t.c}t.set(t.t,t.p,r,t)},Kn=function(e,t){for(var n=t._pt;n;)n.r(e,n.d),n=n._next},ui=function(e,t,n,r){for(var s=this._pt,i;s;)i=s._next,s.p===r&&s.modifier(e,t,n),s=i},ci=function(e){for(var t=this._pt,n,r;t;)r=t._next,t.p===e&&!t.op||t.op===e?Qt(this,t,"_pt"):t.dep||(n=1),t=r;return!n},li=function(e,t,n,r){r.mSet(e,t,r.m.call(r.tween,n,r.mt),r)},xo=function(e){for(var t=e._pt,n,r,s,i;t;){for(n=t._next,r=s;r&&r.pr>t.pr;)r=r._next;(t._prev=r?r._prev:i)?t._prev._next=t:s=t,(t._next=r)?r._prev=t:i=t,t=n}e._pt=s},ie=function(){function o(t,n,r,s,i,a,u,c,l){this.t=n,this.s=s,this.c=i,this.p=r,this.r=a||bo,this.d=u||this,this.set=c||Yn,this.pr=l||0,this._next=t,t&&(t._prev=this)}var e=o.prototype;return e.modifier=function(n,r,s){this.mSet=this.mSet||this.set,this.set=li,this.m=n,this.mt=s,this.tween=r},o}();se(Gn+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(o){return zn[o]=1});_e.TweenMax=_e.TweenLite=K;_e.TimelineLite=_e.TimelineMax=re;q=new re({sortChildren:!1,defaults:lt,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});he.stringFilter=lo;var je=[],Wt={},di=[],cr=0,fi=0,ln=function(e){return(Wt[e]||di).map(function(t){return t()})},wn=function(){var e=Date.now(),t=[];e-cr>2&&(ln("matchMediaInit"),je.forEach(function(n){var r=n.queries,s=n.conditions,i,a,u,c;for(a in r)i=Se.matchMedia(r[a]).matches,i&&(u=1),i!==s[a]&&(s[a]=i,c=1);c&&(n.revert(),u&&t.push(n))}),ln("matchMediaRevert"),t.forEach(function(n){return n.onMatch(n,function(r){return n.add(null,r)})}),cr=e,ln("matchMedia"))},So=function(){function o(t,n){this.selector=n&&Cn(n),this.data=[],this._r=[],this.isReverted=!1,this.id=fi++,t&&this.add(t)}var e=o.prototype;return e.add=function(n,r,s){Y(n)&&(s=r,r=n,n=Y);var i=this,a=function(){var c=W,l=i.selector,h;return c&&c!==i&&c.data.push(i),s&&(i.selector=Cn(s)),W=i,h=r.apply(i,arguments),Y(h)&&i._r.push(h),W=c,i.selector=l,i.isReverted=!1,h};return i.last=a,n===Y?a(i,function(u){return i.add(null,u)}):n?i[n]=a:a},e.ignore=function(n){var r=W;W=null,n(this),W=r},e.getTweens=function(){var n=[];return this.data.forEach(function(r){return r instanceof o?n.push.apply(n,r.getTweens()):r instanceof K&&!(r.parent&&r.parent.data==="nested")&&n.push(r)}),n},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(n,r){var s=this;if(n?function(){for(var a=s.getTweens(),u=s.data.length,c;u--;)c=s.data[u],c.data==="isFlip"&&(c.revert(),c.getChildren(!0,!0,!1).forEach(function(l){return a.splice(a.indexOf(l),1)}));for(a.map(function(l){return{g:l._dur||l._delay||l._sat&&!l._sat.vars.immediateRender?l.globalTime(0):-1/0,t:l}}).sort(function(l,h){return h.g-l.g||-1/0}).forEach(function(l){return l.t.revert(n)}),u=s.data.length;u--;)c=s.data[u],c instanceof re?c.data!=="nested"&&(c.scrollTrigger&&c.scrollTrigger.revert(),c.kill()):!(c instanceof K)&&c.revert&&c.revert(n);s._r.forEach(function(l){return l(n,s)}),s.isReverted=!0}():this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),r)for(var i=je.length;i--;)je[i].id===this.id&&je.splice(i,1)},e.revert=function(n){this.kill(n||{})},o}(),hi=function(){function o(t){this.contexts=[],this.scope=t,W&&W.data.push(this)}var e=o.prototype;return e.add=function(n,r,s){we(n)||(n={matches:n});var i=new So(0,s||this.scope),a=i.conditions={},u,c,l;W&&!i.selector&&(i.selector=W.selector),this.contexts.push(i),r=i.add("onMatch",r),i.queries=n;for(c in n)c==="all"?l=1:(u=Se.matchMedia(n[c]),u&&(je.indexOf(i)<0&&je.push(i),(a[c]=u.matches)&&(l=1),u.addListener?u.addListener(wn):u.addEventListener("change",wn)));return l&&r(i,function(h){return i.add(null,h)}),this},e.revert=function(n){this.kill(n||{})},e.kill=function(n){this.contexts.forEach(function(r){return r.kill(n,!0)})},o}(),Xt={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(function(r){return ao(r)})},timeline:function(e){return new re(e)},getTweensOf:function(e,t){return q.getTweensOf(e,t)},getProperty:function(e,t,n,r){j(e)&&(e=ge(e)[0]);var s=Ke(e||{}).get,i=n?Xr:Kr;return n==="native"&&(n=""),e&&(t?i((le[t]&&le[t].get||s)(e,t,n,r)):function(a,u,c){return i((le[a]&&le[a].get||s)(e,a,u,c))})},quickSetter:function(e,t,n){if(e=ge(e),e.length>1){var r=e.map(function(l){return ue.quickSetter(l,t,n)}),s=r.length;return function(l){for(var h=s;h--;)r[h](l)}}e=e[0]||{};var i=le[t],a=Ke(e),u=a.harness&&(a.harness.aliases||{})[t]||t,c=i?function(l){var h=new i;rt._pt=0,h.init(e,n?l+n:l,rt,0,[e]),h.render(1,h),rt._pt&&Kn(1,rt)}:a.set(e,u);return i?c:function(l){return c(e,u,n?l+n:l,a,1)}},quickTo:function(e,t,n){var r,s=ue.to(e,Ze((r={},r[t]="+=0.1",r.paused=!0,r),n||{})),i=function(u,c,l){return s.resetTo(t,u,c,l)};return i.tween=s,i},isTweening:function(e){return q.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=$e(e.ease,lt.ease)),or(lt,e||{})},config:function(e){return or(he,e||{})},registerEffect:function(e){var t=e.name,n=e.effect,r=e.plugins,s=e.defaults,i=e.extendTimeline;(r||"").split(",").forEach(function(a){return a&&!le[a]&&!_e[a]&&Nt(t+" effect requires "+a+" plugin.")}),sn[t]=function(a,u,c){return n(ge(a),ve(u||{},s),c)},i&&(re.prototype[t]=function(a,u,c){return this.add(sn[t](a,we(u)?u:(c=u)&&{},this),c)})},registerEase:function(e,t){k[e]=$e(t)},parseEase:function(e,t){return arguments.length?$e(e,t):k},getById:function(e){return q.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var n=new re(e),r,s;for(n.smoothChildTiming=oe(e.smoothChildTiming),q.remove(n),n._dp=0,n._time=n._tTime=q._time,r=q._first;r;)s=r._next,(t||!(!r._dur&&r instanceof K&&r.vars.onComplete===r._targets[0]))&&Ce(n,r,r._start-r._delay),r=s;return Ce(q,n,0),n},context:function(e,t){return e?new So(e,t):W},matchMedia:function(e){return new hi(e)},matchMediaRefresh:function(){return je.forEach(function(e){var t=e.conditions,n,r;for(r in t)t[r]&&(t[r]=!1,n=1);n&&e.revert()})||wn()},addEventListener:function(e,t){var n=Wt[e]||(Wt[e]=[]);~n.indexOf(t)||n.push(t)},removeEventListener:function(e,t){var n=Wt[e],r=n&&n.indexOf(t);r>=0&&n.splice(r,1)},utils:{wrap:Ys,wrapYoyo:Vs,distribute:to,random:ro,snap:no,normalize:Hs,getUnit:ee,clamp:zs,splitColor:uo,toArray:ge,selector:Cn,mapRange:so,pipe:Ws,unitize:qs,interpolate:Ks,shuffle:eo},install:Wr,effects:sn,ticker:de,updateRoot:re.updateRoot,plugins:le,globalTimeline:q,core:{PropTween:ie,globals:qr,Tween:K,Timeline:re,Animation:It,getCache:Ke,_removeLinkedListItem:Qt,reverting:function(){return te},context:function(e){return e&&W&&(W.data.push(e),e._ctx=W),W},suppressOverwrites:function(e){return Rn=e}}};se("to,from,fromTo,delayedCall,set,killTweensOf",function(o){return Xt[o]=K[o]});de.add(re.updateRoot);rt=Xt.to({},{duration:0});var _i=function(e,t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n},pi=function(e,t){var n=e._targets,r,s,i;for(r in t)for(s=n.length;s--;)i=e._ptLookup[s][r],i&&(i=i.d)&&(i._pt&&(i=_i(i,r)),i&&i.modifier&&i.modifier(t[r],e,n[s],r))},dn=function(e,t){return{name:e,rawVars:1,init:function(r,s,i){i._onInit=function(a){var u,c;if(j(s)&&(u={},se(s,function(l){return u[l]=1}),s=u),t){u={};for(c in s)u[c]=t(s[c]);s=u}pi(a,s)}}}},ue=Xt.registerPlugin({name:"attr",init:function(e,t,n,r,s){var i,a,u;this.tween=n;for(i in t)u=e.getAttribute(i)||"",a=this.add(e,"setAttribute",(u||0)+"",t[i],r,s,0,0,i),a.op=i,a.b=u,this._props.push(i)},render:function(e,t){for(var n=t._pt;n;)te?n.set(n.t,n.p,n.b,n):n.r(e,n.d),n=n._next}},{name:"endArray",init:function(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n],0,0,0,0,0,1)}},dn("roundProps",En),dn("modifiers"),dn("snap",no))||Xt;K.version=re.version=ue.version="3.12.5";Gr=1;Fn()&&ht();k.Power0;k.Power1;k.Power2;k.Power3;k.Power4;k.Linear;k.Quad;k.Cubic;k.Quart;k.Quint;k.Strong;k.Elastic;k.Back;k.SteppedEase;k.Bounce;k.Sine;k.Expo;k.Circ;/*!
 * CSSPlugin 3.12.5
 * https://gsap.com
 *
 * Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var lr,Re,it,Xn,Ve,dr,$n,mi=function(){return typeof window<"u"},Pe={},Ye=180/Math.PI,at=Math.PI/180,tt=Math.atan2,fr=1e8,jn=/([A-Z])/g,gi=/(left|right|width|margin|padding|x)/i,vi=/[\s,\(]\S/,Ee={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},On=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},yi=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},bi=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},Ti=function(e,t){var n=t.s+t.c*e;t.set(t.t,t.p,~~(n+(n<0?-.5:.5))+t.u,t)},Co=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},Eo=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},xi=function(e,t,n){return e.style[t]=n},Si=function(e,t,n){return e.style.setProperty(t,n)},Ci=function(e,t,n){return e._gsap[t]=n},Ei=function(e,t,n){return e._gsap.scaleX=e._gsap.scaleY=n},Ai=function(e,t,n,r,s){var i=e._gsap;i.scaleX=i.scaleY=n,i.renderTransform(s,i)},wi=function(e,t,n,r,s){var i=e._gsap;i[t]=n,i.renderTransform(s,i)},H="transform",ae=H+"Origin",Oi=function o(e,t){var n=this,r=this.target,s=r.style,i=r._gsap;if(e in Pe&&s){if(this.tfm=this.tfm||{},e!=="transform")e=Ee[e]||e,~e.indexOf(",")?e.split(",").forEach(function(a){return n.tfm[a]=Me(r,a)}):this.tfm[e]=i.x?i[e]:Me(r,e),e===ae&&(this.tfm.zOrigin=i.zOrigin);else return Ee.transform.split(",").forEach(function(a){return o.call(n,a,t)});if(this.props.indexOf(H)>=0)return;i.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(ae,t,"")),e=H}(s||t)&&this.props.push(e,t,s[e])},Ao=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},Ni=function(){var e=this.props,t=this.target,n=t.style,r=t._gsap,s,i;for(s=0;s<e.length;s+=3)e[s+1]?t[e[s]]=e[s+2]:e[s+2]?n[e[s]]=e[s+2]:n.removeProperty(e[s].substr(0,2)==="--"?e[s]:e[s].replace(jn,"-$1").toLowerCase());if(this.tfm){for(i in this.tfm)r[i]=this.tfm[i];r.svg&&(r.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),s=$n(),(!s||!s.isStart)&&!n[H]&&(Ao(n),r.zOrigin&&n[ae]&&(n[ae]+=" "+r.zOrigin+"px",r.zOrigin=0,r.renderTransform()),r.uncache=1)}},wo=function(e,t){var n={target:e,props:[],revert:Ni,save:Oi};return e._gsap||ue.core.getCache(e),t&&t.split(",").forEach(function(r){return n.save(r)}),n},Oo,Nn=function(e,t){var n=Re.createElementNS?Re.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Re.createElement(e);return n&&n.style?n:Re.createElement(e)},Ae=function o(e,t,n){var r=getComputedStyle(e);return r[t]||r.getPropertyValue(t.replace(jn,"-$1").toLowerCase())||r.getPropertyValue(t)||!n&&o(e,_t(t)||t,1)||""},hr="O,Moz,ms,Ms,Webkit".split(","),_t=function(e,t,n){var r=t||Ve,s=r.style,i=5;if(e in s&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);i--&&!(hr[i]+e in s););return i<0?null:(i===3?"ms":i>=0?hr[i]:"")+e},Mn=function(){mi()&&window.document&&(lr=window,Re=lr.document,it=Re.documentElement,Ve=Nn("div")||{style:{}},Nn("div"),H=_t(H),ae=H+"Origin",Ve.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Oo=!!_t("perspective"),$n=ue.core.reverting,Xn=1)},fn=function o(e){var t=Nn("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=this.parentNode,r=this.nextSibling,s=this.style.cssText,i;if(it.appendChild(t),t.appendChild(this),this.style.display="block",e)try{i=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=o}catch{}else this._gsapBBox&&(i=this._gsapBBox());return n&&(r?n.insertBefore(this,r):n.appendChild(this)),it.removeChild(t),this.style.cssText=s,i},_r=function(e,t){for(var n=t.length;n--;)if(e.hasAttribute(t[n]))return e.getAttribute(t[n])},No=function(e){var t;try{t=e.getBBox()}catch{t=fn.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===fn||(t=fn.call(e,!0)),t&&!t.width&&!t.x&&!t.y?{x:+_r(e,["x","cx","x1"])||0,y:+_r(e,["y","cy","y1"])||0,width:0,height:0}:t},Mo=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&No(e))},Qe=function(e,t){if(t){var n=e.style,r;t in Pe&&t!==ae&&(t=H),n.removeProperty?(r=t.substr(0,2),(r==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),n.removeProperty(r==="--"?t:t.replace(jn,"-$1").toLowerCase())):n.removeAttribute(t)}},Be=function(e,t,n,r,s,i){var a=new ie(e._pt,t,n,0,1,i?Eo:Co);return e._pt=a,a.b=r,a.e=s,e._props.push(n),a},pr={deg:1,rad:1,turn:1},Mi={grid:1,flex:1},ze=function o(e,t,n,r){var s=parseFloat(n)||0,i=(n+"").trim().substr((s+"").length)||"px",a=Ve.style,u=gi.test(t),c=e.tagName.toLowerCase()==="svg",l=(c?"client":"offset")+(u?"Width":"Height"),h=100,d=r==="px",f=r==="%",p,_,y,g;if(r===i||!s||pr[r]||pr[i])return s;if(i!=="px"&&!d&&(s=o(e,t,n,"px")),g=e.getCTM&&Mo(e),(f||i==="%")&&(Pe[t]||~t.indexOf("adius")))return p=g?e.getBBox()[u?"width":"height"]:e[l],V(f?s/p*h:s/100*p);if(a[u?"width":"height"]=h+(d?i:r),_=~t.indexOf("adius")||r==="em"&&e.appendChild&&!c?e:e.parentNode,g&&(_=(e.ownerSVGElement||{}).parentNode),(!_||_===Re||!_.appendChild)&&(_=Re.body),y=_._gsap,y&&f&&y.width&&u&&y.time===de.time&&!y.uncache)return V(s/y.width*h);if(f&&(t==="height"||t==="width")){var E=e.style[t];e.style[t]=h+r,p=e[l],E?e.style[t]=E:Qe(e,t)}else(f||i==="%")&&!Mi[Ae(_,"display")]&&(a.position=Ae(e,"position")),_===e&&(a.position="static"),_.appendChild(Ve),p=Ve[l],_.removeChild(Ve),a.position="absolute";return u&&f&&(y=Ke(_),y.time=de.time,y.width=_[l]),V(d?p*s/h:p&&s?h/p*s:0)},Me=function(e,t,n,r){var s;return Xn||Mn(),t in Ee&&t!=="transform"&&(t=Ee[t],~t.indexOf(",")&&(t=t.split(",")[0])),Pe[t]&&t!=="transform"?(s=Rt(e,r),s=t!=="transformOrigin"?s[t]:s.svg?s.origin:jt(Ae(e,ae))+" "+s.zOrigin+"px"):(s=e.style[t],(!s||s==="auto"||r||~(s+"").indexOf("calc("))&&(s=$t[t]&&$t[t](e,t,n)||Ae(e,t)||Yr(e,t)||(t==="opacity"?1:0))),n&&!~(s+"").trim().indexOf(" ")?ze(e,t,s,n)+n:s},Di=function(e,t,n,r){if(!n||n==="none"){var s=_t(t,e,1),i=s&&Ae(e,s,1);i&&i!==n?(t=s,n=i):t==="borderColor"&&(n=Ae(e,"borderTopColor"))}var a=new ie(this._pt,e.style,t,0,1,To),u=0,c=0,l,h,d,f,p,_,y,g,E,x,C,S;if(a.b=n,a.e=r,n+="",r+="",r==="auto"&&(_=e.style[t],e.style[t]=r,r=Ae(e,t)||r,_?e.style[t]=_:Qe(e,t)),l=[n,r],lo(l),n=l[0],r=l[1],d=n.match(nt)||[],S=r.match(nt)||[],S.length){for(;h=nt.exec(r);)y=h[0],E=r.substring(u,h.index),p?p=(p+1)%5:(E.substr(-5)==="rgba("||E.substr(-5)==="hsla(")&&(p=1),y!==(_=d[c++]||"")&&(f=parseFloat(_)||0,C=_.substr((f+"").length),y.charAt(1)==="="&&(y=st(f,y)+C),g=parseFloat(y),x=y.substr((g+"").length),u=nt.lastIndex-x.length,x||(x=x||he.units[t]||C,u===r.length&&(r+=x,a.e+=x)),C!==x&&(f=ze(e,t,_,x)||0),a._pt={_next:a._pt,p:E||c===1?E:",",s:f,c:g-f,m:p&&p<4||t==="zIndex"?Math.round:0});a.c=u<r.length?r.substring(u,r.length):""}else a.r=t==="display"&&r==="none"?Eo:Co;return Ur.test(r)&&(a.e=0),this._pt=a,a},mr={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Pi=function(e){var t=e.split(" "),n=t[0],r=t[1]||"50%";return(n==="top"||n==="bottom"||r==="left"||r==="right")&&(e=n,n=r,r=e),t[0]=mr[n]||n,t[1]=mr[r]||r,t.join(" ")},Ii=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var n=t.t,r=n.style,s=t.u,i=n._gsap,a,u,c;if(s==="all"||s===!0)r.cssText="",u=1;else for(s=s.split(","),c=s.length;--c>-1;)a=s[c],Pe[a]&&(u=1,a=a==="transformOrigin"?ae:H),Qe(n,a);u&&(Qe(n,H),i&&(i.svg&&n.removeAttribute("transform"),Rt(n,1),i.uncache=1,Ao(r)))}},$t={clearProps:function(e,t,n,r,s){if(s.data!=="isFromStart"){var i=e._pt=new ie(e._pt,t,n,0,0,Ii);return i.u=r,i.pr=-10,i.tween=s,e._props.push(n),1}}},kt=[1,0,0,1,0,0],Do={},Po=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},gr=function(e){var t=Ae(e,H);return Po(t)?kt:t.substr(7).match(Lr).map(V)},Zn=function(e,t){var n=e._gsap||Ke(e),r=e.style,s=gr(e),i,a,u,c;return n.svg&&e.getAttribute("transform")?(u=e.transform.baseVal.consolidate().matrix,s=[u.a,u.b,u.c,u.d,u.e,u.f],s.join(",")==="1,0,0,1,0,0"?kt:s):(s===kt&&!e.offsetParent&&e!==it&&!n.svg&&(u=r.display,r.display="block",i=e.parentNode,(!i||!e.offsetParent)&&(c=1,a=e.nextElementSibling,it.appendChild(e)),s=gr(e),u?r.display=u:Qe(e,"display"),c&&(a?i.insertBefore(e,a):i?i.appendChild(e):it.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},Dn=function(e,t,n,r,s,i){var a=e._gsap,u=s||Zn(e,!0),c=a.xOrigin||0,l=a.yOrigin||0,h=a.xOffset||0,d=a.yOffset||0,f=u[0],p=u[1],_=u[2],y=u[3],g=u[4],E=u[5],x=t.split(" "),C=parseFloat(x[0])||0,S=parseFloat(x[1])||0,m,b,v,T;n?u!==kt&&(b=f*y-p*_)&&(v=C*(y/b)+S*(-_/b)+(_*E-y*g)/b,T=C*(-p/b)+S*(f/b)-(f*E-p*g)/b,C=v,S=T):(m=No(e),C=m.x+(~x[0].indexOf("%")?C/100*m.width:C),S=m.y+(~(x[1]||x[0]).indexOf("%")?S/100*m.height:S)),r||r!==!1&&a.smooth?(g=C-c,E=S-l,a.xOffset=h+(g*f+E*_)-g,a.yOffset=d+(g*p+E*y)-E):a.xOffset=a.yOffset=0,a.xOrigin=C,a.yOrigin=S,a.smooth=!!r,a.origin=t,a.originIsAbsolute=!!n,e.style[ae]="0px 0px",i&&(Be(i,a,"xOrigin",c,C),Be(i,a,"yOrigin",l,S),Be(i,a,"xOffset",h,a.xOffset),Be(i,a,"yOffset",d,a.yOffset)),e.setAttribute("data-svg-origin",C+" "+S)},Rt=function(e,t){var n=e._gsap||new po(e);if("x"in n&&!t&&!n.uncache)return n;var r=e.style,s=n.scaleX<0,i="px",a="deg",u=getComputedStyle(e),c=Ae(e,ae)||"0",l,h,d,f,p,_,y,g,E,x,C,S,m,b,v,T,A,w,M,P,F,G,R,z,X,Te,Oe,Ie,xe,Z,Q,ce;return l=h=d=_=y=g=E=x=C=0,f=p=1,n.svg=!!(e.getCTM&&Mo(e)),u.translate&&((u.translate!=="none"||u.scale!=="none"||u.rotate!=="none")&&(r[H]=(u.translate!=="none"?"translate3d("+(u.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(u.rotate!=="none"?"rotate("+u.rotate+") ":"")+(u.scale!=="none"?"scale("+u.scale.split(" ").join(",")+") ":"")+(u[H]!=="none"?u[H]:"")),r.scale=r.rotate=r.translate="none"),b=Zn(e,n.svg),n.svg&&(n.uncache?(X=e.getBBox(),c=n.xOrigin-X.x+"px "+(n.yOrigin-X.y)+"px",z=""):z=!t&&e.getAttribute("data-svg-origin"),Dn(e,z||c,!!z||n.originIsAbsolute,n.smooth!==!1,b)),S=n.xOrigin||0,m=n.yOrigin||0,b!==kt&&(w=b[0],M=b[1],P=b[2],F=b[3],l=G=b[4],h=R=b[5],b.length===6?(f=Math.sqrt(w*w+M*M),p=Math.sqrt(F*F+P*P),_=w||M?tt(M,w)*Ye:0,E=P||F?tt(P,F)*Ye+_:0,E&&(p*=Math.abs(Math.cos(E*at))),n.svg&&(l-=S-(S*w+m*P),h-=m-(S*M+m*F))):(ce=b[6],Z=b[7],Oe=b[8],Ie=b[9],xe=b[10],Q=b[11],l=b[12],h=b[13],d=b[14],v=tt(ce,xe),y=v*Ye,v&&(T=Math.cos(-v),A=Math.sin(-v),z=G*T+Oe*A,X=R*T+Ie*A,Te=ce*T+xe*A,Oe=G*-A+Oe*T,Ie=R*-A+Ie*T,xe=ce*-A+xe*T,Q=Z*-A+Q*T,G=z,R=X,ce=Te),v=tt(-P,xe),g=v*Ye,v&&(T=Math.cos(-v),A=Math.sin(-v),z=w*T-Oe*A,X=M*T-Ie*A,Te=P*T-xe*A,Q=F*A+Q*T,w=z,M=X,P=Te),v=tt(M,w),_=v*Ye,v&&(T=Math.cos(v),A=Math.sin(v),z=w*T+M*A,X=G*T+R*A,M=M*T-w*A,R=R*T-G*A,w=z,G=X),y&&Math.abs(y)+Math.abs(_)>359.9&&(y=_=0,g=180-g),f=V(Math.sqrt(w*w+M*M+P*P)),p=V(Math.sqrt(R*R+ce*ce)),v=tt(G,R),E=Math.abs(v)>2e-4?v*Ye:0,C=Q?1/(Q<0?-Q:Q):0),n.svg&&(z=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!Po(Ae(e,H)),z&&e.setAttribute("transform",z))),Math.abs(E)>90&&Math.abs(E)<270&&(s?(f*=-1,E+=_<=0?180:-180,_+=_<=0?180:-180):(p*=-1,E+=E<=0?180:-180)),t=t||n.uncache,n.x=l-((n.xPercent=l&&(!t&&n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-l)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+i,n.y=h-((n.yPercent=h&&(!t&&n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-h)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+i,n.z=d+i,n.scaleX=V(f),n.scaleY=V(p),n.rotation=V(_)+a,n.rotationX=V(y)+a,n.rotationY=V(g)+a,n.skewX=E+a,n.skewY=x+a,n.transformPerspective=C+i,(n.zOrigin=parseFloat(c.split(" ")[2])||!t&&n.zOrigin||0)&&(r[ae]=jt(c)),n.xOffset=n.yOffset=0,n.force3D=he.force3D,n.renderTransform=n.svg?Ri:Oo?Io:ki,n.uncache=0,n},jt=function(e){return(e=e.split(" "))[0]+" "+e[1]},hn=function(e,t,n){var r=ee(t);return V(parseFloat(t)+parseFloat(ze(e,"x",n+"px",r)))+r},ki=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,Io(e,t)},qe="0deg",bt="0px",He=") ",Io=function(e,t){var n=t||this,r=n.xPercent,s=n.yPercent,i=n.x,a=n.y,u=n.z,c=n.rotation,l=n.rotationY,h=n.rotationX,d=n.skewX,f=n.skewY,p=n.scaleX,_=n.scaleY,y=n.transformPerspective,g=n.force3D,E=n.target,x=n.zOrigin,C="",S=g==="auto"&&e&&e!==1||g===!0;if(x&&(h!==qe||l!==qe)){var m=parseFloat(l)*at,b=Math.sin(m),v=Math.cos(m),T;m=parseFloat(h)*at,T=Math.cos(m),i=hn(E,i,b*T*-x),a=hn(E,a,-Math.sin(m)*-x),u=hn(E,u,v*T*-x+x)}y!==bt&&(C+="perspective("+y+He),(r||s)&&(C+="translate("+r+"%, "+s+"%) "),(S||i!==bt||a!==bt||u!==bt)&&(C+=u!==bt||S?"translate3d("+i+", "+a+", "+u+") ":"translate("+i+", "+a+He),c!==qe&&(C+="rotate("+c+He),l!==qe&&(C+="rotateY("+l+He),h!==qe&&(C+="rotateX("+h+He),(d!==qe||f!==qe)&&(C+="skew("+d+", "+f+He),(p!==1||_!==1)&&(C+="scale("+p+", "+_+He),E.style[H]=C||"translate(0, 0)"},Ri=function(e,t){var n=t||this,r=n.xPercent,s=n.yPercent,i=n.x,a=n.y,u=n.rotation,c=n.skewX,l=n.skewY,h=n.scaleX,d=n.scaleY,f=n.target,p=n.xOrigin,_=n.yOrigin,y=n.xOffset,g=n.yOffset,E=n.forceCSS,x=parseFloat(i),C=parseFloat(a),S,m,b,v,T;u=parseFloat(u),c=parseFloat(c),l=parseFloat(l),l&&(l=parseFloat(l),c+=l,u+=l),u||c?(u*=at,c*=at,S=Math.cos(u)*h,m=Math.sin(u)*h,b=Math.sin(u-c)*-d,v=Math.cos(u-c)*d,c&&(l*=at,T=Math.tan(c-l),T=Math.sqrt(1+T*T),b*=T,v*=T,l&&(T=Math.tan(l),T=Math.sqrt(1+T*T),S*=T,m*=T)),S=V(S),m=V(m),b=V(b),v=V(v)):(S=h,v=d,m=b=0),(x&&!~(i+"").indexOf("px")||C&&!~(a+"").indexOf("px"))&&(x=ze(f,"x",i,"px"),C=ze(f,"y",a,"px")),(p||_||y||g)&&(x=V(x+p-(p*S+_*b)+y),C=V(C+_-(p*m+_*v)+g)),(r||s)&&(T=f.getBBox(),x=V(x+r/100*T.width),C=V(C+s/100*T.height)),T="matrix("+S+","+m+","+b+","+v+","+x+","+C+")",f.setAttribute("transform",T),E&&(f.style[H]=T)},Bi=function(e,t,n,r,s){var i=360,a=j(s),u=parseFloat(s)*(a&&~s.indexOf("rad")?Ye:1),c=u-r,l=r+c+"deg",h,d;return a&&(h=s.split("_")[1],h==="short"&&(c%=i,c!==c%(i/2)&&(c+=c<0?i:-i)),h==="cw"&&c<0?c=(c+i*fr)%i-~~(c/i)*i:h==="ccw"&&c>0&&(c=(c-i*fr)%i-~~(c/i)*i)),e._pt=d=new ie(e._pt,t,n,r,c,yi),d.e=l,d.u="deg",e._props.push(n),d},vr=function(e,t){for(var n in t)e[n]=t[n];return e},Fi=function(e,t,n){var r=vr({},n._gsap),s="perspective,force3D,transformOrigin,svgOrigin",i=n.style,a,u,c,l,h,d,f,p;r.svg?(c=n.getAttribute("transform"),n.setAttribute("transform",""),i[H]=t,a=Rt(n,1),Qe(n,H),n.setAttribute("transform",c)):(c=getComputedStyle(n)[H],i[H]=t,a=Rt(n,1),i[H]=c);for(u in Pe)c=r[u],l=a[u],c!==l&&s.indexOf(u)<0&&(f=ee(c),p=ee(l),h=f!==p?ze(n,u,c,p):parseFloat(c),d=parseFloat(l),e._pt=new ie(e._pt,a,u,h,d-h,On),e._pt.u=p||0,e._props.push(u));vr(a,r)};se("padding,margin,Width,Radius",function(o,e){var t="Top",n="Right",r="Bottom",s="Left",i=(e<3?[t,n,r,s]:[t+s,t+n,r+n,r+s]).map(function(a){return e<2?o+a:"border"+a+o});$t[e>1?"border"+o:o]=function(a,u,c,l,h){var d,f;if(arguments.length<4)return d=i.map(function(p){return Me(a,p,c)}),f=d.join(" "),f.split(d[0]).length===5?d[0]:f;d=(l+"").split(" "),f={},i.forEach(function(p,_){return f[p]=d[_]=d[_]||d[(_-1)/2|0]}),a.init(u,f,h)}});var ko={name:"css",register:Mn,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,n,r,s){var i=this._props,a=e.style,u=n.vars.startAt,c,l,h,d,f,p,_,y,g,E,x,C,S,m,b,v;Xn||Mn(),this.styles=this.styles||wo(e),v=this.styles.props,this.tween=n;for(_ in t)if(_!=="autoRound"&&(l=t[_],!(le[_]&&mo(_,t,n,r,e,s)))){if(f=typeof l,p=$t[_],f==="function"&&(l=l.call(n,r,e,s),f=typeof l),f==="string"&&~l.indexOf("random(")&&(l=Dt(l)),p)p(this,e,_,l,n)&&(b=1);else if(_.substr(0,2)==="--")c=(getComputedStyle(e).getPropertyValue(_)+"").trim(),l+="",Le.lastIndex=0,Le.test(c)||(y=ee(c),g=ee(l)),g?y!==g&&(c=ze(e,_,c,g)+g):y&&(l+=y),this.add(a,"setProperty",c,l,r,s,0,0,_),i.push(_),v.push(_,0,a[_]);else if(f!=="undefined"){if(u&&_ in u?(c=typeof u[_]=="function"?u[_].call(n,r,e,s):u[_],j(c)&&~c.indexOf("random(")&&(c=Dt(c)),ee(c+"")||c==="auto"||(c+=he.units[_]||ee(Me(e,_))||""),(c+"").charAt(1)==="="&&(c=Me(e,_))):c=Me(e,_),d=parseFloat(c),E=f==="string"&&l.charAt(1)==="="&&l.substr(0,2),E&&(l=l.substr(2)),h=parseFloat(l),_ in Ee&&(_==="autoAlpha"&&(d===1&&Me(e,"visibility")==="hidden"&&h&&(d=0),v.push("visibility",0,a.visibility),Be(this,a,"visibility",d?"inherit":"hidden",h?"inherit":"hidden",!h)),_!=="scale"&&_!=="transform"&&(_=Ee[_],~_.indexOf(",")&&(_=_.split(",")[0]))),x=_ in Pe,x){if(this.styles.save(_),C||(S=e._gsap,S.renderTransform&&!t.parseTransform||Rt(e,t.parseTransform),m=t.smoothOrigin!==!1&&S.smooth,C=this._pt=new ie(this._pt,a,H,0,1,S.renderTransform,S,0,-1),C.dep=1),_==="scale")this._pt=new ie(this._pt,S,"scaleY",S.scaleY,(E?st(S.scaleY,E+h):h)-S.scaleY||0,On),this._pt.u=0,i.push("scaleY",_),_+="X";else if(_==="transformOrigin"){v.push(ae,0,a[ae]),l=Pi(l),S.svg?Dn(e,l,0,m,0,this):(g=parseFloat(l.split(" ")[2])||0,g!==S.zOrigin&&Be(this,S,"zOrigin",S.zOrigin,g),Be(this,a,_,jt(c),jt(l)));continue}else if(_==="svgOrigin"){Dn(e,l,1,m,0,this);continue}else if(_ in Do){Bi(this,S,_,d,E?st(d,E+l):l);continue}else if(_==="smoothOrigin"){Be(this,S,"smooth",S.smooth,l);continue}else if(_==="force3D"){S[_]=l;continue}else if(_==="transform"){Fi(this,l,e);continue}}else _ in a||(_=_t(_)||_);if(x||(h||h===0)&&(d||d===0)&&!vi.test(l)&&_ in a)y=(c+"").substr((d+"").length),h||(h=0),g=ee(l)||(_ in he.units?he.units[_]:y),y!==g&&(d=ze(e,_,c,g)),this._pt=new ie(this._pt,x?S:a,_,d,(E?st(d,E+h):h)-d,!x&&(g==="px"||_==="zIndex")&&t.autoRound!==!1?Ti:On),this._pt.u=g||0,y!==g&&g!=="%"&&(this._pt.b=c,this._pt.r=bi);else if(_ in a)Di.call(this,e,_,c,E?E+l:l);else if(_ in e)this.add(e,_,c||e[_],E?E+l:l,r,s);else if(_!=="parseTransform"){Un(_,l);continue}x||(_ in a?v.push(_,0,a[_]):v.push(_,1,c||e[_])),i.push(_)}}b&&xo(this)},render:function(e,t){if(t.tween._time||!$n())for(var n=t._pt;n;)n.r(e,n.d),n=n._next;else t.styles.revert()},get:Me,aliases:Ee,getSetter:function(e,t,n){var r=Ee[t];return r&&r.indexOf(",")<0&&(t=r),t in Pe&&t!==ae&&(e._gsap.x||Me(e,"x"))?n&&dr===n?t==="scale"?Ei:Ci:(dr=n||{})&&(t==="scale"?Ai:wi):e.style&&!Bn(e.style[t])?xi:~t.indexOf("-")?Si:Vn(e,t)},core:{_removeProperty:Qe,_getMatrix:Zn}};ue.utils.checkPrefix=_t;ue.core.getStyleSaver=wo;(function(o,e,t,n){var r=se(o+","+e+","+t,function(s){Pe[s]=1});se(e,function(s){he.units[s]="deg",Do[s]=1}),Ee[r[13]]=o+","+e,se(n,function(s){var i=s.split(":");Ee[i[1]]=r[i[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");se("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(o){he.units[o]="px"});ue.registerPlugin(ko);var mt=ue.registerPlugin(ko)||ue;mt.core.Tween;const Je=500,Li=()=>{const o=new Map,e=new Map,t=async(s,i)=>{i.set(s,0);for(let a=0;a<=Je;a++)setTimeout(()=>{i.set(s,a)},1*a);await new Promise(a=>setTimeout(a,Je)),i.delete(s)};return{animateIn:s=>t(s,e),animateOut:s=>t(s,o),itemsAnimatingIn:e,itemsAnimatingOut:o,isAnimating:s=>e.has(s)||o.has(s)}},{mapRange:Ui}=mt.utils,ye=(o,e)=>Ui(Je*o,Je*e,0,1),pt=(o,e,t)=>t>=o&&t<=e,zi=(o,e)=>{const t=o/1e3;return Math.floor(e*t)},Ft={linear:o=>o,in:o=>o*o,out:o=>o*(2-o),"in-out":o=>o<.5?2*o*o:-1+(4-2*o)*o},Gi={easeFn:"in-out"},Wi=o=>{const{start:e,end:t,numberOfSteps:n,easeFn:r}={...Gi,...o};if(n<1)throw new Error(`numberOfSteps must be greater than 0, got ${n}`);if(!Number.isInteger(n))throw new Error(`numberOfSteps must be an integer, got ${n}`);const s=[],i=typeof r=="string"?Ft[r]:r;for(let a=1;a<=n;a++){const u=a/n,c=i(u),l=Math.round(e.x+(t.x-e.x)*c),h=Math.round(e.y+(t.y-e.y)*c);s.push({x:l,y:h})}return s},qi={durationMs:1e3,frameRate:60},Hi=o=>{const{durationMs:e,frameRate:t}={...qi,...o},n=Wi({...o,numberOfSteps:zi(e,t)});return{coords:n,timePerFrameMs:Math.floor(e/n.length)}},{interpolate:tn}=mt.utils,nn=Ft["in-out"],Yi=o=>e=>{const t=ye(0,1),n=nn(t(o));return{radius:tn(0,e.radius)(n)}},Vi=o=>e=>{const t=ye(0,1),n=nn(t(o));return{radius:tn(e.radius,0)(n)}},Ki=o=>e=>{if(e.textArea===void 0)return e;const t=ye(0,1),n=nn(t(o)),r=tn(0,e.textArea.text.fontSize);return{...e,textArea:{...e.textArea,text:{...e.textArea.text,fontSize:r(n)}}}},Xi=o=>e=>{if(e.textArea===void 0)return e;const t=ye(0,1),n=nn(t(o)),r=tn(e.textArea.text.fontSize,0);return{...e,textArea:{...e.textArea,text:{...e.textArea.text,fontSize:r(n)}}}},$i=o=>e=>Zt({...e,...Ki(o)(e),...Yi(o)(e)}),ji=o=>e=>Zt({...e,...Xi(o)(e),...Vi(o)(e)}),Zi=({controller:o,id:e})=>t=>{const{itemsAnimatingIn:n,itemsAnimatingOut:r}=o,s=n.get(e);if(s!==void 0)return $i(s)(t);const i=r.get(e);return i!==void 0?ji(i)(t):Zt(t)},Qi=(o,e,t)=>{const n=Zi({controller:t,id:o.id}),r=e("nodeColor",o),s=e("nodeBorderColor",o),i=e("nodeSize",o),a=e("nodeBorderWidth",o),u=e("nodeText",o),c=e("nodeTextSize",o),l=e("nodeTextColor",o),h=e("nodeShape",o),d=n({at:{x:o.x,y:o.y},radius:i,color:r,stroke:{color:s,width:a},textArea:{text:{content:u,fontSize:c,fontWeight:"bold",color:l},color:O.TRANSPARENT}}),f=xs({at:{x:o.x-i,y:o.y-i},size:i*2,color:r,stroke:{color:s,width:a},textArea:{text:{content:u,fontSize:c,fontWeight:"bold",color:l},color:O.TRANSPARENT}});return{shape:h==="circle"?d:f,id:o.id,graphType:"node"}},be={IN:{BODY:[0,.75],TEXT_AREA:[.75,1]}},Ji=o=>e=>{const t=e.color,n=e.text.color;if(!t||!n)return e;const r=a=>Nr(a).setAlpha(o).toRgbString(),s=r(t),i=r(n);return{...e,color:s,text:{...e.text,color:i}}},Qn=o=>e=>{if(!e)return;const n=ye(...be.IN.TEXT_AREA)(o);return Ji(n)(e)},Jn=o=>e=>{if(!e)return;const n=1-ye(0,1)(o),r=e.text.color;if(!r)return e;const i=(a=>Nr(a).setAlpha(n).toRgbString())(r);return{...e,text:{...e.text,color:i}}},{interpolate:Pn,normalize:ea}=mt.utils,Ro=Ft["in-out"],ta=o=>e=>{const t=ye(...be.IN.BODY),n=Ro(t(o)),r=Pn(e.start,e.end),s=Pn(0,e.width);return{end:r(n),width:s(n)}},na=o=>e=>{const t=ye(0,1),n=Ro(t(o));return{width:Pn(e.width,0)(n)}},ra=o=>e=>{const t=ea(0,Je,o);return pt(be.IN.BODY[0],be.IN.BODY[1],t)?Ct({...e,...ta(o)(e),textArea:void 0}):pt(be.IN.TEXT_AREA[0],be.IN.TEXT_AREA[1],t)?Ct({...e,textArea:Qn(o)(e.textArea)}):Ct(e)},oa=o=>e=>Ct({...e,...na(o)(e),textArea:Jn(o)(e.textArea)}),sa=({controller:o,id:e})=>t=>{const{itemsAnimatingIn:n,itemsAnimatingOut:r}=o,s=n.get(e);if(s!==void 0)return ra(s)(t);const i=r.get(e);return i!==void 0?oa(i)(t):Ct(t)},{interpolate:Bo,normalize:ia}=mt.utils,Fo=Ft["in-out"],aa=o=>e=>{const t=ye(...be.IN.BODY),n=Fo(t(o));return{width:Bo(0,e.width)(n)}},ua=o=>e=>{const t=ye(0,1),n=Fo(t(o));return{width:Bo(e.width,0)(n)}},ca=o=>e=>{const t=ia(0,Je,o);return pt(be.IN.BODY[0],be.IN.BODY[1],t)?ot({...e,...aa(o)(e),textArea:void 0}):pt(be.IN.TEXT_AREA[0],be.IN.TEXT_AREA[1],t)?ot({...e,textArea:Qn(o)(e.textArea)}):ot(e)},la=o=>e=>ot({...e,...ua(o)(e),textArea:Jn(o)(e.textArea)}),da=({controller:o,id:e})=>t=>{const{itemsAnimatingIn:n,itemsAnimatingOut:r}=o,s=n.get(e);if(s!==void 0)return ca(s)(t);const i=r.get(e);return i!==void 0?la(i)(t):ot(t)},St={IN:{LINE:[0,.25],TURN:[.25,.5],ARROW:[.5,.75],BODY:[0,.75],TEXT_AREA:[.75,1]}},{interpolate:Lo,normalize:fa}=mt.utils,Uo=Ft["in-out"],ha=o=>e=>{const t=ye(...St.IN.BODY),n=Uo(t(o));return{lineWidth:Lo(1e-5,e.lineWidth)(n)}},_a=o=>e=>{const t=ye(0,1),n=Uo(t(o));return{lineWidth:Lo(e.lineWidth,1e-5)(n)}},pa=o=>e=>{const t=fa(0,Je,o);return pt(St.IN.BODY[0],St.IN.BODY[1],t)?Et({...e,...ha(o)(e),textArea:void 0}):pt(St.IN.TEXT_AREA[0],St.IN.TEXT_AREA[1],t)?Et({...e,textArea:Qn(o)(e.textArea)}):Et(e)},ma=o=>e=>Et({...e,..._a(o)(e),textArea:Jn(o)(e.textArea)}),ga=({controller:o,id:e})=>t=>{const{itemsAnimatingIn:n,itemsAnimatingOut:r}=o,s=n.get(e);if(s!==void 0)return pa(s)(t);const i=r.get(e);return i!==void 0?ma(i)(t):Et(t)},yr=2,va=(o,e)=>{const{displayEdgeLabels:t,isGraphDirected:n}=e.settings.value,r={id:o.id,controller:e.animationController},s=sa(r),i=da(r),a=ga(r),[u,c]=pn(o.id,e),h=Mr(u.id,c.id,e).length>1,d=c===u,f=e.getTheme("nodeBorderWidth",u),p=e.getTheme("nodeBorderWidth",c),_=e.getTheme("nodeSize",u),y=e.getTheme("nodeSize",c),g=Math.atan2(c.y-u.y,c.x-u.x),E=p/2+yr,x={x:(y+E)*Math.cos(g),y:(y+E)*Math.sin(g)},C={x:u.x,y:u.y},S={x:c.x-(n?x.x:0),y:c.y-(n?x.y:0)},m=e.getTheme("edgeWidth",o),b=Math.max(m*1.2,7);h&&(C.x+=Math.cos(g+Math.PI/2)*b,C.y+=Math.sin(g+Math.PI/2)*b,S.x+=Math.cos(g+Math.PI/2)*b,S.y+=Math.sin(g+Math.PI/2)*b);const v=Xo(C,e.edges.value.filter(Z=>(Z.from===u.id||Z.to===c.id)&&Z.from!==Z.to).map(Z=>{const[Q,ce]=pn(Z.id,e);return u.id===Q.id?ce:Q}).filter((Z,Q,ce)=>Q===ce.findIndex(Lt=>Lt.x===Z.x&&Lt.y===Z.y))),T=e.getTheme("edgeColor",o),A=e.getTheme("edgeTextColor",o),w=e.getTheme("graphBgColor"),M=e.getTheme("edgeText",o),P=e.getTheme("edgeTextSize",o),F=e.getTheme("edgeTextFontWeight",o),R=t?{color:w,activeColor:w,text:{content:M,color:A,fontSize:P,fontWeight:F}}:void 0,z=(_+f)*$o,X=z-(_+f/2)-yr;if(d)return{shape:a({spacing:m*1.2,at:{x:u.x,y:u.y},upDistance:z,downDistance:X,rotation:v,lineWidth:m,color:T,textArea:R}),id:o.id,graphType:"edge"};const Te=_+f/2+y+p/2,Oe=(u.x-c.x)**2+(u.y-c.y)**2;return Te**2>Oe?void 0:n?{shape:s({start:C,end:S,width:m,textOffsetFromCenter:(_+f/2)/2,color:T,textArea:R}),id:o.id,graphType:"edge"}:{shape:i({start:C,end:S,width:m,color:T,textArea:R}),id:o.id,graphType:"edge"}},er={nodeShape:"circle",nodeSize:35,nodeBorderWidth:8,nodeTextSize:24,nodeAnchorRadius:Math.ceil(Math.sqrt(35)*2),edgeWidth:10,edgeTextSize:20,nodeText:({label:o})=>o,edgeText:({label:o})=>o,edgeTextFontWeight:"bold",linkPreviewWidth:10},ya="rgb(100, 60, 70)",ba={nodeBorderColor:O.BLACK,nodeColor:O.STONE_600,nodeTextColor:O.WHITE,nodeFocusBorderColor:O.RED_700,nodeFocusColor:ya,nodeFocusTextColor:O.WHITE,edgeColor:O.STONE_900,edgeFocusColor:O.RED_700,edgeFocusTextColor:O.WHITE,edgeTextColor:O.WHITE,graphBgColor:O.GRAY_600,graphBgPatternColor:O.WHITE+"15",nodeAnchorColorWhenParentFocused:O.RED_800,nodeAnchorColor:O.GRAY_900,linkPreviewColor:O.BLACK,marqueeSelectionBoxColor:O.WHITE+"15",marqueeSelectionBoxBorderColor:O.WHITE,marqueeEncapsulatedNodeBoxBorderColor:O.RED_700,marqueeEncapsulatedNodeBoxColor:O.RED_700+"20",...er},Ta={nodeColor:O.GRAY_50,nodeBorderColor:O.GRAY_800,nodeFocusBorderColor:O.BLUE_600,nodeFocusColor:O.BLUE_100,nodeTextColor:O.GRAY_900,nodeFocusTextColor:O.GRAY_900,edgeColor:O.GRAY_800,edgeTextColor:O.GRAY_900,edgeFocusColor:O.BLUE_600,edgeFocusTextColor:O.BLACK,graphBgColor:O.GRAY_200,graphBgPatternColor:O.BLACK+"15",nodeAnchorColor:O.BLACK,nodeAnchorColorWhenParentFocused:O.BLUE_900,linkPreviewColor:O.BLACK,marqueeSelectionBoxColor:O.BLUE_300+"15",marqueeSelectionBoxBorderColor:O.BLUE_500,marqueeEncapsulatedNodeBoxBorderColor:O.BLUE_700,marqueeEncapsulatedNodeBoxColor:O.BLUE_700+"05",...er},xa={nodeColor:O.PINK_100,nodeBorderColor:O.PINK_400,nodeFocusBorderColor:O.PURPLE_600,nodeFocusColor:O.PURPLE_200,nodeTextColor:O.PINK_600,nodeFocusTextColor:O.PURPLE_900,edgeColor:O.PINK_600,edgeTextColor:O.PINK_600,edgeFocusColor:O.PURPLE_600,edgeFocusTextColor:O.PURPLE_600,graphBgColor:O.PINK_300,graphBgPatternColor:O.WHITE+"50",nodeAnchorColor:O.PINK_500,nodeAnchorColorWhenParentFocused:O.PURPLE_700,linkPreviewColor:O.PINK_900,marqueeSelectionBoxColor:O.PINK_300+"15",marqueeSelectionBoxBorderColor:O.PINK_500,marqueeEncapsulatedNodeBoxBorderColor:O.PINK_700,marqueeEncapsulatedNodeBoxColor:O.PINK_700+"05",...er},zo={light:Ta,dark:ba,girl:xa},Uu=(o,e)=>({nodeSize:o("nodeSize",e),nodeBorderWidth:o("nodeBorderWidth",e),nodeColor:o("nodeColor",e),nodeBorderColor:o("nodeBorderColor",e),nodeTextSize:o("nodeTextSize",e),nodeTextColor:o("nodeTextColor",e),nodeText:o("nodeText",e),nodeShape:o("nodeShape",e)}),Sa=()=>({nodeSize:[],nodeBorderWidth:[],nodeColor:[],nodeBorderColor:[],nodeFocusColor:[],nodeFocusBorderColor:[],nodeText:[],nodeFocusTextColor:[],nodeTextSize:[],nodeTextColor:[],nodeShape:[],edgeColor:[],edgeWidth:[],edgeText:[],edgeTextSize:[],edgeTextColor:[],edgeFocusTextColor:[],edgeTextFontWeight:[],edgeFocusColor:[],graphBgColor:[],graphBgPatternColor:[],nodeAnchorRadius:[],nodeAnchorColor:[],nodeAnchorColorWhenParentFocused:[],linkPreviewColor:[],linkPreviewWidth:[],marqueeSelectionBoxColor:[],marqueeSelectionBoxBorderColor:[],marqueeEncapsulatedNodeBoxColor:[],marqueeEncapsulatedNodeBoxBorderColor:[]}),Ca=o=>Object.prototype.toString.call(o)==="[object Object]",Go=(o,e)=>{const t={};if(!o)return e;if(!e)return null;const n=Object.keys(o),r=Object.keys(e);for(const s of r)n.includes(s)||(t[s]=e[s]);for(const s of n){if(Ca(o[s])){const i=Go(o[s],e[s]);i&&(t[s]=i);continue}if(Array.isArray(o[s])){JSON.stringify(o[s])!==JSON.stringify(e[s])&&(t[s]=e[s]);continue}else o[s]!==e[s]&&(t[s]=e[s])}return Object.keys(t).length?t:null},In=o=>{const e={...o};for(const t in e)typeof e[t]=="object"&&(e[t]=In(e[t]));return e},Ea=o=>({subscribe:(e,t)=>o[e].add(t),unsubscribe:(e,t)=>o[e].delete(t),emit:(e,...t)=>{for(const n of o[e])n(...t)}}),Aa=()=>({onStructureChange:new Set,onNodeAdded:new Set,onBulkNodeAdded:new Set,onNodeRemoved:new Set,onBulkNodeRemoved:new Set,onNodeMoved:new Set,onBulkNodeMoved:new Set,onEdgeAdded:new Set,onBulkEdgeAdded:new Set,onEdgeRemoved:new Set,onBulkEdgeRemoved:new Set,onEdgeLabelEdited:new Set,onRepaint:new Set,onNodeHoverChange:new Set,onGraphLoaded:new Set,onGraphReset:new Set,onClick:new Set,onMouseDown:new Set,onMouseUp:new Set,onMouseMove:new Set,onDblClick:new Set,onContextMenu:new Set,onKeyDown:new Set,onKeyUp:new Set,onThemeChange:new Set,onSettingsChange:new Set,onUndo:new Set,onRedo:new Set,onFocusChange:new Set,onNodeDragStart:new Set,onNodeDrop:new Set,onNodeAnchorDragStart:new Set,onNodeAnchorDrop:new Set,onGroupDragStart:new Set,onGroupDrop:new Set,onMarqueeBeginSelection:new Set,onMarqueeEndSelection:new Set}),br=o=>o==null,wa=o=>{const e=o.trim().split("/").filter(Boolean);if(e.length!==2)return!1;const[t,n]=e.map(Number);return!(br(t)||br(n))},Oa=o=>{if(!wa(o))return;const e=o.split("/"),[t,n]=e.map(Number);return t/n},Na={displayEdgeLabels:!0,edgeLabelsEditable:!0,edgeInputToLabel:o=>{var n;const e=o.trim();if(!e)return;const t=(n=Oa(e))==null?void 0:n.toFixed(2);return t==="Infinity"?"∞":t==="-Infinity"?"-∞":t===void 0&&isNaN(Number(e))?void 0:t??e},newNodeLabelGetter:null,isGraphDirected:!0},Ma={focusable:!0,focusBlacklist:[]},Da={draggable:!0},Pa={nodeAnchors:!0},Ia={marquee:!0,marqueeSelectableGraphTypes:["node","edge"]},ka={interactive:!0,userAddedEdgeLabel:"1",userAddedEdgeRuleNoSelfLoops:!1,userAddedEdgeRuleOneEdgePerPath:!1},Ra={persistent:!0,persistentStorageKey:"graph",persistentBlacklist:new Set},Ba={shortcuts:!0,shortcutUndo:!0,shortcutRedo:!0,shortcutSelectAll:!0,shortcutDelete:!0,shortcutEscape:!0,shortcutSave:!0},Fa={...Na,...Ma,...Da,...Pa,...Ia,...ka,...Ra,...Ba},Tr=(o,...e)=>typeof o=="function"?o(...e):o,La=(o,e)=>(t,...n)=>{const r=e[t].findLast(i=>{const a=i.value;return Tr(a,...n)!==void 0}),s=(r==null?void 0:r.value)??zo[o.value][t];if(!s)throw new Error(`Theme property "${t}" not found`);return Tr(s,...n)},Ua=(o,e)=>{const t=I(()=>{const r=new Map;for(const s of o.value)r.set(s.id,s);return r}),n=I(()=>{const r=new Map;for(const s of e.value)r.set(s.id,s);return r});return{nodeIdToNodeMap:t,edgeIdToEdgeMap:n}},za=({canvas:o,emit:e})=>{const t=D([]),n=[],r=()=>{var d,f,p,_;if(!o.value)return;const a=o.value.getContext("2d");if(!a)return;a.clearRect(0,0,o.value.width,o.value.height);const u=n.reduce((y,g)=>g(y),[]);t.value=[...u.sort((y,g)=>y.priority-g.priority)];const c=t.value.findLastIndex(y=>y.graphType==="edge"),l=t.value.slice(0,c+1),h=t.value.slice(c+1);for(const y of l)y.shape.drawShape(a);for(const y of l)(f=(d=y.shape).drawTextAreaMatte)==null||f.call(d,a);for(const y of l)(_=(p=y.shape).drawText)==null||_.call(p,a);for(const y of h)y.shape.draw(a);e("onRepaint",a,"loop")},s=setInterval(r,1e3/60);return kn(()=>{clearInterval(s)}),setTimeout(r,1e3),{aggregator:t,updateAggregator:n,getSchemaItemsByCoordinates:a=>t.value.sort((u,c)=>u.priority-c.priority).filter(u=>{var c,l;return u.shape.shapeHitbox(a)||((l=(c=u.shape).textHitbox)==null?void 0:l.call(c,a))})}},Ga={broadcast:!0,focus:!0,history:!0,animate:!1},Wa={broadcast:!0,focus:!1,history:!0,animate:!1},xr={broadcast:!0,history:!0,animate:!1},Sr={broadcast:!0,focus:!1,history:!0,animate:!1},qa={broadcast:!1,focus:!1,history:!1,animate:!0},Cr={broadcast:!0,history:!0,animate:!1},Ha={broadcast:!0},Ya={label:""},Va="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");Array.from({length:999},(o,e)=>(e+1).toString());const Ka=(o,e)=>()=>{let t=o.value.map(({label:a})=>a),n=0,r=0,s;const i=()=>n===0?"":e[(n-1)%e.length];for(;!s;){r>=e.length&&(t=t.slice(e.length),r=0,n++);const u=i()+e[r];t.includes(u)||(s=u),r++}return s},Xa=o=>Ka(o.nodes,Va),$a=({nodes:o,edges:e,nodeMap:t,edgeMap:n,emit:r,settings:s,animationController:i})=>{const a=x=>t.value.get(x),u=x=>n.value.get(x),c=(x,C={})=>{if(x!=null&&x.id&&a(x.id)){console.warn("prevented adding a node with an existing id, this shouldn't happen");return}const S={...Ga,...C},m=s.value.newNodeLabelGetter??Xa({nodes:o}),b={id:x.id??qt(),label:x.label??m(),x:x.x??0,y:x.y??0};return S.animate&&i.animateIn(b.id),o.value.push(b),r("onNodeAdded",b,S),r("onStructureChange"),b},l=(x,C={})=>{if(x.length===0)return;const S={...Wa,...C},m=[];for(const b of x){const v=c(b,{focus:!1,broadcast:!1,history:!1});v&&m.push(v)}m.length!==0&&r("onBulkNodeAdded",m,S)},h=(x,C={})=>{const S={...Sr,...C},{isGraphDirected:m}=s.value,[b,v]=[a(x.from),a(x.to)];if(!b||!v)return;if(m){if(e.value.find(w=>w.from===x.from&&w.to===x.to))return}else if(e.value.find(w=>w.from===x.from&&w.to===x.to||w.from===x.to&&w.to===x.from))return;const T={...Ya,id:qt(),...x};return S.animate&&i.animateIn(T.id),e.value.push(T),r("onEdgeAdded",T,S),r("onStructureChange"),T},d=(x,C={})=>{if(x.length===0)return;const S={...qa,...C},m=[];for(const b of x){const v=h(b,{broadcast:!1,history:!1});v&&m.push(v)}m.length!==0&&r("onBulkEdgeAdded",m,S)},f=(x,C,S={})=>{const m=a(x);if(!m)return;const b={...Ha,...S};m.x=C.x,m.y=C.y,r("onNodeMoved",m,b)},p=(x,C,S={})=>{const m={...Sr,...S},b=u(x);if(!b)return;const v=b.label;b.label=C,r("onEdgeLabelEdited",b,v,m),r("onStructureChange")},_=async(x,C={})=>{const S=a(x);if(!S)return;const m={...xr,...C},b=Dr(S.id,{edges:e,getEdge:u,settings:s}),v=[];for(const T of b){const A=await g(T.id,{broadcast:!1,history:!1,animate:m.animate});A&&v.push(A)}return m.animate&&await i.animateOut(S.id),o.value=o.value.filter(T=>T.id!==S.id),r("onNodeRemoved",S,v,m),r("onStructureChange"),[S,v]},y=async(x,C={})=>{if(x.length===0)return;const S={...xr,...C},m=[],b=[];for(const v of x){const T=await _(v,{broadcast:!1,history:!1,animate:S.animate});if(!T)continue;const[A,w]=T;m.push(A),b.push(...w)}m.length!==0&&r("onBulkNodeRemoved",m,b,S)},g=async(x,C={})=>{const S=u(x);if(!S)return;const m={...Cr,...C};return m.animate&&await i.animateOut(S.id),e.value=e.value.filter(b=>b.id!==S.id),r("onEdgeRemoved",S,m),r("onStructureChange"),S};return{getNode:a,getEdge:u,addNode:c,addEdge:h,moveNode:f,editEdgeLabel:p,removeNode:_,removeEdge:g,bulkAddNode:l,bulkRemoveNode:y,bulkAddEdge:d,bulkRemoveEdge:async(x,C={})=>{if(x.length===0)return;const S={...Cr,...C},m=[];for(const b of x){const v=await g(b,{broadcast:!1,history:!1,animate:S.animate});v&&m.push(v)}if(m.length!==0)return r("onBulkEdgeRemoved",m,S),m}}},ja=({subscribe:o,canvas:e,graphAtMousePosition:t})=>{const n=D(!1),r=D(!1),s=D({node:"grab",edge:"pointer","node-anchor":"grab","encapsulated-node-box":"move"}),i=D(),a=I(()=>!!i.value),u=d=>{i.value=d},c=()=>{i.value=void 0},l=d=>{var p;if(!d)return"default";if(a.value)return((p=i.value)==null?void 0:p.call(i,d))??!1?"pointer":"default";const f=s.value[d.graphType]??"default";return f==="grab"&&n.value?"grabbing":f},h=({items:d})=>{if(!e.value||r.value)return;const f=d.at(-1);e.value.style.cursor=l(f)};return o("onMouseDown",d=>{n.value=!0,h(d)}),o("onMouseUp",d=>{n.value=!1,h(d)}),o("onMouseMove",h),ut(s,()=>{h({items:t.value.items})},{deep:!0}),{graphToCursorMap:s,activateCursorSelectMode:u,deactivateCursorSelectMode:c,graphCursorDisabled:r}},Za=o=>{const e=new Map,t=new Set,n=new Map;return s=>({hold:u=>{if(t.has(`${s}-${u}`))return;const l=e.get(u)??0;l===0&&(n.set(u,o.value[u]),o.value[u]=!1),e.set(u,l+1),t.add(`${s}-${u}`)},release:u=>{if(!t.has(`${s}-${u}`))return;const c=e.get(u)??0;if(c!==0){if(c===1){const l=n.get(u);if(l===void 0)throw new Error("holdState not found");o.value[u]=l,n.delete(u)}e.set(u,c-1),t.delete(`${s}-${u}`)}}})},Qa=(o,e={})=>{const t=D("light"),n=Sa(),r=La(t,n),s=D({...Fa,...e}),i=Za(s),a=Aa(),{subscribe:u,unsubscribe:c,emit:l}=Ea(a),h=D(!0);jo(o,()=>{h.value=!1}),u("onMouseDown",()=>{h.value=!0});const d=Zo(o),f=D([]),p=D([]),_=D({coords:{x:0,y:0},items:[]}),y=ja({canvas:o,subscribe:u,graphAtMousePosition:_}),g=N=>{const L=Pr(o),J=es(N,L);_.value={coords:J,items:b(J)}},E=N=>({..._.value,event:N}),x={click:N=>{N.preventDefault(),l("onClick",E(N))},mousemove:N=>{N.preventDefault(),l("onMouseMove",E(N))},mousedown:N=>{N.preventDefault(),l("onMouseDown",E(N))},mouseup:N=>{N.preventDefault(),l("onMouseUp",E(N))},dblclick:N=>{N.preventDefault(),l("onDblClick",E(N))},contextmenu:N=>{l("onContextMenu",E(N))}},C={keydown:N=>l("onKeyDown",N),keyup:N=>l("onKeyUp",N)},{aggregator:S,updateAggregator:m,getSchemaItemsByCoordinates:b}=za({canvas:o,emit:l}),v=Li(),T=N=>{const L={edges:p,getNode:M,getEdge:P,getTheme:r,settings:s,animationController:v},J=p.value.map(We=>va(We,L)).filter(Boolean).map((We,rn)=>({...We,priority:rn*10})),Yo=f.value.map(We=>Qi(We,r,v)).filter(Boolean).map((We,rn)=>({...We,priority:rn*10+1e3}));return N.push(...J),N.push(...Yo),N};m.push(T),Qo(()=>{if(!o.value)throw new Error("canvas element not found");o.value.addEventListener("mousemove",g);for(const[N,L]of Object.entries(x))o.value.addEventListener(N,L);for(const[N,L]of Object.entries(C))document.addEventListener(N,L)}),Jo(()=>{if(!o.value)throw new Error("Canvas element not found");o.value.removeEventListener("mousemove",g);for(const[N,L]of Object.entries(x))o.value.removeEventListener(N,L);for(const[N,L]of Object.entries(C))document.removeEventListener(N,L)});const{nodeIdToNodeMap:A,edgeIdToEdgeMap:w}=Ua(f,p),{getNode:M,getEdge:P,addNode:F,addEdge:G,moveNode:R,editEdgeLabel:z,removeNode:X,removeEdge:Te,bulkAddNode:Oe,bulkRemoveNode:Ie,bulkAddEdge:xe,bulkRemoveEdge:Z}=$a({nodes:f,edges:p,nodeMap:A,edgeMap:w,emit:l,settings:s,animationController:v}),Q=I(()=>f.value.reduce((N,L,J)=>(N.set(L.id,J),N),new Map)),ce=I(()=>p.value.reduce((N,L,J)=>(N.set(L.id,J),N),new Map)),Lt=(N,L)=>{const J=b({x:N,y:L}).pop();if(J&&J.graphType==="node")return M(J.id)};let gt;u("onMouseMove",({items:N})=>{const L=N.at(-1);if(!L||L.graphType!=="node")return;const J=M(L.id);J!==gt&&(l("onNodeHoverChange",J,gt),gt=J)});const Wo=N=>(gt&&Ir(gt.id,N),N);m.push(Wo);const qo=N=>{f.value=N.nodes,p.value=N.edges,l("onGraphLoaded"),l("onStructureChange")},Ho=()=>{f.value=[],p.value=[],l("onGraphReset"),l("onStructureChange")};ut(t,async(N,L)=>{l("onThemeChange",N,L)});const tr=D(In(s.value));return ut(s,N=>{const L=Go(tr.value,N);L&&(tr.value=In(s.value),l("onSettingsChange",L))},{deep:!0}),{nodes:f,edges:p,nodeIdToIndex:Q,edgeIdToIndex:ce,getNode:M,getEdge:P,addNode:F,addEdge:G,moveNode:R,editEdgeLabel:z,removeNode:X,removeEdge:Te,bulkAddNode:Oe,bulkRemoveNode:Ie,bulkAddEdge:xe,bulkRemoveEdge:Z,getSchemaItemsByCoordinates:b,getNodeByCoordinates:Lt,eventBus:a,subscribe:u,unsubscribe:c,emit:l,updateAggregator:m,aggregator:S,animationController:v,pluginHoldController:i,baseTheme:I(()=>zo[t.value]),themeName:t,getTheme:r,themeMap:n,settings:s,load:qo,reset:Ho,canvas:o,canvasFocused:h,canvasHovered:I(()=>d.value),graphAtMousePosition:_,updateGraphAtMousePosition:g,...y}},Ja="use-marquee-graph",eu={THEME_ID:Ja},tu=(o,e)=>{const t={at:{x:1/0,y:1/0},width:0,height:0};if(o.length<2)return t;let n=1/0,r=1/0,s=-1/0,i=-1/0;for(const a of o){const u=e.getTheme("nodeSize",a),c=e.getTheme("nodeBorderWidth",a),l=u+c/2,{x:h,y:d}=a;n=Math.min(n,h-l),r=Math.min(r,d-l),s=Math.max(s,h+l),i=Math.max(i,d+l)}return n<1/0&&r<1/0&&s>-1/0&&i>-1/0?(t.at.x=n,t.at.y=r,t.width=s-n,t.height=i-r):(t.width=0,t.height=0),t},nu=o=>{const e=D(),t=D(),n=D(),{setTheme:r,removeTheme:s}=kr(o,eu.THEME_ID),i=()=>{r("nodeAnchorColor",O.TRANSPARENT),r("nodeAnchorColorWhenParentFocused",O.TRANSPARENT)},a=()=>{s("nodeAnchorColor"),s("nodeAnchorColorWhenParentFocused")},u=v=>{const{width:T,height:A}=v;return Math.abs(T*A)},c=({items:v,coords:T,event:A})=>{if(A.button!==ct.left)return;const w=v.at(-1);(w==null?void 0:w.graphType)!=="encapsulated-node-box"&&a(),w||f(T)},l=({items:v,coords:T})=>{if(!n.value)return;const A=v.at(-1);if((A==null?void 0:A.graphType)!=="encapsulated-node-box")return;const w=T.x-n.value.x,M=T.y-n.value.y;n.value=T;for(const P of o.focus.focusedNodes.value)o.moveNode(P.id,{x:P.x+w,y:P.y+M});y()},h=({items:v,coords:T,event:A})=>{if(A.button!==ct.left||e.value)return;const w=v.at(-1);(w==null?void 0:w.graphType)==="encapsulated-node-box"&&(n.value=T,o.emit("onGroupDragStart",o.focus.focusedNodes.value,T))},d=()=>{n.value&&(o.emit("onGroupDrop",o.focus.focusedNodes.value,n.value),n.value=void 0)},f=v=>{i(),o.graphCursorDisabled.value=!0,e.value={at:v,width:0,height:0},o.emit("onMarqueeBeginSelection",v)},p=()=>{if(!e.value)return;const v=e.value;e.value=void 0,o.graphCursorDisabled.value=!1,a(),o.emit("onMarqueeEndSelection",v)},_=v=>{if(u(v)<100)return;const A=[];for(const{id:w,shape:M,graphType:P}of o.aggregator.value){const{marqueeSelectableGraphTypes:F}=o.settings.value;if(!F.includes(P))continue;M.efficientHitbox(v)&&A.push(w)}o.focus.set(A)},y=()=>{t.value=tu(o.focus.focusedNodes.value,o)},g=({coords:v})=>{if(!e.value)return;const{x:T,y:A}=v;e.value.width=T-e.value.at.x,e.value.height=A-e.value.at.y,_(e.value)},E=v=>({id:"marquee-box",graphType:"marquee-box",shape:nr({...v,color:o.getTheme("marqueeSelectionBoxColor"),stroke:{color:o.getTheme("marqueeSelectionBoxBorderColor"),width:2}}),priority:1/0}),x=v=>{if(!e.value)return v;const T=E(e.value);return v.push(T),v},C=v=>({id:"encapsulated-node-box",graphType:"encapsulated-node-box",shape:nr({...v,color:o.getTheme("marqueeEncapsulatedNodeBoxColor"),stroke:{color:o.getTheme("marqueeEncapsulatedNodeBoxBorderColor"),width:2}}),priority:1/0}),S=v=>{if(!t.value)return v;const T=C(t.value);return v.push(T),v};o.updateAggregator.push(S),o.updateAggregator.push(x);const m=()=>{o.subscribe("onFocusChange",y),o.subscribe("onMouseDown",c),o.subscribe("onMouseUp",p),o.subscribe("onContextMenu",p),o.subscribe("onMouseMove",g),o.subscribe("onMouseDown",h),o.subscribe("onMouseUp",d),o.subscribe("onMouseMove",l),o.subscribe("onUndo",y),o.subscribe("onRedo",y)},b=()=>{o.unsubscribe("onFocusChange",y),o.unsubscribe("onMouseDown",c),o.unsubscribe("onMouseUp",p),o.unsubscribe("onContextMenu",p),o.unsubscribe("onMouseMove",g),o.unsubscribe("onMouseDown",h),o.unsubscribe("onMouseUp",d),o.unsubscribe("onMouseMove",l),o.unsubscribe("onUndo",y),o.unsubscribe("onRedo",y),e.value&&p()};return o.subscribe("onSettingsChange",v=>{v.marquee===!0?m():v.marquee===!1&&b()}),o.settings.value.marquee&&m(),{updateEncapsulatedNodeBox:y}},ru=o=>{const e=D(),{hold:t,release:n}=o.pluginHoldController("node-drag"),r=({items:c,coords:l,event:h})=>{if(h.button!==ct.left)return;const d=c.at(-1);if(!d||d.graphType!=="node")return;t("nodeAnchors");const f=o.getNode(d.id);f&&(e.value={node:f,coords:l},o.emit("onNodeDragStart",f))},s=()=>{e.value&&(o.emit("onNodeDrop",e.value.node),n("nodeAnchors"),o.nodeAnchors.setParentNode(e.value.node.id),e.value=void 0)},i=({coords:c})=>{if(!e.value)return;const{node:l,coords:h}=e.value,d=c.x-h.x,f=c.y-h.y;o.moveNode(l.id,{x:l.x+d,y:l.y+f}),e.value.coords=c},a=()=>{o.subscribe("onMouseDown",r),o.subscribe("onMouseUp",s),o.subscribe("onMouseMove",i),o.graphToCursorMap.value.node="grab"},u=()=>{o.unsubscribe("onMouseDown",r),o.unsubscribe("onMouseUp",s),o.unsubscribe("onMouseMove",i),o.graphToCursorMap.value.node="pointer",e.value&&s()};return o.subscribe("onSettingsChange",c=>{c.draggable===!1?u():c.draggable===!0&&a()}),o.settings.value.draggable&&a(),o.settings.value.draggable||u(),{currentlyDraggingNode:I(()=>{var c;return(c=e.value)==null?void 0:c.node})}},ou=o=>{const e=D(),t=D(),n=m=>{if(o.settings.value.nodeAnchors===!1)return;const b=o.getNode(m);if(!b)throw new Error("node not found");o.animationController.isAnimating(b.id)||(e.value=b,c(b))},r=()=>{e.value=void 0,t.value=void 0},s=D(),i=({items:m})=>{const b=m.at(-1);if(!b)return s.value=void 0;s.value=b.id},a=m=>{var M;const{getTheme:b}=o,v=b("nodeAnchorColor",m),T=b("nodeAnchorColorWhenParentFocused",m),A=b("nodeAnchorRadius",m),w=[];for(const P of u.value){const{x:F,y:G,id:R}=P,z=R===s.value||R===((M=t.value)==null?void 0:M.id),X={at:{x:F,y:G},radius:A,color:z?T:v};t.value&&t.value.direction===P.direction&&(X.at.x=t.value.x,X.at.y=t.value.y);const Te=Zt(X);w.push({id:P.id,graphType:"node-anchor",shape:Te,priority:1/0})}return w},u=D([]),c=m=>{if(!m)return u.value=[];const{getTheme:b}=o,v=b("nodeAnchorRadius",m),T=b("nodeSize",m),A=b("nodeBorderWidth",m),w=T-v/3+A/2;u.value=[{x:m.x,y:m.y-w,direction:"north"},{x:m.x+w,y:m.y,direction:"east"},{x:m.x,y:m.y+w,direction:"south"},{x:m.x-w,y:m.y,direction:"west"}].map(M=>({...M,id:qt()}))},l=({items:m,event:b})=>{if(b.button!==ct.left)return;const v=m.at(-1);if(!v||v.graphType!=="node-anchor")return;const{id:T}=v;return u.value.find(A=>A.id===T)},h=()=>{if(!e.value||!t.value)return;const{x:m,y:b}=t.value,v={x:e.value.x,y:e.value.y},T={x:m,y:b},{getTheme:A}=o,w=A("linkPreviewColor",e.value,t.value),M=A("linkPreviewWidth",e.value,t.value);return{id:"link-preview",graphType:"link-preview",shape:ot({start:v,end:T,color:w,width:M})}},d=({items:m})=>{if(t.value)return;const b=m.at(-1);if(!b)return r();if(b.graphType!=="node")return;const v=o.getNode(b.id);if(!v)throw new Error("node in aggregator but not in graph");const T=o.focus.isFocused(v.id),A=o.focus.focusedNodes.value.length>1;if(T&&A)return r();n(v.id),c(v)},f=m=>{if(!e.value)return;const b=l(m);b&&(t.value=b,o.emit("onNodeAnchorDragStart",e.value,b))},p=({coords:m})=>{if(!t.value)return;const{x:b,y:v}=m;t.value.x=b,t.value.y=v},_=()=>{if(t.value){if(!e.value)throw new Error("active anchor without parent node")}else return;o.emit("onNodeAnchorDrop",e.value,t.value),r()},y=m=>{if(!e.value)return m;const b=a(e.value);for(const v of b)m.push(v);return m},g=m=>{var w;if(!e.value||!t.value)return m;const{id:b}=e.value;Ir(b,m);const v=(w=m.find(M=>M.id===b))==null?void 0:w.priority;if(!v)return m;const T=h();if(!T)return m;const A={...T,priority:v-.1};return m.push(A),m};o.updateAggregator.push(y),o.updateAggregator.push(g);const E=m=>{var b;((b=e.value)==null?void 0:b.id)===m.id&&r()},x=()=>{if(!e.value)return;const m=o.focus.isFocused(e.value.id),b=o.focus.focusedNodes.value.length>1;m&&b&&r()},C=()=>{o.subscribe("onNodeRemoved",E),o.subscribe("onNodeMoved",r),o.subscribe("onNodeDrop",c),o.subscribe("onMouseMove",d),o.subscribe("onMouseMove",p),o.subscribe("onMouseMove",i),o.subscribe("onMouseDown",f),o.subscribe("onMouseUp",_),o.subscribe("onFocusChange",x)},S=()=>{o.unsubscribe("onNodeRemoved",E),o.unsubscribe("onNodeMoved",r),o.unsubscribe("onNodeDrop",c),o.unsubscribe("onMouseMove",d),o.unsubscribe("onMouseMove",p),o.unsubscribe("onMouseMove",i),o.unsubscribe("onMouseDown",f),o.unsubscribe("onMouseUp",_),o.unsubscribe("onFocusChange",x),r()};return o.subscribe("onSettingsChange",m=>{m.nodeAnchors===!0?C():m.nodeAnchors===!1&&S()}),o.settings.value.nodeAnchors&&C(),{currentDraggingAnchor:mn(t),parentNode:mn(e),setParentNode:n}},su=(o=!1)=>{const e=a=>a.key===" "?"Space":a.key.length>1||o?a.key:a.key.toUpperCase(),t=D(""),n=I(()=>{let a;return t.value.split("+").filter(u=>{const c=u===a;return a=u,!c}).join("+")}),r=a=>{t.value.length>0&&(t.value+="+"),t.value+=e(a)},s=()=>{t.value=""},i=a=>n.value===a;return document.addEventListener("keydown",r),document.addEventListener("keyup",s),kn(()=>{document.removeEventListener("keydown",r),document.removeEventListener("keyup",s)}),{isPressed:i,currentKeyString:t}},_n=window.navigator.userAgent.includes("Mac")?"Mac":"Windows",iu=o=>{const{settings:e}=o,t=ts(),n=()=>{if(o.annotation.isActive.value&&o.annotation.undo(),e.value.interactive){const m=o.history.undo();if(!m)return;o.focus.set(m.affectedItems.map(b=>b.data.id))}},r=()=>{if(o.annotation.isActive.value&&o.annotation.redo(),e.value.interactive){const m=o.history.redo();if(!m)return;o.focus.set(m.affectedItems.map(b=>b.data.id))}},s=()=>o.focus.reset(),i=()=>o.focus.all(),a=()=>{e.value.interactive!==!1&&(o.bulkRemoveNode([...o.focus.focusedItemIds.value]),o.bulkRemoveEdge([...o.focus.focusedItemIds.value]))},u=()=>{const m=["Magic Graphs saves for you automagically ⚡","Don’t worry, We’ve been saving while you weren’t looking. 😎","Magic Graphs syncs with your browser automatically. ✨",`Pressing ${_n==="Mac"?"⌘":"Ctrl"} + S again? Okay, We saved it twice... just kidding! 😂`,"Saved automatically — like magic, but better because it’s real. 🌟","Magic Graphs keeps your data saved so you don’t have to worry 😅","Saving? Already done. You’re fast, but we’re faster. 🏃‍♂️💨"];t.add({severity:"secondary",life:3e3,detail:m[Math.floor(Math.random()*m.length)]})},c=(m,b)=>b===!1?()=>{}:typeof b=="function"?b:m,l=I(()=>c(r,e.value.shortcutRedo)),h=I(()=>c(n,e.value.shortcutUndo)),d=I(()=>c(s,e.value.shortcutEscape)),f=I(()=>c(i,e.value.shortcutSelectAll)),p=I(()=>c(a,e.value.shortcutDelete)),_=I(()=>c(u,e.value.shortcutSave)),y=I(()=>({Mac:{"Meta+Z":{name:"Undo",shortcut:h.value},"Shift+Meta+Z":{name:"Redo",shortcut:l.value},"Meta+Shift+Z":{name:"Redo",shortcut:l.value},Backspace:{name:"Delete",shortcut:p.value},"Meta+A":{name:"Select All",shortcut:f.value},Escape:{name:"Deselect",shortcut:d.value},"Meta+S":{name:"Save",shortcut:_.value}},Windows:{"Control+Z":{name:"Undo",shortcut:h.value},"Shift+Control+Z":{name:"Redo",shortcut:l.value},"Control+Shift+Z":{name:"Redo",shortcut:l.value},Backspace:{name:"Delete",shortcut:p.value},"Control+A":{name:"Select All",shortcut:f.value},Escape:{name:"Deselect",shortcut:d.value},"Control+S":{name:"Save",shortcut:_.value}}})),g=I(()=>{const m=y.value[_n],b={};for(const v in m)b[m[v].name]=v;return b}),{isPressed:E}=su(),x=m=>{if(o.canvasFocused.value===!1)return;const b=y.value[_n];for(const v in b)if(E(v)){b[v].shortcut(),m.preventDefault();return}},C=()=>{o.subscribe("onKeyDown",x)},S=()=>{o.unsubscribe("onKeyDown",x)};return e.value.shortcuts&&C(),o.subscribe("onSettingsChange",m=>{m.shortcuts===!0?C():m.shortcuts===!1&&S()}),kn(()=>t.removeAllGroups()),{nameToBindingKeys:g,trigger:{delete:p,selectAll:f,escape:d,redo:l,undo:h}}},au=[O.RED_600,O.BLUE_600,O.GREEN_600,O.YELLOW_600],uu=[3,6,9,12],Er=100,cu=o=>{const e=D([]),t=D([]);return{clearHistory:()=>{e.value=[],t.value=[]},undo:()=>{const u=e.value.pop();if(!u)return;const{action:c,annotations:l}=u,h=l.map(({id:d})=>d);c==="add"?o.value=o.value.filter(({id:d})=>!h.includes(d)):c==="remove"&&o.value.push(...l),t.value.push(u)},redo:()=>{const u=t.value.pop();if(!u)return;const{action:c,annotations:l}=u,h=l.map(({id:d})=>d);c==="add"?o.value.push(...l):c==="remove"&&(o.value=o.value.filter(({id:d})=>!h.includes(d))),e.value.push(u)},addToUndoStack:u=>{e.value.push(u),e.value.length>Er&&e.value.shift()},addToRedoStack:u=>{t.value.push(u),t.value.length>Er&&t.value.shift()},canUndo:I(()=>e.value.length!==0),canRedo:I(()=>t.value.length!==0)}},Ar=10,lu=ns(),du=o=>{const e=D(au[0]),t=D(uu[1]),n=D(!1),r=D(!1),s=D(),i=D(Date.now()),a=D(new Set),u=D([]),c=D([]),l=D(!1),h=D(),d=D(!1),f=cu(c),p=()=>{c.value.length!==0&&(f.addToUndoStack({action:"remove",annotations:c.value}),c.value=[])},_=()=>{s.value||(s.value=setInterval(()=>{Date.now()-i.value>50&&r.value&&u.value.length>=2&&u.value.shift()},50))},y=({coords:v,event:T})=>{T.button===ct.left&&(l.value=!0,h.value=v,u.value=[v])},g=({coords:v})=>{if(!(!l.value||!h.value)&&u.value.length!==0){if(n.value){const T=rs({at:v,radius:Ar})(),A=c.value.filter(w=>yt.scribble(w).efficientHitbox(T));for(const w of A)a.value.add(w.id);return}h.value=v,u.value.push(v),r.value&&u.value.length>10&&u.value.shift(),r.value&&_(),i.value=Date.now()}},E=()=>{if(!l.value)return;if(l.value=!1,h.value=void 0,n.value){const T=c.value.filter(A=>a.value.has(A.id));f.addToUndoStack({action:"remove",annotations:T}),c.value=c.value.filter(A=>!a.value.has(A.id)),a.value.clear();return}if(r.value){s.value=void 0;return}const v={id:qt(),type:"draw",points:u.value,color:e.value,brushWeight:t.value};c.value.push(v),f.addToUndoStack({action:"add",annotations:[v]}),u.value=[]},x=I(()=>n.value||r.value);ut(x,()=>{o.canvas.value&&(o.canvas.value.style.cursor=x.value?"none":"crosshair")});const C=v=>{if(!d.value)return v;if(n.value&&o.canvasHovered.value){const T=yt.circle({at:o.graphAtMousePosition.value.coords,radius:Ar,color:O.TRANSPARENT,stroke:{color:lu.value.contrast,width:2}});v.push({graphType:"annotation",id:T.id,shape:T,priority:5050})}else if(u.value.length>0&&l.value){const T=yt.scribble({type:"draw",points:u.value,color:e.value,brushWeight:t.value});v.push({graphType:"annotation",id:T.id,shape:T,priority:5001})}else if(r.value&&o.canvasHovered.value){const T=yt.circle({at:o.graphAtMousePosition.value.coords,radius:t.value,color:e.value});v.push({graphType:"annotation",id:T.id,shape:T,priority:5050})}for(const T of c.value){const A=a.value.has(T.id);v.push({graphType:"annotation",id:T.id,shape:yt.scribble({...T,color:T.color+(A?"50":"")}),priority:5e3})}return v};return o.updateAggregator.push(C),{clear:p,isActive:d,annotations:c,isLaserPointing:r,isErasing:n,color:e,brushWeight:t,activate:()=>{o.canvas.value&&(d.value=!0,o.settings.value.interactive=!1,o.settings.value.marquee=!1,o.settings.value.focusable=!1,o.settings.value.draggable=!1,o.graphCursorDisabled.value=!0,o.canvas.value.style.cursor="crosshair",o.subscribe("onMouseDown",y),o.subscribe("onMouseMove",g),o.subscribe("onMouseUp",E))},deactivate:()=>{o.canvas.value&&(d.value=!1,n.value=!1,o.settings.value.interactive=!0,o.settings.value.marquee=!0,o.settings.value.focusable=!0,o.settings.value.draggable=!0,o.graphCursorDisabled.value=!1,o.canvas.value.style.cursor="default",o.unsubscribe("onMouseDown",y),o.unsubscribe("onMouseMove",g),o.unsubscribe("onMouseUp",E))},load:v=>{c.value=v},undo:f.undo,redo:f.redo,canUndo:f.canUndo,canRedo:f.canRedo}},fu=["node","edge"],hu="use-focus-graph",_u=o=>{const{setTheme:e}=kr(o,hu),t=D(new Set),n=D(!1),r=g=>{const E=g.filter(m=>!o.settings.value.focusBlacklist.includes(m));if(E.length===t.value.size&&E.every(m=>t.value.has(m)))return;const S=new Set([...t.value]);t.value=new Set(E),o.emit("onFocusChange",t.value,S)},s=g=>{if(t.value.has(g)||o.settings.value.focusBlacklist.includes(g))return;const C=new Set([...t.value]);t.value.add(g),o.emit("onFocusChange",t.value,C)},i=g=>{var x,C;const E=Pr(o.canvas);(C=(x=g.shape).activateTextArea)==null||C.call(x,E,S=>{const m=o.getEdge(g.id);if(!m)throw new Error("textarea only implemented for edges");const b=o.settings.value.edgeInputToLabel(S);b===void 0||m.label===b||o.editEdgeLabel(m.id,b)})},a=()=>{const g=Array.from(t.value),E=g.filter(x=>o.getNode(x)||o.getEdge(x));E.length!==g.length&&r(E)},u=({items:g,coords:E,event:x})=>{var v,T;if(x.button!==ct.left)return;const C=g.at(-1);if(!C)return n.value?void 0:c();if(((T=(v=C.shape).textHitbox)==null?void 0:T.call(v,E))&&o.settings.value.edgeLabelsEditable&&C.graphType==="edge")return c(),i(C);fu.some(A=>A===C.graphType)&&(n.value?s(C.id):r([C.id]))},c=()=>r([]),l=()=>{const g=o.nodes.value.map(x=>x.id),E=o.edges.value.map(x=>x.id);r([...g,...E])},h=({id:g},{focus:E})=>{E&&r([g])},d=g=>t.value.has(g);e("nodeColor",g=>{if(d(g.id))return o.getTheme("nodeFocusColor",g)}),e("nodeBorderColor",g=>{if(d(g.id))return o.getTheme("nodeFocusBorderColor",g)}),e("nodeTextColor",g=>{if(d(g.id))return o.getTheme("nodeFocusTextColor",g)}),e("edgeColor",g=>{if(d(g.id))return o.getTheme("edgeFocusColor",g)}),e("edgeTextColor",g=>{if(d(g.id))return o.getTheme("edgeFocusTextColor",g)}),e("nodeAnchorColor",g=>{if(d(g.id))return o.getTheme("nodeAnchorColorWhenParentFocused",g)});const f=g=>{g.key==="Shift"&&(n.value=!0)},p=g=>{g.key==="Shift"&&(n.value=!1)},_=()=>{o.subscribe("onNodeAdded",h),o.subscribe("onEdgeAdded",h),o.subscribe("onMouseDown",u),o.subscribe("onKeyDown",f),o.subscribe("onKeyUp",p),o.subscribe("onStructureChange",a)},y=()=>{o.unsubscribe("onNodeAdded",h),o.unsubscribe("onEdgeAdded",h),o.unsubscribe("onMouseDown",u),o.unsubscribe("onKeyDown",f),o.unsubscribe("onKeyUp",p),o.unsubscribe("onStructureChange",a),c()};return o.subscribe("onSettingsChange",g=>{g.focusable===!1?y():g.focusable===!0&&_()}),o.settings.value.focusable&&_(),{set:r,reset:c,add:s,all:l,isFocused:d,focusedItemIds:mn(t),focusedNodes:I(()=>o.nodes.value.filter(g=>d(g.id))),focusedEdges:I(()=>o.edges.value.filter(g=>d(g.id)))}},pu={focus:!0},mu={focus:!0},wr=100,Or=3,gu=o=>{const e=D([]),t=D([]),n=d=>{e.value.push(d),e.value.length>wr&&e.value.shift()},r=d=>{t.value.push(d),t.value.length>wr&&t.value.shift()};o.subscribe("onNodeAdded",(d,{history:f})=>{f&&n({action:"add",affectedItems:[{graphType:"node",data:d}]})}),o.subscribe("onBulkNodeAdded",(d,{history:f})=>{f&&n({action:"add",affectedItems:d.map(p=>({graphType:"node",data:p}))})}),o.subscribe("onNodeRemoved",(d,f,{history:p})=>{if(!p)return;const _=f.map(y=>({graphType:"edge",data:y}));n({action:"remove",affectedItems:[{graphType:"node",data:d},..._]})}),o.subscribe("onBulkNodeRemoved",(d,f,{history:p})=>{if(!p)return;const _=d.map(g=>({graphType:"node",data:g})),y=f.map(g=>({graphType:"edge",data:g}));n({action:"remove",affectedItems:[..._,...y]})}),o.subscribe("onEdgeLabelEdited",(d,f,{history:p})=>{p&&n({action:"edit",affectedItems:[{graphType:"edge",data:{id:d.id,from:f,to:d.label}}]})}),o.subscribe("onEdgeAdded",(d,{history:f})=>{f&&n({action:"add",affectedItems:[{graphType:"edge",data:d}]})}),o.subscribe("onBulkEdgeAdded",(d,{history:f})=>{f&&n({action:"add",affectedItems:d.map(p=>({graphType:"edge",data:p}))})}),o.subscribe("onEdgeRemoved",(d,{history:f})=>{f&&n({action:"remove",affectedItems:[{graphType:"edge",data:d}]})}),o.subscribe("onBulkEdgeRemoved",(d,{history:f})=>{f&&n({action:"remove",affectedItems:d.map(p=>({graphType:"edge",data:p}))})});const s=D();o.subscribe("onGroupDragStart",(d,f)=>{s.value={startingCoordinates:f,nodes:d}}),o.subscribe("onGroupDrop",(d,f)=>{if(!s.value)throw new Error("dropped a group we didn't know was being dragged");if(s.value.nodes.length!==d.length)throw new Error("group size mismatch");const p=s.value.startingCoordinates.y-f.y,_=s.value.startingCoordinates.x-f.x;Math.sqrt(p**2+_**2)<Or||n({action:"move",affectedItems:s.value.nodes.map(g=>({graphType:"node",data:{id:g.id,from:{x:g.x+_,y:g.y+p},to:{x:g.x,y:g.y}}}))})});const i=D();o.subscribe("onNodeDragStart",d=>{i.value={id:d.id,from:{x:d.x,y:d.y},to:{x:d.x,y:d.y}}}),o.subscribe("onNodeDrop",d=>{if(!i.value)throw new Error("dropped a node we didn't know was being dragged");if(i.value.id!==d.id)throw new Error("node ID mismatch");i.value.to={x:d.x,y:d.y};const f=i.value.from.y-i.value.to.y,p=i.value.from.x-i.value.to.x;Math.sqrt(f**2+p**2)<Or||n({action:"move",affectedItems:[{graphType:"node",data:i.value}]})});const a=(d={})=>{const f=e.value.pop();if(f)return r(f),c(f),o.emit("onUndo",f,{...pu,...d}),f},u=(d={})=>{const f=t.value.pop();if(f)return n(f),l(f),o.emit("onRedo",f,{...mu,...d}),f},c=d=>{if(d.action==="add")for(const f of d.affectedItems)f.graphType==="node"?o.removeNode(f.data.id,{history:!1}):f.graphType==="edge"&&o.removeEdge(f.data.id,{history:!1});else if(d.action==="remove")for(const f of d.affectedItems)f.graphType==="node"?o.addNode(f.data,{history:!1,focus:!1}):f.graphType==="edge"&&o.addEdge(f.data,{history:!1,focus:!1});else if(d.action==="move"){for(const f of d.affectedItems)if(f.graphType==="node"){const{from:p,id:_}=f.data;o.moveNode(_,{x:p.x,y:p.y})}}else if(d.action==="edit")for(const f of d.affectedItems)o.editEdgeLabel(f.data.id,f.data.from,{history:!1})},l=d=>{if(d.action==="add")for(const f of d.affectedItems)f.graphType==="node"?o.addNode(f.data,{history:!1,focus:!1}):f.graphType==="edge"&&o.addEdge(f.data,{history:!1,focus:!1});else if(d.action==="remove")for(const f of d.affectedItems)f.graphType==="node"?o.removeNode(f.data.id,{history:!1}):f.graphType==="edge"&&o.removeEdge(f.data.id,{history:!1});else if(d.action==="move"){for(const f of d.affectedItems)if(f.graphType==="node"){const{to:p,id:_}=f.data;o.moveNode(_,{x:p.x,y:p.y})}}else if(d.action==="edit")for(const f of d.affectedItems)o.editEdgeLabel(f.data.id,f.data.to,{history:!1})},h=()=>{e.value=[],t.value=[]};return{undo:a,redo:u,canUndo:I(()=>e.value.length>0),canRedo:I(()=>t.value.length>0),undoStack:e,redoStack:t,addToUndoStack:n,addToRedoStack:r,clearHistory:h}},vu=o=>{const e={get:()=>JSON.parse(localStorage.getItem(o.settings.value.persistentStorageKey+"-nodes")??"[]"),set:u=>{const c=u.filter(l=>!o.settings.value.persistentBlacklist.has(l.id));localStorage.setItem(o.settings.value.persistentStorageKey+"-nodes",JSON.stringify(c))}},t={get:()=>JSON.parse(localStorage.getItem(o.settings.value.persistentStorageKey+"-edges")??"[]"),set:u=>{const c=u.filter(l=>!o.settings.value.persistentBlacklist.has(l.id));localStorage.setItem(o.settings.value.persistentStorageKey+"-edges",JSON.stringify(c))}},n=async()=>{await new Promise(u=>setTimeout(u,10)),e.set(o.nodes.value),t.set(o.edges.value)},r=()=>o.load({nodes:e.get(),edges:t.get()}),s=["onStructureChange","onNodeDrop","onGroupDrop"],i=()=>{s.forEach(u=>o.subscribe(u,n))},a=()=>{s.forEach(u=>o.unsubscribe(u,n))};return o.subscribe("onSettingsChange",u=>{if(a(),"persistent"in u&&!u.persistent)return;if("persistent"in u&&u.persistent){r(),i();return}"persistentStorageKey"in u&&r(),i()}),o.settings.value.persistent&&(queueMicrotask(r),i()),{trackGraphState:n}},yu={durationMs:300,broadcast:!0,history:!0,persist:!0},bu=o=>({node:async t=>{const{nodeId:n,endCoords:r,durationMs:s,history:i,broadcast:a,persist:u}={...yu,...t};if(s<100)throw new Error(`durationMs must be greater than 100, got ${s}`);const c=o.getNode(n);if(!c)throw new Error(`Node with id ${n} not found`);const l={x:c.x,y:c.y},{coords:h,timePerFrameMs:d}=Hi({start:l,end:r,durationMs:s});for(let f=0;f<h.length;f++)await new Promise(p=>setTimeout(p,d)),o.moveNode(c.id,h[f],{broadcast:a}),o.focus.isFocused(c.id)&&o.marquee.updateEncapsulatedNodeBox();i&&o.history.addToUndoStack({action:"move",affectedItems:[{graphType:"node",data:{id:t.nodeId,from:l,to:t.endCoords}}]}),u&&await o.persistent.trackGraphState()}}),Tu=o=>{const e=({coords:i,event:a})=>{o.addNode(i)&&setTimeout(()=>o.updateGraphAtMousePosition(a),10)},t=(i,a)=>{if(o.settings.value.userAddedEdgeRuleNoSelfLoops&&i.id===a.id)return!1;if(o.settings.value.userAddedEdgeRuleOneEdgePerPath){const u=o.edges.value.find(h=>h.from===i.id&&h.to===a.id),c=o.edges.value.find(h=>h.from===a.id&&h.to===i.id);if(u||c)return!1}return!0},n=(i,a)=>{const c=o.getSchemaItemsByCoordinates(a).findLast(d=>d.graphType==="node");if(!c)return;const l=o.getNode(c.id);!l||!t(i,l)||o.addEdge({from:i.id,to:l.id,label:o.settings.value.userAddedEdgeLabel})},r=()=>{o.subscribe("onDblClick",e),o.subscribe("onNodeAnchorDrop",n),o.settings.value.nodeAnchors=!0,o.settings.value.edgeLabelsEditable=!0},s=()=>{o.unsubscribe("onDblClick",e),o.unsubscribe("onNodeAnchorDrop",n),o.settings.value.nodeAnchors=!1,o.settings.value.edgeLabelsEditable=!1};o.settings.value.interactive&&r(),o.settings.value.interactive||s(),o.subscribe("onSettingsChange",i=>{i.interactive===!0?r():i.interactive===!1&&s()})},xu=({adjacencyList:o,undirectedAdjacencyList:e})=>{const t=(i,a)=>{const u=new Set,c=[];for(c.push(a);c.length>0;){const l=c.shift();if(!l)break;u.add(l),i[l].forEach(d=>{u.has(d)||c.push(d)})}return u},n=i=>Object.keys(i).every(a=>t(i,a).size===Object.keys(i).length),r=I(()=>n(o.value)),s=I(()=>n(e.value));return{isConnected:r,isWeaklyConnected:s}};class Su{constructor(e){vt(this,"V");vt(this,"adj");vt(this,"Time");vt(this,"SCCs",[]);this.V=e,this.adj=new Array(e).fill(0).map(()=>[]),this.Time=0}addEdge(e,t){this.adj[e].push(t)}SCCUtil(e,t,n,r,s){n[e]=this.Time,t[e]=this.Time,this.Time+=1,r[e]=!0,s.push(e);for(const i of this.adj[e])n[i]===-1?(this.SCCUtil(i,t,n,r,s),t[e]=Math.min(t[e],t[i])):r[i]&&(t[e]=Math.min(t[e],n[i]));if(t[e]===n[e]){let i;const a=[];do i=s.pop(),a.push(i),r[i]=!1;while(i!==e);this.SCCs.push(a)}}SCC(){const e=new Array(this.V).fill(-1),t=new Array(this.V).fill(-1),n=new Array(this.V).fill(!1),r=[];for(let s=0;s<this.V;s++)e[s]===-1&&this.SCCUtil(s,t,e,n,r);return this.SCCs}}const Cu=(o,e)=>{const t=new Su(o.length),n=o.map(s=>s.id);for(const s of e)t.addEdge(n.indexOf(s.from),n.indexOf(s.to));return t.SCC().map(s=>s.map(i=>o[i]))},Eu=o=>{const{nodes:e,edges:t,adjacencyList:n}=o,r=I(()=>Cu(e.value,t.value)),s=I(()=>r.value.reduce((u,c,l)=>{for(const{id:h}of c)u.set(h,l);return u},new Map)),i=I(()=>{const a=r.value,u=n.value,c=s.value;return a.reduce((l,h,d)=>{const f=h.flatMap(p=>u[p.id]??[]).filter(p=>c.get(p)!==d).map(p=>c.get(p));return l.set(d,new Set(f)),l},new Map)});return{stronglyConnectedComponents:r,nodeIdToConnectedComponent:s,componentAdjacencyMap:i}},Au=o=>{const e={},t=[[],[]],n={...o};Object.keys(o).forEach(i=>{n[i]||(n[i]=[])});const r={};Object.entries(n).forEach(([i,a])=>{a.forEach(u=>{r[u]||(r[u]=[]),r[u].push(i)})});const s=i=>{const a=[i];for(e[i]=0,t[0].push(i);a.length>0;){const u=a.shift(),c=e[u],l=c===0?1:0,h=n[u]||[],d=r[u]||[],f=[...new Set([...h,...d])];for(const p of f)if(e[p]===void 0)e[p]=l,t[l].push(p),a.push(p);else if(e[p]===c)return!1}return!0};for(const i of Object.keys(n))if(e[i]===void 0&&!s(i))return;return t},wu=o=>{const e=I(()=>Au(o.value)),t=I(()=>{const r=e.value,s=new Map;if(!r)return s;const[i,a]=r;for(const u of i)s.set(u,0);for(const u of a)s.set(u,1);return s}),n=I(()=>e.value!==void 0);return{bipartitePartition:e,nodeIdToBipartitePartition:t,isBipartite:n}},Ou=o=>{const e=new Set,t=[],n=[],r=new Set,s=(a,u)=>{e.add(a),n.push(a),r.add(a);for(const c of o[a]||[])if(!e.has(c))s(c,a);else if(c!==u&&r.has(c)){const l=n.indexOf(c),d=[...n.slice(l)].sort();t.some(f=>i(f,d))||t.push(d)}n.pop(),r.delete(a)},i=(a,u)=>a.length!==u.length?!1:a.every(c=>u.includes(c));for(const a in o)e.has(a)||s(a,null);return t},Nu=o=>{const{settings:e,stronglyConnectedComponents:t,adjacencyList:n}=o,r=I(()=>{const{isGraphDirected:a}=e.value;return a?t.value.filter(u=>u.length>1).map(u=>u.map(c=>c.id)):Ou(n.value).sort((c,l)=>c.length-l.length)}),s=I(()=>r.value.reduce((a,u,c)=>{for(const l of u)a.set(l,c);return a},new Map)),i=I(()=>r.value.length===0);return{cycles:r,nodeIdToCycle:s,isAcyclic:i}},Mu=o=>{const e=I(()=>{const n=o.edges.value;return n.filter(r=>r.from!==r.to).filter(r=>n.some(s=>r.from===s.to&&r.to===s.from))}),t=I(()=>e.value.length>0);return{bidirectionalEdges:e,hasBidirectionalEdges:t}},Du=o=>({isComplete:I(()=>{const t=o.settings.value.isGraphDirected,n=o.nodes.value.length;return o.edges.value.length===(t?n*(n-1):n*(n-1)/2)})}),Pu=o=>{const e=xu(o),t=Mu(o),n=Eu(o),r=wu(o.adjacencyList),s=Nu({...o,...n});return{...Du(o),...s,...n,...t,...r,...e}},Iu="auto",ku=o=>{const e=os(),t=ss("preferred-theme",Iu);return ut(e,()=>{t.value==="auto"&&(o.themeName.value=e.value?"dark":"light")},{immediate:!0}),ut(t,()=>{t.value==="auto"?o.themeName.value=e.value?"dark":"light":o.themeName.value=t.value},{immediate:!0}),{preferredTheme:t}},Ru=o=>({getParentsOfNode:e=>is(e,o),getAncestorsOfNode:e=>as(e,o),getChildrenOfNode:e=>us(e,o),getDescendantsOfNode:e=>cs(e,o),getConnectedNodes:e=>pn(e,o),getConnectedEdges:e=>Dr(e,o),getInboundEdges:e=>ls(e,o),getOutboundEdges:e=>ds(e,o),isEdgeFlowingIntoNode:(e,t)=>fs(e,t,o),isEdgeFlowingOutOfNode:(e,t)=>hs(e,t,o),getEdgesAlongPath:(e,t)=>Mr(e,t,o),getEdgeWeight:e=>_s(e,o),getEdgeWeightFraction:e=>ps(e,o),getWeightBetweenNodes:(e,t)=>ms(e,t,o)}),zu=(o,e={})=>{const t=Qa(o,e),n=_u(t),r=gu(t),s=nu({...t,focus:n}),i=ou({...t,focus:n}),a=ru({...t,nodeAnchors:i}),u=du(t),c=vu(t),l=ku(t),h=iu({...t,history:r,focus:n,annotation:u}),d=gs(t),f=vs({...t,adjacencyList:d}),p=Pu({...t,...d}),_=bu({...t,history:r,focus:n,marquee:s,persistent:c});Tu(t);const y=Ru(t);return{...t,focus:n,history:r,marquee:s,nodeDrag:a,nodeAnchors:i,annotation:u,persistent:c,animate:_,...l,adjacencyList:d,transitionMatrix:f,characteristics:p,shortcut:h,helpers:y}},Gu=ys({__name:"Graph",props:{graph:{}},emits:["graphRef"],setup(o,{emit:e}){const t=o,n=e,r=u=>n("graphRef",u),s=D(t.graph.getTheme("graphBgPatternColor")),i=D(t.graph.getTheme("graphBgColor")),a=async()=>{s.value=t.graph.getTheme("graphBgPatternColor"),i.value=t.graph.getTheme("graphBgColor")};return t.graph.subscribe("onThemeChange",a),(u,c)=>(Ts(),bs(Ss,{onCanvasRef:r,color:i.value,"pattern-color":s.value},null,8,["color","pattern-color"]))}});export{uu as B,au as C,Va as L,zo as T,Gu as _,tu as a,Ka as b,mt as g,wa as i,Uu as r,zu as u};
