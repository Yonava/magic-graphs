import{z as e,g as R,E as H,L as C,O as k,d as V,Q as G,o as M,c as O,b as y,w as S,e as T,t as b,y as d,A as N,C as W,a as L,S as Y,F as U,T as D,U as $,V as F}from"./index-ChF9fs9q.js";import{d as X,c as q,_ as Q,s as z}from"./ResponsiveCanvas.vue_vue_type_script_setup_true_lang-Xsf6q3bT.js";import{_ as A}from"./Button.vue_vue_type_script_setup_true_lang-DAyKB53e.js";import{_ as I}from"./InputRange.vue_vue_type_script_setup_true_lang-BtaT2pqf.js";const j=e.GREEN_500,J=e.RED_500,K=e.YELLOW_500,Z=(w,c)=>{const p=R(!1),v=R(4),t=R(99),r=R(0),l=H(()=>t.value<1?"00":t.value<10?`0${t.value}`:t.value>99?"":t.value.toString()),o=document.createElement("canvas"),g=()=>{if(!w.value)throw new Error("target canvas not found");const{width:n,height:f}=w.value.getBoundingClientRect();o.width=n,o.height=f,o.style.position="absolute",o.style.top="0",o.style.left="0",o.style.pointerEvents="none";const _=document.getElementById("responsive-canvas-container");if(!_)throw new Error("Canvas container not found");_.appendChild(o)},s=R("precise"),m=()=>{s.value=s.value==="efficient"?"precise":"efficient",u()},x=n=>{const f=s.value==="precise"?c.value.findLast(i=>i.shapeHitbox(n)):c.value.findLast(i=>i.efficientHitbox({at:n,width:1,height:1})),_=c.value.findLast(i=>{var B;return(B=i.textHitbox)==null?void 0:B.call(i,n)}),h={at:n,radius:2,color:j+l.value};_?h.color=K+l.value:f&&(h.color=J+l.value);const E=k(o);q(h).draw(E)},u=async()=>{if(k(o).clearRect(0,0,o.width,o.height),r.value=0,!o||!p.value)return;const{width:f,height:_}=o.getBoundingClientRect();for(let h=0;h<_;h+=v.value)for(let E=0;E<f;E+=v.value)r.value%2e4===0&&await new Promise(i=>setTimeout(i,10)),x({x:E,y:h}),r.value++};C(p,u);const a=X(u,500);return C(v,a),C(t,a),C(c,a),setTimeout(g,500),{heatmapActive:p,heatmapOpacity:t,heatmapResolution:v,runHeatmap:u,runHeatmapDebounced:a,pointsSampled:r,toggleHeatmapMode:m,heatmapMode:s}},ee={key:1,class:"flex items-center gap-3 text-white h-6 mt-1 text-sm font-bold"},te=V({__name:"Toolbar",props:{canvas:{},items:{},draw:{type:Function}},setup(w){const c=w,{items:p,canvas:v}=G(c),{heatmapActive:t,heatmapOpacity:r,heatmapResolution:l,toggleHeatmapMode:o,heatmapMode:g}=Z(v,p),s=H(()=>t.value?"Hide Heatmap":"Show Heatmap"),m=H(()=>g.value==="efficient"?"Precise Heatmap":"Efficient Heatmap"),x=()=>{var a,n;const u=k(v);(n=(a=p.value[2]).activateTextArea)==null||n.call(a,u,f=>{console.log("value",f)})};return(u,a)=>(M(),O(U,null,[y(A,{onClick:u.draw},{default:S(()=>a[3]||(a[3]=[T("Redraw")])),_:1},8,["onClick"]),y(A,{onClick:a[0]||(a[0]=n=>t.value=!d(t))},{default:S(()=>[T(b(s.value),1)]),_:1}),d(t)?(M(),N(A,{key:0,onClick:d(o)},{default:S(()=>[T(b(m.value),1)]),_:1},8,["onClick"])):W("",!0),y(A,{onClick:x},{default:S(()=>a[4]||(a[4]=[T("Micro Control")])),_:1}),d(t)?(M(),O("div",ee,[L("div",null,[L("p",null,"Opacity "+b(d(r)),1),y(I,{modelValue:d(r),"onUpdate:modelValue":a[1]||(a[1]=n=>Y(r)?r.value=n:null),modelModifiers:{number:!0},min:"0",max:"100"},null,8,["modelValue"])]),L("div",null,[L("p",null,"Resolution "+b(d(l)),1),y(I,{modelValue:d(l),"onUpdate:modelValue":a[2]||(a[2]=n=>Y(l)?l.value=n:null),modelModifiers:{number:!0},min:"1",max:"10"},null,8,["modelValue"])])])):W("",!0)],64))}}),ae={class:"h-full w-full"},oe={class:"absolute m-3 flex gap-3 z-50"},re=V({__name:"ShapePlayground",setup(w){const c=R(),p=D(),v=H(()=>p.value?e.GRAY_800:e.GRAY_200),t=R([]),r=H(()=>(p.value?e.GRAY_200:e.GRAY_700)+"15"),l=()=>{const s=k(c);s.clearRect(0,0,s.canvas.width,s.canvas.height);const{uturn:m,cross:x,ellipse:u,square:a,triangle:n,scribble:f,line:_,star:h}=z;t.value.push(u({at:{x:200,y:200},radiusX:50,radiusY:90,color:e.BLUE_500,stroke:{color:e.BLUE_700,width:10,dash:[10,5]},textArea:{text:{content:"dsadsadsadsadsadsadsa",color:e.WHITE,fontSize:10},color:e.TRANSPARENT}})),t.value.push(_({start:{x:1500,y:100},end:{x:1200,y:900},width:10,gradientStops:[{offset:.1,color:e.GREEN_400},{offset:.5,color:e.RED_600},{offset:.9,color:e.BLUE_700}]})),t.value.push(n({pointA:{x:800,y:100},pointB:{x:900,y:200},pointC:{x:700,y:200},color:e.BLUE_500})),t.value.push(m({at:{x:600,y:100},downDistance:50,upDistance:50,lineWidth:10,rotation:Math.PI*.2,spacing:20,gradientStops:[{offset:.1,color:e.GREEN_400},{offset:.5,color:e.RED_600},{offset:.9,color:e.BLUE_700}]}));const E=z.arrow({start:{x:100,y:100},end:{x:600,y:900},color:e.GRAY_900,width:10,arrowHeadSize:()=>({arrowHeadHeight:100,perpLineLength:100}),arrowHeadShape:(i,B,P)=>a({at:{x:i.x-P+18,y:i.y-P},size:P,color:e.GRAY_900,rotation:Math.atan2(-800,-500)+Math.PI/4}),textArea:{color:e.PURPLE_500,activeColor:e.PURPLE_600,text:{content:"5",color:e.WHITE,fontSize:20}}});t.value.push(E),t.value.push(x({at:{x:500,y:300},color:e.SLATE_600,size:150,rotation:Math.PI/.6,borderRadius:10,lineWidth:80})),t.value.push(a({at:{x:600,y:400},size:120,rotation:Math.PI/.7,color:e.GREEN_600,borderRadius:25,stroke:{color:e.YELLOW_200,width:10,dash:[10,5]},textArea:{text:{content:"13",color:e.WHITE,fontSize:20},color:F}})),t.value.push(f({type:"draw",brushWeight:10,points:[{x:534,y:612},{x:535,y:612}]})),t.value.push(...[{at:{x:700,y:300},color:e.YELLOW_500,innerRadius:8,outerRadius:20,points:5,rotation:Math.PI/4},{at:{x:730,y:280},color:e.YELLOW_400,innerRadius:6,outerRadius:15,points:6,rotation:Math.PI/4},{at:{x:670,y:290},color:e.YELLOW_600,innerRadius:4,outerRadius:12,points:7,rotation:Math.PI/6}].map(h)),t.value.forEach(i=>i.draw(s))};document.addEventListener("resize",l),document.addEventListener("keyup",s=>{s.code==="Space"&&l()}),setTimeout(l,100);const{width:o,height:g}=$();return(s,m)=>(M(),O("div",ae,[L("div",oe,[y(te,{canvas:c.value,items:t.value,draw:l},null,8,["canvas","items"])]),y(Q,{onCanvasRef:m[0]||(m[0]=x=>c.value=x),color:v.value,"pattern-color":r.value,"canvas-width":d(o),"canvas-height":d(g)},null,8,["color","pattern-color","canvas-width","canvas-height"])]))}});export{re as default};
