import{u as B}from"./Graph.vue_vue_type_script_setup_true_lang-TUCcCEGm.js";import{b as S,_ as F}from"./GraphProduct.vue_vue_type_script_setup_true_lang-DJB-SZU8.js";import{au as P,d as h,o as d,c as C,a as M,a7 as w,b as u,w as l,F as y,f as I,E as N,A as T,e as v,t as _,W as g,x,av as G,y as r,aw as b,g as L,ax as R}from"./index-BBtyRjRC.js";import{_ as V,u as $}from"./useSCCColorizer-VWFqMmKj.js";import{_ as k}from"./GHoverInfoTop.vue_vue_type_script_setup_true_lang-Dce0Oe19.js";import"./ResponsiveCanvas.vue_vue_type_script_setup_true_lang-CAYqa9Pu.js";import"./Button.vue_vue_type_script_setup_true_lang-8adz9tzV.js";import"./Icon.vue_vue_type_script_setup_true_lang-pasRu3mZ.js";import"./TutorialHint.vue_vue_type_script_setup_true_lang-CQBZy_mF.js";import"./GHoverInfo.vue_vue_type_script_setup_true_lang-B3NADLYi.js";const H={persistentStorageKey:"markov-chains",edgeInputToLabel:o=>{try{const e=new P(o).simplify(.001).toFraction();return e==="0"?void 0:e}catch{}}},D={class:"flex flex-col gap-1"},Y={class:"text-base font-bold"},K={class:"flex flex-row gap-1"},E=h({__name:"MarkovClassNodes",props:{classes:{}},setup(o){return(e,t)=>(d(),C("div",D,[M("p",Y,[w(e.$slots,"default")]),u(S,{secondary:"",class:"p-2 rounded-md flex gap-3"},{default:l(()=>[(d(!0),C(y,null,I(e.classes,s=>(d(),C("div",{key:s[0].id},[M("div",K,[(d(!0),C(y,null,I(s,a=>(d(),C("div",{key:a.id},[u(V,{node:a,size:40},null,8,["node"])]))),128))])]))),128))]),_:1})]))}}),U={class:"flex gap-4 items-center"},O=h({__name:"MarkovChainInfo",props:{markov:{}},setup(o){const e=o,t=n=>n.map(i=>Array.from(i).map(p=>g.value.getNode(p))),s=N(()=>t(e.markov.recurrentClasses.value)),a=N(()=>t(e.markov.transientClasses.value));return(n,i)=>(d(),T(S,{class:"p-3 rounded-lg"},{default:l(()=>[M("div",U,[u(E,{classes:s.value},{default:l(()=>[v(" Recurrent Classes ("+_(s.value.length)+") ",1)]),_:1},8,["classes"]),u(E,{classes:a.value},{default:l(()=>[v(" Transient Classes ("+_(a.value.length)+") ",1)]),_:1},8,["classes"])])]),_:1}))}}),A="markov-chains",W=(o,e)=>{const t=$(o),{setTheme:s,removeTheme:a}=x(o,A),n=c=>{if(o.focus.isFocused(c.id))return o.baseTheme.value.nodeFocusBorderColor;if(e.transientStates.value.has(c.id))return o.baseTheme.value.nodeBorderColor};return{colorize:()=>{t.colorize(),s("nodeBorderColor",n),s("nodeAnchorColor",n)},decolorize:()=>{t.decolorize(),a("nodeBorderColor"),a("nodeAnchorColor")}}},j=(o,e)=>{const{setTheme:t,removeTheme:s}=x(o,A),{recurrentClassPeriods:a,nodeIdToRecurrentClassIndex:n}=e,i=f=>{if(o.focus.isFocused(f.id))return;const m=n.value.get(f.id);if(m!==void 0)return a.value[m].toString()};return{label:()=>{t("nodeText",i)},unlabel:()=>{s("nodeText")}}},q="markov-steady-state-label",J=(o,e)=>{const{setTheme:t,removeTheme:s}=x(o,q),{steadyState:a}=e,n=c=>{if(!a.value||o.focus.isFocused(c.id))return;const f=o.nodeIdToIndex.value.get(c.id);return a.value[f??-1].toFixed(2)};return{label:()=>{t("nodeText",n)},unlabel:()=>{s("nodeText")}}},Q=h({__name:"MarkovChainInfoLabels",props:{markov:{}},setup(o){const e=o,{label:t,unlabel:s}=j(g.value,e.markov),{label:a,unlabel:n}=J(g.value,e.markov),{colorize:i,decolorize:p}=G(g.value,e.markov),{colorize:c,decolorize:f}=$(g.value,"markov-communicating-class");return(m,z)=>(d(),T(S,{secondary:"",class:"p-2 rounded-lg flex flex-wrap gap-2"},{default:l(()=>[u(k,{onMouseenter:r(i),onMouseleave:r(p),tooltip:r(b).valid},{default:l(()=>[v(" Valid? "+_(m.markov.illegalNodeIds.value.size===0?"Yes":"No"),1)]),_:1},8,["onMouseenter","onMouseleave","tooltip"]),u(k,{onMouseenter:r(t),onMouseleave:r(s),tooltip:r(b).periodic},{default:l(()=>[v(" Periodic? "+_(m.markov.isPeriodic.value?"Yes":"No"),1)]),_:1},8,["onMouseenter","onMouseleave","tooltip"]),u(k,{tooltip:r(b).absorbing},{default:l(()=>[v(" Absorbing? "+_(m.markov.isAbsorbing.value?"Yes":"No"),1)]),_:1},8,["tooltip"]),u(k,{onMouseenter:r(c),onMouseleave:r(f),tooltip:r(b).communicatingClasses},{default:l(()=>[v(" Communicating Classes: "+_(m.markov.communicatingClasses.value.length),1)]),_:1},8,["onMouseenter","onMouseleave","tooltip"]),u(k,{onMouseenter:r(a),onMouseleave:r(n),tooltip:r(b).steadyState},{default:l(()=>z[0]||(z[0]=[v(" Steady State (Coming Soon) ")])),_:1},8,["onMouseenter","onMouseleave","tooltip"])]),_:1}))}}),ue=h({__name:"Main",setup(o){const e=L(),t=B(e,H),s=R(t);return W(t,s).colorize(),(a,n)=>(d(),T(F,{onGraphRef:n[0]||(n[0]=i=>e.value=i),graph:r(t)},{"top-center":l(()=>[u(O,{markov:r(s)},null,8,["markov"])]),"bottom-center":l(()=>[u(Q,{markov:r(s)},null,8,["markov"])]),_:1},8,["graph"]))}});export{ue as default};
