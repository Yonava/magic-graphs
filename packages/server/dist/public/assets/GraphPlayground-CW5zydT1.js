import{P as K,R as ee,c as A,g as F,u as te}from"./ResponsiveCanvas.vue_vue_type_script_setup_true_lang-8dwR3Anj.js";import{u as q,g as W,C as oe,a as se,T as le,b as ne,_ as ae,i as re}from"./Graph.vue_vue_type_script_setup_true_lang-DdgI9LHN.js";import{f as L,q as ie,s as k,u as z,d as x,o as r,c as u,a as d,v as w,F as V,t as N,x as de,y as J,z as ue,b as B,A as ce,B as R,C as c,e as y,w as ge,D as ve,E as $,G as me,H as be,I as pe}from"./index-GBEZEBPp.js";import{u as he}from"./useAdjacencyList-c5JYbv7X.js";import{_ as Q,a as Y,b as fe}from"./CollabControls.vue_vue_type_script_setup_true_lang-Vc6atrdj.js";import{_ as _e}from"./InputRange.vue_vue_type_script_setup_true_lang-Aa_-zaEN.js";import{_ as Ee}from"./Button.vue_vue_type_script_setup_true_lang-YJnh9s4C.js";const ye="element-highlight",Ce=1e3,Se=1e3,Le="tutorial",Te=(e,t)=>{const o=L(0),s=ie(t),l=L(!1),n=L(!1);let i,g;const h=a=>{const{event:f,predicate:m}=typeof a.dismiss=="string"?{event:a.dismiss,predicate:()=>!0}:a.dismiss;if(f==="onInterval"){const I="interval"in a?a.interval:Ce;let G=0;const D=setInterval(()=>{m(++G)&&o.value++},I);return()=>clearInterval(D)}const T=(...I)=>{(m==null?void 0:m(...I))&&o.value++};return e.subscribe(f,T),()=>e.unsubscribe(f,T)},C=()=>{var f,m;const a=s.value[o.value];if(a){if((f=a.onInit)==null||f.call(a),(m=a.precondition)!=null&&m.call(a,e)){o.value++;return}a!=null&&a.highlightElement&&(i=Ae(a)),g=h(a.dismiss!=="onTimeout"?a:{hint:a.hint,dismiss:"onInterval",interval:a.after})}},E=(a,f)=>{var T;if(a<0)return o.value=0;if(a>s.value.length)return o.value=s.value.length;const m=s.value[f];(T=m==null?void 0:m.onDismiss)==null||T.call(m),g==null||g(),i==null||i(),C()};k(o,(a,f)=>{n.value||E(a,f)}),k(s,()=>E(o.value,o.value));const _=()=>{o.value=0,l.value=!0},b=()=>{o.value=s.value.length,l.value=!1};return{sequence:s,step:z(()=>o.value),setStep:a=>o.value=a,paused:n,nextStep:()=>o.value++,prevStep:()=>o.value--,stop:b,start:_,isActive:z(()=>l.value),hasBegun:z(()=>o.value>-1),isOver:z(()=>o.value>=s.value.length)}},Ae=e=>{const{highlightElement:t}=e;if(!t)return()=>{};const{id:o,className:s}={id:typeof t=="string"?t:t.id,className:typeof t=="string"||!(t!=null&&t.className)?ye:t.className};if(!o)return()=>{};const l=document.getElementById(o);if(!l)throw new Error(`element with id ${o} not found`);return l.classList.add(s),()=>l.classList.remove(s)},v={reset:"reset",draggable:"draggable",nodeAnchors:"node-anchors",edgeLabels:"edge-labels",edgeLabelsEditable:"edge-labels-editable",userEditable:"user-editable",edgeType:"edge-type",edgeWeight:"edge-weight",nodeSize:"node-size",storageKey:"storage-key",clearLocalStorage:"clear-local-storage",persistentGraphClone:"persistent-graph-clone",testRoom:"test-room",log:"log",bfsColorize:"toggle-bfs-colorize"},Ne=e=>({greeting:{hint:"Welcome to the graph editor tutorial",dismiss:"onClick"},goodbye:{hint:"Have fun editing graphs!",dismiss:"onTimeout",after:3e3},createNode:{hint:"Double click anywhere to add a node",dismiss:"onNodeAdded"},moveNode:{hint:"Drag a node to move it",dismiss:"onNodeDrop"},createEdge:{hint:"Create an edge by dragging an anchor onto another node",dismiss:"onEdgeAdded"},createUndirectedEdge:{hint:"Now create an undirected edge by toggling the edge type",highlightElement:v.edgeType,dismiss:{event:"onEdgeAdded",predicate:t=>t.type==="undirected"}},createSelfDirectedEdge:{hint:'You can even create self directed edges! Make sure you are in "directed" mode and drag an anchor inwards',highlightElement:v.edgeType,dismiss:{event:"onEdgeAdded",predicate:t=>t.to===t.from}},editEdgeWeight:{hint:"Edit the edge weight by clicking on it and typing a number",dismiss:"onEdgeLabelChange"},removeElement:xe(e)}),xe=e=>{let t=!1;const o=()=>t=!0,{setTheme:s,removeAllThemes:l}=q(e,Le);return{hint:"Remove an edge or node by clicking on it and hitting backspace/delete",dismiss:{event:"onInterval",predicate:()=>t},onInit:()=>{t=!1,s("nodeAnchorColor",n=>n.label==="1"?K:ee),e.subscribe("onEdgeRemoved",o),e.subscribe("onNodeRemoved",o)},onDismiss:()=>{l(),e.unsubscribe("onEdgeRemoved",o),e.unsubscribe("onNodeRemoved",o)}}},Re=e=>{const{greeting:t,createNode:o,moveNode:s,createEdge:l,createUndirectedEdge:n,editEdgeWeight:i,removeElement:g,goodbye:h}=Ne(e);return[t,o,s,l,n,i,g,h]},we=e=>({basics:Re(e)}),$e=e=>Te(e,we(e).basics),ke=x({__name:"TutorialControls",props:{tutorial:{}},setup(e){return(t,o)=>(r(),u(V,null,[d("button",{onClick:o[0]||(o[0]=(...s)=>t.tutorial.prevStep&&t.tutorial.prevStep(...s)),class:w("bg-blue-600 text-white px-3 py-1 rounded-lg font-bold")},o[4]||(o[4]=[d("span",{class:"select-none"},"Previous Step",-1)])),d("button",{onClick:o[1]||(o[1]=(...s)=>t.tutorial.nextStep&&t.tutorial.nextStep(...s)),class:w("bg-blue-600 text-white px-3 py-1 rounded-lg font-bold")},o[5]||(o[5]=[d("span",{class:"select-none"},"Next Step",-1)])),d("button",{onClick:o[2]||(o[2]=(...s)=>t.tutorial.stop&&t.tutorial.stop(...s)),class:w("bg-blue-600 text-white px-3 py-1 rounded-lg font-bold")},o[6]||(o[6]=[d("span",{class:"select-none"},"End Tutorial",-1)])),d("button",{onClick:o[3]||(o[3]=(...s)=>t.tutorial.start&&t.tutorial.start(...s)),class:w("bg-blue-600 text-white px-3 py-1 rounded-lg font-bold")},o[7]||(o[7]=[d("span",{class:"select-none"},"Restart Tutorial",-1)]))],64))}}),Ve={class:"text-3xl font-bold"},j=300,Ie=x({__name:"TutorialHint",props:{tutorial:{}},setup(e){const t=L(0),o=z(()=>{var n;return((n=e.tutorial.sequence.value[e.tutorial.step.value])==null?void 0:n.hint)??""}),s=L("");let l;return k(o,()=>{t.value=0,clearTimeout(l),l=setTimeout(()=>{s.value=o.value,t.value=1},j+Se)},{immediate:!0}),(n,i)=>(r(),u("div",{class:w(["transition-opacity",`duration-[${j}ms]`,"select-none","text-center"]),style:de({opacity:t.value})},[d("h1",Ve,N(s.value),1)],6))}}),Ue="product/search-visualizer",ze=(e,t)=>{const o=L({}),s=L(t),{adjacencyList:l}=he(e),n=()=>{if(o.value={},!s.value||!l.value[s.value])return;let i=[s.value];const g=new Set(i);let h=0;for(;i.length>0;){const C=[];for(const E of i){o.value[E]=h;for(const _ of l.value[E])g.has(_)||(g.add(_),C.push(_))}i=[],i.push(...C),h++}};return e.subscribe("onStructureChange",n),J(()=>e.unsubscribe("onStructureChange",n)),k(s,n),{bfsLevelRecord:ue(o),startNode:s}},Be=[A.RED_600,A.ORANGE_600,A.YELLOW_600,A.GREEN_600,A.TEAL_600,A.BLUE_600,A.INDIGO_600,A.PURPLE_600],De=e=>{var E;const t=L(!1),{setTheme:o,removeTheme:s}=q(e,Ue),{bfsLevelRecord:l,startNode:n}=ze(e,(E=e.nodes.value[0])==null?void 0:E.id),i=()=>{if(n.value===void 0){const[b]=e.nodes.value;b&&(n.value=b.id)}if(!e.nodes.value.find(b=>b.id===n.value)){const[b]=e.nodes.value;n.value=b?b.id:void 0}},g=_=>{if(e.isHighlighted(_.id))return;const b=l.value[_.id];if(b===void 0)return;const a=Be;return a[b%a.length]},h=()=>{o("nodeBorderColor",g),o("nodeAnchorColor",g),t.value=!0},C=()=>{s("nodeBorderColor"),s("nodeAnchorColor"),t.value=!1};return k(t,()=>{t.value?h():C()}),e.subscribe("onNodeRemoved",i),e.subscribe("onNodeAdded",i),J(()=>{e.unsubscribe("onNodeRemoved",i),e.unsubscribe("onNodeAdded",i)}),{isColorized:t,colorize:h,decolorize:C,toggleColorize:()=>t.value=!t.value,bfsLevelRecord:l,startNode:n}},H=e=>e.charAt(0).toUpperCase()+e.slice(1),P=e=>{const t=e.replace(/([A-Z])/g," $1");return H(t)},Ge=e=>{const t={label:()=>"Reset",action:()=>e.reset(),color:()=>"red",id:v.reset},o={label:()=>e.settings.value.draggable?"Draggable":"Not Draggable",action:()=>e.settings.value.draggable=!e.settings.value.draggable,color:()=>e.settings.value.draggable?"green":"orange",id:v.draggable},s={label:()=>e.settings.value.nodeAnchors?"Anchors":"No Anchors",action:()=>e.settings.value.nodeAnchors=!e.settings.value.nodeAnchors,color:()=>e.settings.value.nodeAnchors?"green":"orange",id:v.nodeAnchors},l={label:()=>e.settings.value.displayEdgeLabels?"Edge Labels":"No Edge Labels",action:()=>e.settings.value.displayEdgeLabels=!e.settings.value.displayEdgeLabels,color:()=>e.settings.value.displayEdgeLabels?"green":"orange",id:v.edgeLabels},n={label:()=>e.settings.value.edgeLabelsEditable?"Edge Labels Editable":"Edge Labels Not Editable",action:()=>e.settings.value.edgeLabelsEditable=!e.settings.value.edgeLabelsEditable,color:()=>e.settings.value.edgeLabelsEditable?"green":"orange",id:v.edgeLabelsEditable},i={label:()=>e.settings.value.userEditable?"Editable":"Not Editable",action:()=>e.settings.value.userEditable=!e.settings.value.userEditable,color:()=>e.settings.value.userEditable?"green":"orange",id:v.userEditable},g={cond:()=>!!e.settings.value.userEditable,label:()=>H(e.settings.value.userAddedEdgeType),action:()=>{e.settings.value.userAddedEdgeType==="directed"?e.settings.value.userAddedEdgeType="undirected":e.settings.value.userAddedEdgeType="directed"},color:()=>{const{userAddedEdgeType:p}=e.settings.value;return p==="directed"?"blue":"purple"},id:v.edgeType},h={cond:()=>!!e.settings.value.userEditable,label:()=>{const{userAddedEdgeLabel:p}=e.settings.value;return`Change Added Edge Weight (${p})`},action:()=>{e.settings.value.userAddedEdgeLabel=F(1,10).toString()},color:()=>"green",id:v.edgeWeight},C={label:()=>`Change Node Size (${e.theme.value.nodeSize})`,action:()=>e.theme.value.nodeSize=F(20,50),color:()=>"pink",id:v.nodeSize},E={label:()=>{const{persistentStorageKey:p}=e.settings.value;return`Change Storage Key (${p})`},action:()=>{const{persistentStorageKey:p}=e.settings.value,S=p==="graph"?"graph2":"graph";e.settings.value.persistentStorageKey=S},color:()=>"blue",id:v.storageKey},_={label:()=>"Clear Local Storage",action:()=>localStorage.clear(),color:()=>"red",id:v.clearLocalStorage},b={label:()=>"Clone Search Visualizer Graph",action:()=>{e.settings.value.persistentStorageKey="search-visualizer-graph"},color:()=>"amber",id:v.persistentGraphClone},a={label:()=>{const{collaborativeRoomId:p,collaboratorCount:S,inCollaborativeRoom:U}=e,O=`Leave ${p.value} Room (${S.value+1} In Room)`;return U.value?O:"Join Test Room"},action:()=>{const p=W(oe),S=W(se);e.meAsACollaborator.value.name=p,e.meAsACollaborator.value.color=S;const{joinCollaborativeRoom:U,leaveCollaborativeRoom:O,inCollaborativeRoom:M}=e;M.value?O():U("Test")},color:()=>e.inCollaborativeRoom.value?"red":"green",id:v.testRoom},f={label:()=>"Log",action:()=>{console.log(JSON.stringify(e.collaborators.value,null,2)),console.log(JSON.stringify(e.collaboratorCount.value,null,2)),console.log(JSON.stringify(e.meAsACollaborator.value,null,2))},color:()=>"blue",id:v.log},{toggleColorize:m,isColorized:T,startNode:I}=De(e),D={reset:t,clearLocalStorage:_,changeNodeSize:C,toggleEdgeLabelDisplay:l,toggleEdgeLabelsEditable:n,toggleDraggable:o,toggleNodeAnchors:s,toggleUserEditable:i,toggleEdgeType:g,changeEdgeWeight:h,changeStorageKey:E,persistentGraphClone:b,toggleTestRoom:a,bfsColorize:{label:()=>{const p="Colorize",S=e.getNode(I.value),U=`Stop Colorizing (${S==null?void 0:S.label})`;return T.value?U:p},color:()=>T.value?"red":"pink",action:m,id:"toggle-bfs-colorize"},log:f},X=Object.values(D);return{...D,btnArr:X}},Oe=["onClick","id"],Pe={class:"select-none"},He=x({__name:"GraphBtns",props:{btns:{}},setup(e){const t=o=>o?o():!0;return(o,s)=>(r(!0),u(V,null,B(o.btns,l=>(r(),u("div",null,[t(l.cond)?(r(),u("button",{key:0,onClick:ce(l.action,["stop"]),class:w(`bg-${l.color()}-600 text-white px-3 py-1 rounded-lg font-bold`),id:l.id},[d("span",Pe,N(l.label()),1)],10,Oe)):R("",!0)]))),256))}}),Me={class:"px-4 my-2"},Fe={class:"my-2"},We={class:"flex flex-wrap gap-3"},je=["onClick"],qe={class:"my-2"},Je={class:"text-white mb-2"},Qe={class:"font-bold text-lg"},Ye={class:"text-md"},Ze={key:3,class:"text-red-500 font-bold"},Xe=x({__name:"ThemeControls",props:{graph:{}},setup(e){return(t,o)=>(r(),u("div",Me,[o[1]||(o[1]=d("div",null,[d("h2",{class:"text-2xl font-bold text-white"},"Theme Controls")],-1)),d("div",Fe,[o[0]||(o[0]=d("div",{class:"mb-2"},[d("h1",{class:"text-xl font-bold text-white"},"Presets")],-1)),d("div",We,[(r(!0),u(V,null,B(c(le),(s,l)=>(r(),u("div",{onClick:n=>t.graph.theme.value=s},[y(Ee,{color:s.secondaryColor,"text-color":s.secondaryTextColor,style:{width:"120px","text-align":"center"}},{default:ge(()=>[ve(N(c(P)(l)),1)]),_:2},1032,["color","text-color"])],8,je))),256))])]),(r(!0),u(V,null,B(t.graph.theme.value,(s,l)=>(r(),u("div",qe,[d("div",Je,[d("h3",Qe,N(c(P)(l)),1),d("h4",Ye,N(s),1)]),typeof s=="string"&&l.toLowerCase().includes("color")?(r(),$(Q,{key:0,modelValue:t.graph.theme.value[l],"onUpdate:modelValue":n=>t.graph.theme.value[l]=n,style:{width:"100px",height:"30px"}},null,8,["modelValue","onUpdate:modelValue"])):typeof s=="string"?(r(),$(Y,{key:1,modelValue:t.graph.theme.value[l],"onUpdate:modelValue":n=>t.graph.theme.value[l]=n},null,8,["modelValue","onUpdate:modelValue"])):typeof s=="number"?(r(),$(_e,{key:2,modelValue:t.graph.theme.value[l],"onUpdate:modelValue":n=>t.graph.theme.value[l]=n,style:{width:"100%"},min:0,max:100},null,8,["modelValue","onUpdate:modelValue"])):(r(),u("h5",Ze," Not Supported "))]))),256))]))}}),Z=x({__name:"InputCheckbox",props:{modelValue:{type:Boolean},modelModifiers:{}},emits:["update:modelValue"],setup(e){const t=me(e,"modelValue");return(o,s)=>be((r(),u("input",{"onUpdate:modelValue":s[0]||(s[0]=l=>t.value=l),type:"checkbox"},null,512)),[[pe,t.value]])}}),Ke=["onClick"],et={class:"text-white font-bold"},tt=x({__name:"GraphPlaygroundControls",props:{playgroundControls:{}},setup(e){return(t,o)=>(r(!0),u(V,null,B(t.playgroundControls,(s,l)=>(r(),u("div",{class:"flex gap-3 items-center pl-3 py-2 hover:bg-gray-800 cursor-pointer",onClick:n=>t.playgroundControls[l]=!t.playgroundControls[l]},[y(Z,{modelValue:t.playgroundControls[l],"onUpdate:modelValue":n=>t.playgroundControls[l]=n,class:"h-6 w-6 rounded-xl cursor-pointer"},null,8,["modelValue","onUpdate:modelValue"]),d("h2",et,N(c(H)(l)),1)],8,Ke))),256))}}),ot={class:"my-2 px-4"},st={class:"text-white mb-2"},lt={class:"font-bold text-lg"},nt={class:"text-md"},at={key:3,class:"text-red-500 font-bold"},rt=x({__name:"SettingsControls",props:{graph:{}},setup(e){return(t,o)=>(r(!0),u(V,null,B(t.graph.settings.value,(s,l)=>(r(),u("div",ot,[d("div",st,[d("h3",lt,N(c(P)(l)),1),d("h4",nt,N(s),1)]),typeof s=="string"&&l.toLowerCase().includes("color")?(r(),$(Q,{key:0,modelValue:t.graph.settings.value[l],"onUpdate:modelValue":n=>t.graph.settings.value[l]=n,style:{width:"100px",height:"30px"}},null,8,["modelValue","onUpdate:modelValue"])):typeof s=="string"?(r(),$(Y,{key:1,modelValue:t.graph.settings.value[l],"onUpdate:modelValue":n=>t.graph.settings.value[l]=n},null,8,["modelValue","onUpdate:modelValue"])):typeof s=="boolean"?(r(),$(Z,{key:2,modelValue:t.graph.settings.value[l],"onUpdate:modelValue":n=>t.graph.settings.value[l]=n,class:"h-6 w-6 rounded-xl cursor-pointer"},null,8,["modelValue","onUpdate:modelValue"])):(r(),u("h5",at," Not Supported "))]))),256))}}),it={class:"relative w-full h-full"},dt={class:"w-full h-full absolute"},ut={key:0,class:"absolute flex gap-2 m-2 flex flex-wrap w-[85%]"},ct={key:1,class:"absolute bottom-0 right-0 flex gap-2 h-8 m-2"},gt={key:2,class:"bottom-0 absolute flex gap-2 m-2"},vt={key:3,class:"absolute w-full dark:text-white bottom-[10%] grid place-items-center pointer-events-none"},mt={class:"absolute h-3/4 top-[100px] right-0"},bt={key:0,class:"w-[325px] h-1/2 overflow-auto bg-gray-800 bg-opacity-80 rounded-l-xl mb-3"},pt={key:1,class:"w-[325px] h-1/2 overflow-auto bg-gray-800 bg-opacity-80 rounded-l-xl"},ht={class:"absolute w-[150px] top-1/4 overflow-auto bg-gray-800 bg-opacity-80 rounded-r-xl"},Tt=x({__name:"GraphPlayground",setup(e){const t=L(),o=ne(t,{settings:{edgeInputToLabel:i=>{if(re(i))return i;if(!isNaN(Number(i)))return i}}}),s=$e(o),{btnArr:l}=Ge(o),n=te("graph-playground-controls",{tutorial:!0,theme:!0,settings:!0,collab:!0,buttons:!0});return k(n,()=>{n.value.tutorial?s.start():s.stop()},{immediate:!0,deep:!0}),(i,g)=>(r(),u("div",it,[d("div",dt,[y(ae,{onGraphRef:g[0]||(g[0]=h=>t.value=h),graph:c(o)},null,8,["graph"])]),c(n).buttons?(r(),u("div",ut,[y(He,{btns:c(l)},null,8,["btns"])])):R("",!0),c(n).collab?(r(),u("div",ct,[y(fe,{graph:c(o)},null,8,["graph"])])):R("",!0),c(n).tutorial?(r(),u("div",gt,[y(ke,{tutorial:c(s)},null,8,["tutorial"])])):R("",!0),c(n).tutorial?(r(),u("div",vt,[y(Ie,{tutorial:c(s)},null,8,["tutorial"])])):R("",!0),d("div",mt,[c(n).theme?(r(),u("div",bt,[y(Xe,{graph:c(o)},null,8,["graph"])])):R("",!0),c(n).settings?(r(),u("div",pt,[y(rt,{graph:c(o)},null,8,["graph"])])):R("",!0)]),d("div",ht,[y(tt,{playgroundControls:c(n)},null,8,["playgroundControls"])])]))}});export{Tt as default};
