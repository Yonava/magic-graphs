import{D as pe,f as ve,h as te,b as F,c as P,i as me,j as q,k as he,p as J,l as ue,m as _e,n as I,o as Q,q as W,u as xe,_ as ge}from"./useGraphWithCanvas-lwawiqOe.js";import{h as D,$ as de,a0 as oe,J as k,d as A,a1 as ye,D as h,c as g,o as c,F as z,g as j,a as x,e as a,w as s,b as y,t as b,u as l,K as M,a2 as $e,y as G,E as be,a3 as Ce,a4 as O,A as N,P as ae,B as K,C as X,a5 as ke,a6 as ie,a7 as we,a8 as Ne,a9 as Te,m as ce,aa as Ae,ab as Fe,ac as Se,ad as Ie,ae as Z,af as ne,L as se,ag as Me,ah as Ee,ai as Oe,aj as Ve,ak as De,al as ee}from"./index-LcYcizUW.js";import{_ as U,u as Pe}from"./useSCCColorizer-kPH6Ss2Z.js";import{_ as R}from"./Icon.vue_vue_type_script_setup_true_lang-SmHj-dk2.js";import{_ as V}from"./GHoverInfo.vue_vue_type_script_setup_true_lang-BlNoY-sg.js";import{_ as le,g as ze}from"./Button.vue_vue_type_script_setup_true_lang-CP526pjU.js";import{a as Be}from"./getTreeBinaryPos-D7qxc2ig.js";import"./index-D-zIZkGc.js";const Le={persistentStorageKey:"sandbox"},Re=(o,e)=>{const t=D(-1),n=de(e),r=D(!1),f=D(!1);let _,m;const u=i=>{const{event:$,predicate:w}=typeof i.dismiss=="string"?{event:i.dismiss,predicate:()=>!0}:i.dismiss;if($==="onInterval"){const B="interval"in i?i.interval:ve;let T=0;const H=setInterval(()=>{w(++T)&&t.value++},B);return()=>clearInterval(H)}const S=(...B)=>{(w==null?void 0:w(...B))&&t.value++};return o.subscribe($,S),()=>o.unsubscribe($,S)},v=()=>{var $,w;const i=n.value[t.value];if(i){if(($=i.onInit)==null||$.call(i),(w=i.precondition)!=null&&w.call(i,o)){t.value++;return}i!=null&&i.highlightElement&&(_=je(i)),m=u(i.dismiss!=="onTimeout"?i:{hint:i.hint,dismiss:"onInterval",interval:i.after})}},p=(i,$)=>{var S;if(i<0)return t.value=0;if(i>n.value.length)return t.value=n.value.length;const w=n.value[$];(S=w==null?void 0:w.onDismiss)==null||S.call(w),m==null||m(),_==null||_(),v()};oe(t,(i,$)=>{f.value||p(i,$)}),oe(n,()=>p(t.value,t.value));const d=()=>{t.value=0,r.value=!0},C=()=>{t.value=n.value.length,r.value=!1};return{sequence:n,step:k(()=>t.value),setStep:i=>t.value=i,paused:f,nextStep:()=>t.value++,prevStep:()=>t.value--,stop:C,start:d,isActive:k(()=>r.value),hasBegun:k(()=>t.value>-1),isOver:k(()=>t.value>=n.value.length)}},je=o=>{const{highlightElement:e}=o;if(!e)return()=>{};const{id:t,className:n}={id:typeof e=="string"?e:e.id,className:typeof e=="string"||!(e!=null&&e.className)?pe:e.className};if(!t)return()=>{};const r=document.getElementById(t);if(!r)throw new Error(`element with id ${t} not found`);return r.classList.add(n),()=>r.classList.remove(n)},Ge=o=>{if(o.length===0)return"";if(o.length===1)return o[0];const e=o.pop();return o.join(", ")+" and "+e},Ue={class:"flex flex-col gap-4"},Ye={class:"overflow-auto"},He={class:"flex items-center gap-4"},We={class:"leading-[15px]"},qe={key:0,class:"leading-[15px] text-[8px]"},Ke={key:0},Xe={key:0,class:"opacity-60"},Je=A({__name:"AdjacencyListDisplay",setup(o){const{weightedAdjacencyList:e}=ye(h.value),t=r=>{const f=h.value.getNode(r);if(f===void 0)throw new Error("node not found");return f},n=k(()=>h.value.settings.value.displayEdgeLabels);return(r,f)=>(c(),g("div",Ue,[(c(!0),g(z,null,j(l(e),(_,m)=>(c(),g("div",{key:m,class:"flex items-center"},[x("div",null,[a(te,null,{content:s(()=>[a(F,{class:"px-3 py-2 rounded-md"},{default:s(()=>[x("b",null,b(t(m).label),1),f[0]||(f[0]=y(" links to ")),x("b",null,b(l(Ge)(_.map(u=>u.label))||"nothing"),1)]),_:2,__:[0]},1024)]),default:s(()=>[a(U,{node:t(m)},null,8,["node"])]),_:2},1024)]),a(R,{icon:"arrow-right",class:"text-4xl"}),x("div",Ye,[x("div",He,[(c(!0),g(z,null,j(_,u=>(c(),g("div",{key:u.id},[a(te,null,{content:s(()=>[a(F,{class:"p-2 rounded-md"},{default:s(()=>[x("b",null,b(u.label),1),f[2]||(f[2]=y(" links to ")),x("b",null,b(t(m).label),1),n.value?(c(),g("span",Ke,[f[1]||(f[1]=y(" with a cost of ")),x("b",null,b(u.weight),1)])):M("",!0)]),_:2,__:[2]},1024)]),default:s(()=>[a(U,{node:u,class:"relative flex flex-col"},{default:s(()=>[x("span",We,b(u.label),1),n.value?(c(),g("span",qe," Cost "+b(u.weight),1)):M("",!0)]),_:2},1032,["node"])]),_:2},1024)]))),128)),_.length===0?(c(),g("h2",Xe," None ")):M("",!0)])])]))),128))]))}}),Qe=A({__name:"AdjacencyList",setup(o){return(e,t)=>(c(),g(z,null,[t[0]||(t[0]=x("h2",{class:"text-xl font-bold mb-2"},"Adjacency List",-1)),a(F,{secondary:"",class:"p-4 rounded-lg max-h-[200px] overflow-auto"},{default:s(()=>[a(Je)]),_:1})],64))}}),Ze={class:"text-xl font-bold text-center flex items-center justify-center overflow-hidden p-[3px]"},et=A({__name:"TransitionMatrixLabel",props:{toNode:{},fromNode:{},weight:{}},setup(o){const e=o,t=k(()=>typeof e.weight=="number"?e.weight:e.weight.toFraction());return(n,r)=>(c(),g("div",Ze,[a(te,null,{content:s(()=>[a(F,{class:"flex items-center py-2 px-3 rounded-md"},{default:s(()=>[a(U,{node:n.toNode,size:30},null,8,["node"]),a(R,{class:"text-2xl",icon:"arrow-right"}),a(U,{node:n.fromNode,size:30},null,8,["node"])]),_:1})]),default:s(()=>[a(P,{secondary:"",class:"h-10 w-10 cursor-default grid place-items-center rounded-md"},{default:s(()=>[y(b(t.value),1)]),_:1})]),_:1})]))}}),tt={key:0,class:"flex py-6 items-center"},ot=A({__name:"TransitionMatrixDisplay",setup(o){const{transitionMatrix:e}=me(h.value),t=$e(),n={background:`
      linear-gradient(
        ${t.value.secondary},
        ${t.value.secondary}
      )
      50%
      50%/calc(100% - 10px)
      calc(100% - 10px) no-repeat,
      linear-gradient(
        90deg,
        ${t.value.text}
        10%,
        ${G.TRANSPARENT}
        10%,
        ${G.TRANSPARENT}
        90%,
        ${t.value.text}
        90%
      )
      188%
      0`},r=k(()=>h.value.nodes.value);return(f,_)=>l(e).length!==0?(c(),g("div",tt,[_[0]||(_[0]=x("div",{class:"text-xl font-bold px-5 text-nowrap"},"T =",-1)),x("div",{style:n,class:"p-4 rounded"},[(c(!0),g(z,null,j(l(e),(m,u)=>(c(),g("div",{key:"row-"+u,class:"flex"},[(c(!0),g(z,null,j(m,(v,p)=>(c(),g("div",{key:"col-"+p},[a(et,{"to-node":r.value[u],"from-node":r.value[p],weight:v},null,8,["to-node","from-node","weight"])]))),128))]))),128))])])):M("",!0)}}),nt={key:0},lt={key:1},at=A({__name:"TransitionMatrix",setup(o){const e=D(h.value.nodes.value.length>10);return(t,n)=>(c(),g(z,null,[n[2]||(n[2]=x("div",{class:"flex items-end justify-between"},[x("h2",{class:"text-xl font-bold mb-2 mt-5"},"Transition Matrix")],-1)),a(F,{secondary:"",class:"p-3 rounded-lg max-h-[300px] overflow-auto"},{default:s(()=>[e.value?(c(),g("div",nt,[a(P,{onClick:n[0]||(n[0]=r=>e.value=!1)},{default:s(()=>n[1]||(n[1]=[y(" Load Transition Matrix ")])),_:1,__:[1]})])):(c(),g("div",lt,[a(ot)]))]),_:1})],64))}}),it="bipartite-colorizer",st=o=>{const{setTheme:e,removeAllThemes:t}=be(o,it),n=_=>{if(!o.characteristics.isBipartite.value)return;const v=o.characteristics.nodeIdToBipartitePartition.value.get(_.id);if(v!==void 0)return v===0?G.RED_500:G.BLUE_500};return{colorize:()=>{e("nodeBorderColor",n),e("nodeAnchorColor",n)},decolorize:()=>{t()}}},rt={class:"mb-2 text-sm"},ut={key:0,class:"flex flex-wrap gap-2"},dt={key:1,class:"flex flex-wrap gap-2"},ct=A({__name:"ConnectedInfo",setup(o){const e=k(()=>h.value.characteristics.isConnected.value),t=k(()=>h.value.characteristics.isWeaklyConnected.value),n=k(()=>h.value.settings.value.isGraphDirected),r=k(()=>h.value.characteristics.stronglyConnectedComponents.value.map(w=>w.map(S=>S.label))),f=k(()=>h.value.characteristics.isBipartite.value),_=k(()=>h.value.characteristics.isAcyclic.value),m=k(()=>h.value.characteristics.isComplete.value),{colorize:u,decolorize:v}=Pe(h.value),{colorize:p,decolorize:d}=st(h.value),{colorize:C,decolorize:i}=Ce(h.value);return($,w)=>(c(),g("div",rt,[n.value?(c(),g("div",ut,[a(V,{tooltip:l(O).stronglyConnected},{default:s(()=>[y(" Strongly Connected? "+b(e.value?"Yes":"No"),1)]),_:1},8,["tooltip"]),a(V,{tooltip:l(O).weaklyConnected},{default:s(()=>[y(" Weakly Connected? "+b(t.value?"Yes":"No"),1)]),_:1},8,["tooltip"]),a(V,{onMouseenter:l(u),onMouseleave:l(v),tooltip:l(O).stronglyConnectedComponents},{default:s(()=>[y(" Strongly Connected Components: "+b(r.value.length),1)]),_:1},8,["onMouseenter","onMouseleave","tooltip"]),a(V,{onMouseenter:l(p),onMouseleave:l(d),tooltip:l(O).bipartite},{default:s(()=>[y(" Bipartite? "+b(f.value?"Yes":"No"),1)]),_:1},8,["onMouseenter","onMouseleave","tooltip"]),a(V,{onMouseenter:l(C),onMouseleave:l(i),tooltip:l(O).acyclic},{default:s(()=>[y(" Acyclic? "+b(_.value?"Yes":"No"),1)]),_:1},8,["onMouseenter","onMouseleave","tooltip"]),a(V,{tooltip:l(O).complete},{default:s(()=>[y(" Complete? "+b(m.value?"Yes":"No"),1)]),_:1},8,["tooltip"])])):(c(),g("div",dt,[a(V,{tooltip:l(O).connected},{default:s(()=>[y(" Connected? "+b(e.value?"Yes":"No"),1)]),_:1},8,["tooltip"]),a(V,{onMouseenter:l(p),onMouseleave:l(d),tooltip:l(O).bipartite},{default:s(()=>[y(" Bipartite? "+b(f.value?"Yes":"No"),1)]),_:1},8,["onMouseenter","onMouseleave","tooltip"]),a(V,{onMouseenter:l(C),onMouseleave:l(i),tooltip:l(O).acyclic},{default:s(()=>[y(" Acyclic? "+b(_.value?"Yes":"No"),1)]),_:1},8,["onMouseenter","onMouseleave","tooltip"]),a(V,{tooltip:l(O).complete},{default:s(()=>[y(" Complete? "+b(m.value?"Yes":"No"),1)]),_:1},8,["tooltip"])]))]))}}),ft={key:0},pt={key:1},vt=A({__name:"GraphInfoMenu",setup(o){const e=k(()=>h.value.nodes.value.length>0);return(t,n)=>(c(),N(q,null,{activator:s(r=>[ae(t.$slots,"default",K(X(r)))]),default:s(()=>[a(F,{class:"flex flex-col text-xl font-bold p-3 w-[400px] max-h-[500px] overflow-auto rounded-lg gap-2"},{default:s(()=>[n[1]||(n[1]=x("h1",{class:"text-2xl"},"Graph Info",-1)),e.value?(c(),g("div",ft,[a(ct),a(Qe),a(at)])):(c(),g("div",pt,n[0]||(n[0]=[x("h2",{class:"font-normal text-base"}," After adding nodes and edges, come back here to learn about your graph! Is it connected? bipartite? planar? what the heck is planar? ",-1)])))]),_:1,__:[1]})]),_:3}))}});var mt={name:"BaseEditableHolder",extends:ke,emits:["update:modelValue","value-change"],props:{modelValue:{type:null,default:void 0},defaultValue:{type:null,default:void 0},name:{type:String,default:void 0},invalid:{type:Boolean,default:void 0},disabled:{type:Boolean,default:!1},formControl:{type:Object,default:void 0}},inject:{$parentInstance:{default:void 0},$pcForm:{default:void 0},$pcFormField:{default:void 0}},data:function(){return{d_value:this.defaultValue!==void 0?this.defaultValue:this.modelValue}},watch:{modelValue:function(e){this.d_value=e},defaultValue:function(e){this.d_value=e},$formName:{immediate:!0,handler:function(e){var t,n;this.formField=((t=this.$pcForm)===null||t===void 0||(n=t.register)===null||n===void 0?void 0:n.call(t,e,this.$formControl))||{}}},$formControl:{immediate:!0,handler:function(e){var t,n;this.formField=((t=this.$pcForm)===null||t===void 0||(n=t.register)===null||n===void 0?void 0:n.call(t,this.$formName,e))||{}}},$formDefaultValue:{immediate:!0,handler:function(e){this.d_value!==e&&(this.d_value=e)}},$formValue:{immediate:!1,handler:function(e){var t;(t=this.$pcForm)!==null&&t!==void 0&&t.getFieldState(this.$formName)&&e!==this.d_value&&(this.d_value=e)}}},formField:{},methods:{writeValue:function(e,t){var n,r;this.controlled&&(this.d_value=e,this.$emit("update:modelValue",e)),this.$emit("value-change",e),(n=(r=this.formField).onChange)===null||n===void 0||n.call(r,{originalEvent:t,value:e})},findNonEmpty:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.find(ie)}},computed:{$filled:function(){return ie(this.d_value)},$invalid:function(){var e,t;return!this.$formNovalidate&&this.findNonEmpty(this.invalid,(e=this.$pcFormField)===null||e===void 0||(e=e.$field)===null||e===void 0?void 0:e.invalid,(t=this.$pcForm)===null||t===void 0||(t=t.getFieldState(this.$formName))===null||t===void 0?void 0:t.invalid)},$formName:function(){var e;return this.$formNovalidate?void 0:this.name||((e=this.$formControl)===null||e===void 0?void 0:e.name)},$formControl:function(){var e;return this.formControl||((e=this.$pcFormField)===null||e===void 0?void 0:e.formControl)},$formNovalidate:function(){var e;return(e=this.$formControl)===null||e===void 0?void 0:e.novalidate},$formDefaultValue:function(){var e,t;return this.findNonEmpty(this.d_value,(e=this.$pcFormField)===null||e===void 0?void 0:e.initialValue,(t=this.$pcForm)===null||t===void 0||(t=t.initialValues)===null||t===void 0?void 0:t[this.$formName])},$formValue:function(){var e,t;return this.findNonEmpty((e=this.$pcFormField)===null||e===void 0||(e=e.$field)===null||e===void 0?void 0:e.value,(t=this.$pcForm)===null||t===void 0||(t=t.getFieldState(this.$formName))===null||t===void 0?void 0:t.value)},controlled:function(){return this.$inProps.hasOwnProperty("modelValue")||!this.$inProps.hasOwnProperty("modelValue")&&!this.$inProps.hasOwnProperty("defaultValue")},filled:function(){return this.$filled}}},ht={name:"BaseInput",extends:mt,props:{size:{type:String,default:null},fluid:{type:Boolean,default:null},variant:{type:String,default:null}},inject:{$parentInstance:{default:void 0},$pcFluid:{default:void 0}},computed:{$variant:function(){var e;return(e=this.variant)!==null&&e!==void 0?e:this.$primevue.config.inputStyle||this.$primevue.config.inputVariant},$fluid:function(){var e;return(e=this.fluid)!==null&&e!==void 0?e:!!this.$pcFluid},hasFluid:function(){return this.$fluid}}},_t=we`
    .p-inputtext {
        font-family: inherit;
        font-feature-settings: inherit;
        font-size: 1rem;
        color: dt('inputtext.color');
        background: dt('inputtext.background');
        padding-block: dt('inputtext.padding.y');
        padding-inline: dt('inputtext.padding.x');
        border: 1px solid dt('inputtext.border.color');
        transition:
            background dt('inputtext.transition.duration'),
            color dt('inputtext.transition.duration'),
            border-color dt('inputtext.transition.duration'),
            outline-color dt('inputtext.transition.duration'),
            box-shadow dt('inputtext.transition.duration');
        appearance: none;
        border-radius: dt('inputtext.border.radius');
        outline-color: transparent;
        box-shadow: dt('inputtext.shadow');
    }

    .p-inputtext:enabled:hover {
        border-color: dt('inputtext.hover.border.color');
    }

    .p-inputtext:enabled:focus {
        border-color: dt('inputtext.focus.border.color');
        box-shadow: dt('inputtext.focus.ring.shadow');
        outline: dt('inputtext.focus.ring.width') dt('inputtext.focus.ring.style') dt('inputtext.focus.ring.color');
        outline-offset: dt('inputtext.focus.ring.offset');
    }

    .p-inputtext.p-invalid {
        border-color: dt('inputtext.invalid.border.color');
    }

    .p-inputtext.p-variant-filled {
        background: dt('inputtext.filled.background');
    }

    .p-inputtext.p-variant-filled:enabled:hover {
        background: dt('inputtext.filled.hover.background');
    }

    .p-inputtext.p-variant-filled:enabled:focus {
        background: dt('inputtext.filled.focus.background');
    }

    .p-inputtext:disabled {
        opacity: 1;
        background: dt('inputtext.disabled.background');
        color: dt('inputtext.disabled.color');
    }

    .p-inputtext::placeholder {
        color: dt('inputtext.placeholder.color');
    }

    .p-inputtext.p-invalid::placeholder {
        color: dt('inputtext.invalid.placeholder.color');
    }

    .p-inputtext-sm {
        font-size: dt('inputtext.sm.font.size');
        padding-block: dt('inputtext.sm.padding.y');
        padding-inline: dt('inputtext.sm.padding.x');
    }

    .p-inputtext-lg {
        font-size: dt('inputtext.lg.font.size');
        padding-block: dt('inputtext.lg.padding.y');
        padding-inline: dt('inputtext.lg.padding.x');
    }

    .p-inputtext-fluid {
        width: 100%;
    }
`,xt={root:function(e){var t=e.instance,n=e.props;return["p-inputtext p-component",{"p-filled":t.$filled,"p-inputtext-sm p-inputfield-sm":n.size==="small","p-inputtext-lg p-inputfield-lg":n.size==="large","p-invalid":t.$invalid,"p-variant-filled":t.$variant==="filled","p-inputtext-fluid":t.$fluid}]}},gt=Ne.extend({name:"inputtext",style:_t,classes:xt}),yt={name:"BaseInputText",extends:ht,style:gt,provide:function(){return{$pcInputText:this,$parentInstance:this}}};function Y(o){"@babel/helpers - typeof";return Y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y(o)}function $t(o,e,t){return(e=bt(e))in o?Object.defineProperty(o,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):o[e]=t,o}function bt(o){var e=Ct(o,"string");return Y(e)=="symbol"?e:e+""}function Ct(o,e){if(Y(o)!="object"||!o)return o;var t=o[Symbol.toPrimitive];if(t!==void 0){var n=t.call(o,e);if(Y(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(o)}var fe={name:"InputText",extends:yt,inheritAttrs:!1,methods:{onInput:function(e){this.writeValue(e.target.value,e)}},computed:{attrs:function(){return ce(this.ptmi("root",{context:{filled:this.$filled,disabled:this.disabled}}),this.formField)},dataP:function(){return Te($t({invalid:this.$invalid,fluid:this.$fluid,filled:this.$variant==="filled"},this.size,this.size))}}},kt=["value","name","disabled","aria-invalid","data-p"];function wt(o,e,t,n,r,f){return c(),g("input",ce({type:"text",class:o.cx("root"),value:o.d_value,name:o.name,disabled:o.disabled,"aria-invalid":o.$invalid||void 0,"data-p":f.dataP,onInput:e[0]||(e[0]=function(){return f.onInput&&f.onInput.apply(f,arguments)})},f.attrs),null,16,kt)}fe.render=wt;const Nt=A({__name:"InputText",setup(o){return(e,t)=>(c(),N(l(fe),{onKeydown:t[0]||(t[0]=Ae(()=>{},["stop"]))}))}}),Tt=A({__name:"GInputText",setup(o){return(e,t)=>(c(),N(Nt))}}),At={class:"rounded-lg mb-2"},Ft={class:"w-full mt-2"},St={key:2},It={key:0,class:"mt-4 w-full"},Mt={key:1},Et={class:"text-xl font-bold mt-4 mb-2"},Ot={class:"flex flex-wrap items-center gap-2"},Vt=["onClick"],Dt=A({__name:"CollaborativeSessionMenu",setup(o){const e=Fe(),{navigate:t}=he(),{connectToRoom:n,isConnected:r,connectedRoomId:f,disconnectFromRoom:_,collaborators:m,collaboratorCount:u,meAsACollaborator:v}=Se,p=k(()=>`${window.location.origin}?rid=${f.value}`),d=D(!1),C=ue(()=>{d.value=!1},2e3),i=D(!1),$=()=>{try{navigator.clipboard.writeText(p.value),d.value=!0,C()}catch(B){console.error("Failed to copy link to clipboard",B)}},w=async()=>{i.value=!0,await n({roomId:ze(),productId:Me.productId,graph:h.value}),e.push({query:{rid:f.value}}),i.value=!1},S=()=>{_(),e.push({query:{rid:void 0}})};return(B,T)=>{const H=Ie("tooltip");return c(),N(q,null,{activator:s(E=>[ae(B.$slots,"default",K(X(E)))]),default:s(()=>[a(F,{class:"flex flex-col p-3 w-[400px] rounded-lg"},{default:s(()=>[T[4]||(T[4]=x("h1",{class:"text-2xl font-bold mb-3"},"Collaborate",-1)),T[5]||(T[5]=x("h2",{class:"text-xl font-bold mb-2"},"My Name",-1)),x("div",At,[a(Tt,{modelValue:l(Z).name,"onUpdate:modelValue":T[0]||(T[0]=E=>l(Z).name=E),id:"collab-name",disabled:l(r)||i.value,class:"w-full",placeholder:"Pick a name for others to see"},null,8,["modelValue","disabled"])]),x("div",Ft,[!l(r)&&!i.value?(c(),N(P,{key:0,onClick:w,contrast:"",disabled:!l(Z).name,class:"w-full"},{default:s(()=>[T[1]||(T[1]=y(" Generate Link ")),a(R,{icon:"link",class:"ml-2"})]),_:1,__:[1]},8,["disabled"])):i.value?(c(),N(le,{key:1,disabled:"",class:"w-full"},{default:s(()=>T[2]||(T[2]=[y(" Preparing Room... ")])),_:1,__:[2]})):(c(),g("div",St,[a(F,{onClick:$,tertiary:"",class:"group p-2 rounded-md cursor-pointer flex justify-between items-center"},{default:s(()=>[x("span",null,b(p.value),1),d.value?M("",!0):(c(),N(R,{key:0,icon:"content-copy",class:"group-hover:opacity-100 opacity-0"})),d.value?(c(),N(R,{key:1,icon:"check",class:"text-green-400"})):M("",!0)]),_:1})]))]),l(r)?(c(),g("div",It,[a(le,{onClick:S,color:l(G).RED_600,class:"w-full"},{default:s(()=>T[3]||(T[3]=[y(" Disconnect ")])),_:1,__:[3]},8,["color"])])):M("",!0),l(r)&&l(v)?(c(),g("div",Mt,[x("h2",Et," Collaborators ("+b(l(u))+") ",1),x("div",Ot,[ne((c(),g("div",{style:se({backgroundColor:l(v).color}),class:"text-gray-300 font-bold rounded-md px-3 py-1"},[y(b(l(v).name)+" (You) ",1)],4)),[[H,{value:`You are in ${l(J)[l(v).productId].name}`,pt:{text:"bg-magic"}},void 0,{bottom:!0}]]),(c(!0),g(z,null,j(l(m),E=>ne((c(),g("button",{key:E.id,onClick:Qt=>l(t)(l(J)[E.productId]),style:se({backgroundColor:E.color}),class:"text-gray-300 font-bold rounded-md px-3 py-1"},[y(b(E.name),1)],12,Vt)),[[H,`${E.name} is in ${l(J)[E.productId].name}`]])),128))])])):M("",!0)]),_:1,__:[4,5]})]),_:3})}}}),Pt=(o,e,t,n)=>{const r=[],{xOffset:f,yOffset:_}=n,{depthToNodeIds:m}=t,u=Ee(10);for(let v=1;v<m.length;v++){const p=m[v],d=[];if(p.length%2===1){const i=Math.floor(p.length/2);d[i]=0;for(let $=1;$<=i;$++)d[i+$]=$*f,d[i-$]=-$*f}else for(let i=0;i<p.length;i++)d[i]=(i-p.length/2+.5)*f;for(let i=0;i<p.length;i++){const $=o.getNode(p[i]);if(!$)throw new Error(`node with id ${p[i]} not found`);const w=e.x+d[i],S=e.y+_*v;r.push({nodeId:$.id,coords:{x:u(w),y:u(S)}})}}return r},zt=(o,e)=>{const t=new Map;if(!e[o.id])throw new Error(`node with id ${o.id} not found in adj list`);let n=[o.id];const r=new Set(n);let f=0;for(;n.length>0;){const _=[];for(const m of n){t.set(m,f);for(const u of e[m])r.has(u)||(r.add(u),_.push(u))}n=[],n.push(..._),f++}return{nodeIdToDepth:t,depthToNodeIds:Array.from(t).reduce((_,[m,u])=>(_[u]||(_[u]=[]),_[u].push(m),_),[]),depth:f-1}},L={durationMs:250,xOffset:250,yOffset:200,shape:"standard"},Bt=(o,e={})=>{const t={...L,...e},n=D(t),r=D(!1),f=m=>{const{adjacencyList:u}=o.adjacencyList,v=zt(m,u.value);return(n.value.shape==="standard"?Pt:Be)(o,m,v,n.value)};return{shapeGraph:async m=>{if(r.value)return;const u=f(m);u&&(r.value=!0,await o.bulkMoveNode(u),r.value=!1)},reshapingActive:r,options:n}},Lt={debounceMs:500},Rt=(o,e={})=>{const{debounceMs:t,...n}={...Lt,...e},r=D(),f=D(!1),_=Bt(o,n),m=()=>{if(!r.value)return;const d=o.getNode(r.value);d&&_.shapeGraph(d)},u=ue(m,t),v=()=>{o.subscribe("onStructureChange",u),o.subscribe("onNodeDrop",u),o.subscribe("onGroupDrop",u),f.value=!0},p=()=>{o.unsubscribe("onStructureChange",u),o.unsubscribe("onNodeDrop",u),o.unsubscribe("onGroupDrop",u),f.value=!1};return oe(r,()=>{f.value&&m()}),Oe(p),{rootNodeId:r,activate:v,deactivate:p,isActive:f,updateShape:m,debouncedUpdateShape:u,..._}},re=A({__name:"InputRange",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(o){const e=Ve(o,"modelValue");return(t,n)=>ne((c(),g("input",{"onUpdate:modelValue":n[0]||(n[0]=r=>e.value=r),type:"range"},null,512)),[[De,e.value,void 0,{number:!0}]])}}),jt={class:"font-bold text-sm"},Gt={class:"font-bold text-sm"},Ut={class:"flex flex-col gap-2"},Yt=A({__name:"TreeShapeMenuSettings",props:{controls:{}},setup(o){const e=o,{options:t,debouncedUpdateShape:n,updateShape:r}=e.controls,f=k(()=>t.value.xOffset!==L.xOffset),_=k(()=>t.value.yOffset!==L.yOffset),m=()=>{t.value.xOffset=L.xOffset,n()},u=()=>{t.value.yOffset=L.yOffset,n()},v=p=>{t.value.shape=p,r()};return(p,d)=>(c(),N(q,{offset:5},{activator:s(({toggle:C})=>[a(P,{onClick:C},{default:s(()=>[a(R,{icon:"cog"})]),_:2},1032,["onClick"])]),default:s(()=>[a(F,{class:"p-3 flex flex-col gap-4 w-52 rounded-md shadow-lg"},{default:s(()=>[x("div",null,[x("h2",jt,"Tree Offset X ("+b(l(t).xOffset)+")",1),a(re,{modelValue:l(t).xOffset,"onUpdate:modelValue":[d[0]||(d[0]=C=>l(t).xOffset=C),p.controls.debouncedUpdateShape],min:0,max:l(L).xOffset*2,class:"w-full"},null,8,["modelValue","onUpdate:modelValue","max"]),f.value?(c(),N(P,{key:0,onClick:m,contrast:"",class:"text-xs"},{default:s(()=>d[4]||(d[4]=[y(" Set To Default ")])),_:1,__:[4]})):M("",!0)]),x("div",null,[x("h2",Gt,"Tree Offset Y ("+b(l(t).yOffset)+")",1),a(re,{modelValue:l(t).yOffset,"onUpdate:modelValue":[d[1]||(d[1]=C=>l(t).yOffset=C),p.controls.debouncedUpdateShape],min:0,max:l(L).yOffset*2,class:"w-full"},null,8,["modelValue","onUpdate:modelValue","max"]),_.value?(c(),N(P,{key:0,onClick:u,contrast:"",class:"text-xs"},{default:s(()=>d[5]||(d[5]=[y(" Set To Default ")])),_:1,__:[5]})):M("",!0)]),x("div",Ut,[d[8]||(d[8]=x("h2",{class:"font-bold text-lg"},"Shape",-1)),a(P,{onClick:d[2]||(d[2]=C=>v("standard")),secondary:l(t).shape==="standard",tertiary:l(t).shape!=="standard",disabled:l(t).shape==="standard"},{default:s(()=>d[6]||(d[6]=[y(" Standard ")])),_:1,__:[6]},8,["secondary","tertiary","disabled"]),a(P,{onClick:d[3]||(d[3]=C=>v("binary")),secondary:l(t).shape==="binary",tertiary:l(t).shape!=="binary",disabled:l(t).shape==="binary"},{default:s(()=>d[7]||(d[7]=[y(" Binary ")])),_:1,__:[7]},8,["secondary","tertiary","disabled"])])]),_:1})]),_:1}))}}),Ht={key:0,class:"flex flex-col gap-2"},Wt={class:"flex justify-between"},qt={class:"flex justify-between"},Kt={key:1,class:"flex flex-col gap-2"},Xt=A({__name:"TreeShapeMenu",props:{controls:{}},setup(o){const t=de(o,"controls"),{isActive:n,activate:r,deactivate:f,updateShape:_,rootNodeId:m}=t.value,u=d=>{m.value=d.id,n.value||_()},v=k(()=>{if(m.value)return h.value.getNode(m.value)}),p=()=>{r(),!v.value&&h.value.nodes.value.length>0&&(m.value=h.value.nodes.value[0].id)};return(d,C)=>(c(),N(q,null,{activator:s(i=>[ae(d.$slots,"default",K(X(i)))]),default:s(()=>[a(F,{class:"p-3 flex flex-col gap-2 w-72 rounded-lg"},{default:s(()=>[l(h).nodes.value.length>0?(c(),g("div",Ht,[x("div",Wt,[C[0]||(C[0]=x("h1",{class:"font-bold text-xl"},"Pick A Root Node",-1)),a(Yt,{controls:t.value},null,8,["controls"])]),a(F,{secondary:"",class:"py-3 flex flex-wrap justify-center gap-2 max-h-48 rounded-md overflow-auto"},{default:s(()=>[(c(!0),g(z,null,j(l(h).nodes.value,i=>(c(),N(U,{key:i.id,onClick:$=>u(i),node:i,size:55},null,8,["onClick","node"]))),128))]),_:1}),x("div",qt,[x("div",null,[l(n)?(c(),N(le,{key:0,onClick:l(f),color:l(G).RED_600,class:"text-xs"},{default:s(()=>C[1]||(C[1]=[y(" Turn Off AutoTree™ ")])),_:1,__:[1]},8,["onClick","color"])):(c(),N(P,{key:1,onClick:p,tertiary:"",class:"text-xs"},{default:s(()=>C[2]||(C[2]=[y(" Try AutoTree™ ")])),_:1,__:[2]}))]),x("div",null,[l(n)&&v.value?(c(),N(F,{key:0,secondary:"",class:"rounded-md px-2 py-1 font-bold text-xs animate-pulse"},{default:s(()=>[x("h2",null,"Tracking Node "+b(v.value.label),1)]),_:1})):M("",!0)])])])):(c(),g("div",Kt,C[3]||(C[3]=[x("h1",{class:"font-bold text-xl"},"Where Are The Nodes?!",-1),x("p",{class:"text-base"},[y(" Add some nodes to the graph, then come back to check out how we can "),x("span",{class:"text-magic"},"magically"),y(" shape them into a tree! ")],-1)])))]),_:1})]),_:3}))}}),Jt=A({__name:"IslandToolbar",setup(o){const e=Re(h.value,[{dismiss:"onNodeAdded",hint:"Double click on the canvas to add a node."},{dismiss:"onEdgeAdded",hint:"Hover node to show anchors, drag between them to add an edge."}]);e.start();const t=()=>{const{activate:u,deactivate:v,isActive:p}=h.value.annotation;(p.value?v:u)(),h.value.canvasFocused.value=!0},{undo:n,redo:r}=h.value.shortcut.trigger,f=k(()=>{const{isActive:u,canUndo:v}=h.value.annotation,{canUndo:p}=h.value.history,{settings:d}=h.value;return u.value?v.value:d.value.interactive?p.value:!1}),_=k(()=>{const{isActive:u,canRedo:v}=h.value.annotation,{canRedo:p}=h.value.history,{settings:d}=h.value;return u.value?v.value:d.value.interactive?p.value:!1}),m=Rt(h.value);return(u,v)=>(c(),N(_e,{hint:l(e)},{default:s(()=>[a(W,{class:"gap-0"},{default:s(()=>[a(I,{onClick:v[0]||(v[0]=p=>l(h).settings.value.displayEdgeLabels=!0),active:l(h).settings.value.displayEdgeLabels,icon:"label-outline"},null,8,["active"]),a(Q),a(I,{onClick:v[1]||(v[1]=p=>l(h).settings.value.displayEdgeLabels=!1),active:!l(h).settings.value.displayEdgeLabels,icon:"label-off-outline"},null,8,["active"])]),_:1}),a(W,{class:"gap-0"},{default:s(()=>[a(I,{onClick:v[2]||(v[2]=p=>l(h).settings.value.isGraphDirected=!0),active:l(h).settings.value.isGraphDirected,icon:"arrow-right-thin"},null,8,["active"]),a(Q),a(I,{onClick:v[3]||(v[3]=p=>l(h).settings.value.isGraphDirected=!1),active:!l(h).settings.value.isGraphDirected,icon:"minus"},null,8,["active"])]),_:1}),a(W,{class:"gap-0"},{default:s(()=>[a(I,{onClick:l(n).fn,disabled:!f.value,icon:"undo"},null,8,["onClick","disabled"]),a(Q),a(I,{onClick:l(r).fn,disabled:!_.value,icon:"redo"},null,8,["onClick","disabled"])]),_:1}),a(W,null,{default:s(()=>[a(I,{onClick:t,active:l(h).annotation.isActive.value,icon:l(h).annotation.isActive.value?"pencil":"pencil-outline"},null,8,["active","icon"]),a(vt,null,{default:s(({toggle:p,isOpen:d})=>[a(I,{onClick:p,active:d,icon:"information-outline"},null,8,["onClick","active"])]),_:1}),a(Dt,null,{default:s(({toggle:p,isOpen:d})=>[a(I,{onClick:p,active:d,icon:"account-multiple"},null,8,["onClick","active"])]),_:1}),a(Xt,{controls:l(m)},{default:s(({toggle:p,isOpen:d})=>[a(I,{onClick:p,active:d||l(m).isActive.value,icon:d||l(m).isActive.value?"forest":"forest-outline"},null,8,["onClick","active","icon"])]),_:1},8,["controls"]),a(I,{onClick:v[4]||(v[4]=p=>ee.value=!l(ee)),active:l(ee),icon:"code-tags"},null,8,["active"])]),_:1})]),_:1},8,["hint"]))}}),so=A({__name:"MainView",setup(o){const e=xe(Le);return(t,n)=>(c(),N(ge,K(X(l(e))),{"top-center":s(()=>[a(Jt)]),_:1},16))}});export{so as default};
