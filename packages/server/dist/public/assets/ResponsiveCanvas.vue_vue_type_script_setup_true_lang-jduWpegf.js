import{bq as w,br as N,bs as S,bt as X,bu as j,bv as Y,bw as I,bx as D,af as R,by as st,bz as ht,bA as _t,bB as Qt,bC as te,bD as Tt,bE as ee,bF as q,bG as ot,bH as ne,bI as k,bJ as St,bK as re,bL as ae,bM as ie,bN as se,bO as oe,E as G,g as C,al as Ht,ai as Et,N as rt,d as ce,bP as he,L as F,bQ as ue,c as gt,X as xt,C as le,a as bt,I as at,o as vt}from"./index-Wvoc3Gvc.js";const ut=t=>{const{pointA:n,pointB:e,pointC:r,textArea:a}={...It,...t};if(!a)throw new Error("no text area provided");const{text:i}=a,{fontSize:s}={...j,...i},o=(n.x+e.x+r.x)/3,c=(n.y+e.y+r.y)/3;return{x:o-s,y:c-s}},fe=t=>{if(!t.textArea)return;const n=ut(t),e=w(t.textArea,n),{width:r,height:a}=N(e),i=S({at:e.at,width:r,height:a});return s=>i(s)},Ct=t=>{if(!t.textArea)return;const n=ut(t),e=w(t.textArea,n),r=X(e);return a=>r(a)},kt=t=>{if(!t.textArea)return;const n=ut(t),e=w(t.textArea,n),r=Y(e);return a=>r(a)},de=t=>{const n=Ct(t),e=kt(t);if(!(!n||!e))return r=>{n(r),e(r)}},Lt=t=>n=>{const{pointA:e,pointB:r,pointC:a,stroke:i}=t;if(i){const d={start:e,end:r,width:i.width},v={start:r,end:a,width:i.width},b={start:a,end:e,width:i.width};return D(d)(n)||D(v)(n)||D(b)(n)}const{x:s,y:o}=n,c=.5*(-r.y*a.x+e.y*(-r.x+a.x)+e.x*(r.y-a.y)+r.x*a.y),h=1/(2*c)*(e.y*a.x-e.x*a.y+(a.y-e.y)*s+(e.x-a.x)*o),l=1/(2*c)*(e.x*r.y-e.y*r.x+(e.y-r.y)*s+(r.x-e.x)*o);return h>0&&l>0&&1-h-l>0},Rt=t=>()=>{const{pointA:n,pointB:e,pointC:r}=t,a=Math.min(n.x,e.x,r.x),i=Math.min(n.y,e.y,r.y),s=Math.max(n.x,e.x,r.x),o=Math.max(n.y,e.y,r.y);return{topLeft:{x:a,y:i},bottomRight:{x:s,y:o}}},Bt=t=>{const{topLeft:n,bottomRight:e}=Rt(t)(),r=I({at:n,width:e.x-n.x,height:e.y-n.y});return a=>r(a)},It={color:"black"},ge=t=>{const n=lt(t),e=Lt(t),r=fe(t),a=Bt(t),i=f=>e(f),s=Rt(t),o=de(t),c=Ct(t),h=kt(t),l=f=>{n(f),o==null||o(f)};return{id:t.id??R(),name:"triangle",draw:l,drawShape:n,drawTextArea:o,drawTextAreaMatte:c,drawText:h,hitbox:i,shapeHitbox:e,textHitbox:r,efficientHitbox:a,getBoundingBox:s}},lt=t=>n=>{const{pointA:e,pointB:r,pointC:a,color:i,stroke:s}={...It,...t};n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(r.x,r.y),n.lineTo(a.x,a.y),n.fillStyle=i,n.fill(),n.closePath(),s&&(n.lineWidth=s.width,n.strokeStyle=s.color,s.dash?n.setLineDash(s.dash):n.setLineDash([]),n.stroke(),n.setLineDash([]))},xe=t=>{const{start:n,end:e,width:r,color:a,dash:i,arrowHeadSize:s}={...J,...t},o=Math.atan2(e.y-n.y,e.x-n.x),{arrowHeadHeight:c,perpLineLength:h}=s(r),l={x:e.x-c*Math.cos(o),y:e.y-c*Math.sin(o)},f=e,d={x:l.x+h*Math.cos(o+Math.PI/2),y:l.y+h*Math.sin(o+Math.PI/2)},v={x:l.x-h*Math.cos(o+Math.PI/2),y:l.y-h*Math.sin(o+Math.PI/2)},b={start:n,end:{x:l.x+Math.cos(o),y:l.y+Math.sin(o)},width:r,color:a,dash:i},g=st(b),L=lt({pointA:f,pointB:d,pointC:v,color:a});return B=>{g(B),L(B)}},be=t=>{const{start:n,end:e,width:r,arrowHeadSize:a}={...J,...t},i=D(t),s=ht({start:n,end:e,width:r,arrowHeadSize:a}),o=Lt(s);return c=>i(c)||o(c)},ve=t=>()=>{const{topLeft:n,bottomRight:e}=Qt(t)(),{start:r,end:a,width:i,arrowHeadSize:s}={...J,...t},o=ht({start:r,end:a,width:i,arrowHeadSize:s}),c=Math.min(n.x,o.pointA.x,o.pointB.x,o.pointC.x),h=Math.max(n.x,o.pointA.x,o.pointB.x,o.pointC.x),l=Math.min(e.y,o.pointA.y,o.pointB.y,o.pointC.y),f=Math.max(e.y,o.pointA.y,o.pointB.y,o.pointC.y);return{topLeft:{x:c,y:l},bottomRight:{x:h,y:f}}},ye=t=>{const n=_t(t),{start:e,end:r,width:a,arrowHeadSize:i}={...J,...t},s=ht({start:e,end:r,width:a,arrowHeadSize:i}),o=Bt(s);return c=>n(c)||o(c)},Z=t=>{const{textArea:n}=t;if(!n)throw new Error("no text area provided");return te(t)},we=t=>{if(!t.textArea)return;const n=Z(t),e=w(t.textArea,n),{width:r,height:a}=N(e),i=S({at:e.at,width:r,height:a});return s=>i(s)},Pt=t=>{if(!t.textArea)return;const n=Z(t),e=w(t.textArea,n),r=X(e);return a=>r(a)},zt=t=>{if(!t.textArea)return;const n=Z(t),e=w(t.textArea,n),r=Y(e);return a=>r(a)},me=t=>{const n=Pt(t),e=zt(t);if(!(!n||!e))return r=>{n(r),e(r)}},J={...Tt,arrowHeadSize:ee},Ae=t=>{if(t.width&&t.width<0)throw new Error("width must be positive");const n=xe(t),e=be(t),r=we(t),a=ye(t),i=d=>(r==null?void 0:r(d))||e(d),s=ve(t),o=me(t),c=Pt(t),h=zt(t),l=d=>{n(d),o==null||o(d)},f=(d,v)=>{if(!t.textArea)return;const b=Z(t),g=w(t.textArea,b);q(d,g,v)};return{id:t.id??R(),name:"arrow",draw:l,drawShape:n,drawTextArea:o,drawTextAreaMatte:c,drawText:h,hitbox:i,shapeHitbox:e,textHitbox:r,efficientHitbox:a,getBoundingBox:s,activateTextArea:f}},pe=t=>{const n=ot({width:t.size,height:t.size,...t});return e=>n(e)},K=t=>{const{at:n,size:e,textArea:r}=t;if(!r)throw new Error("no text area provided");const{text:a}=r,{fontSize:i}={...j,...a},s=n.x+e/2,o=n.y+e/2;return{x:s-i,y:o-i}},Me=t=>{if(!t.textArea)return;const n=K(t),e=w(t.textArea,n),{width:r,height:a}=N(e),i=S({at:e.at,width:r,height:a});return s=>i(s)},Wt=t=>{if(!t.textArea)return;const n=K(t),e=w(t.textArea,n),r=X(e);return a=>r(a)},Ft=t=>{if(!t.textArea)return;const n=K(t),e=w(t.textArea,n),r=Y(e);return a=>r(a)},_e=t=>{const n=Wt(t),e=Ft(t);if(!(!n||!e))return r=>{n(r),e(r)}},Te=t=>{const n=S({at:t.at,width:t.size,height:t.size,borderRadius:t.borderRadius,rotation:t.rotation,stroke:t.stroke});return e=>n(e)},Se=t=>ne({at:t.at,width:t.size,height:t.size}),He=t=>{const n=I({at:t.at,width:t.size,height:t.size});return e=>n(e)},Ee=t=>{const n=pe(t),e=Te(t),r=Me(t),a=He(t),i=d=>(r==null?void 0:r(d))||e(d),s=Se(t),o=_e(t),c=Wt(t),h=Ft(t),l=d=>{n(d),o==null||o(d)},f=(d,v)=>{if(!t.textArea)return;const b=K(t),g=w(t.textArea,b);q(d,g,v)};return{id:t.id??R(),name:"square",draw:l,drawShape:n,drawTextArea:o,drawTextAreaMatte:c,drawText:h,hitbox:i,shapeHitbox:e,textHitbox:r,efficientHitbox:a,getBoundingBox:s,activateTextArea:f}},Ce=t=>{const{spacing:n,at:e,upDistance:r,downDistance:a,rotation:i,lineWidth:s,color:o}={...Nt,...t},c=s*2.5,h=c/1.75,l=k({x:e.x,y:e.y-n},e,i),f=k({x:e.x+r,y:e.y-n},e,i),d=k({x:e.x+r,y:e.y+n},e,i),v=k({x:e.x+r-a+c,y:e.y+n},e,i),b=k({x:e.x+r,y:e.y},e,i),g=v,L={x:g.x-c*Math.cos(i),y:g.y-c*Math.sin(i)},B={x:g.x-h*Math.cos(i+Math.PI/2+.01),y:g.y-h*Math.sin(i+Math.PI/2+.01)},P={x:g.x+h*Math.cos(i+Math.PI/2-.01),y:g.y+h*Math.sin(i+Math.PI/2-.01)},$=lt({pointA:L,pointB:B,pointC:P,color:o}),nt=st({start:l,end:f,width:s,color:o}),H=st({start:d,end:v,width:s,color:o});return p=>{nt(p),$(p),H(p),p.beginPath(),p.arc(b.x,b.y,n,Math.PI/2+i+.01,-Math.PI/2+i-.01,!0),p.strokeStyle=o,p.lineWidth=s,p.stroke(),p.closePath()}},ke=t=>{const{spacing:n,at:e,upDistance:r,lineWidth:a,rotation:i}=t,s=k({x:e.x+r,y:e.y},e,i),o=D({start:e,end:s,width:2*n+a});return c=>o(c)},Ot=t=>()=>{const{spacing:n,at:e,upDistance:r,rotation:a,lineWidth:i}=t,s=k({x:e.x+r,y:e.y},e,a),o=Math.min(e.x,s.x)-i/2-n,c=Math.min(e.y,s.y)-i/2-n,h=Math.max(e.x,s.x)+i/2+n,l=Math.max(e.y,s.y)+i/2+n;return{topLeft:{x:o,y:c},bottomRight:{x:h,y:l}}},Le=t=>{const{topLeft:n,bottomRight:e}=Ot(t)(),r=e.x-n.x,a=e.y-n.y,i=I({at:{x:n.x,y:n.y},width:r,height:a});return s=>i(s)},Q=t=>{const{at:n,upDistance:e,rotation:r,textArea:a,spacing:i,lineWidth:s}={...Nt,...t};if(!a)throw new Error("no text area provided");const{text:o}=a,{fontSize:c}={...j,...o},h=k({x:n.x+e+i+s/2,y:n.y},n,r);return{x:h.x-c+Math.cos(r)*15,y:h.y-c+Math.sin(r)*15}},Re=t=>{if(!t.textArea)return;const n=Q(t),e=w(t.textArea,n),{width:r,height:a}=N(e),i=S({at:e.at,width:r,height:a});return s=>i(s)},Dt=t=>{if(!t.textArea)return;const n=Q(t),e=w(t.textArea,n),r=X(e);return a=>r(a)},Ut=t=>{if(!t.textArea)return;const n=Q(t),e=w(t.textArea,n),r=Y(e);return a=>r(a)},Be=t=>{const n=Dt(t),e=Ut(t);if(!(!n||!e))return r=>{n(r),e(r)}},Nt={color:"black"},Ie=t=>{if(t.downDistance<0)throw new Error("downDistance must be positive");if(t.upDistance<0)throw new Error("upDistance must be positive");const n=Ce(t),e=ke(t),r=Re(t),a=Le(t),i=d=>(r==null?void 0:r(d))||e(d),s=Ot(t),o=Be(t),c=Dt(t),h=Ut(t),l=d=>{n(d),o==null||o(d)},f=(d,v)=>{if(!t.textArea)return;const b=Q(t),g=w(t.textArea,b);q(d,g,v)};return{id:t.id??R(),name:"uturn",draw:l,drawShape:n,drawTextArea:o,drawTextAreaMatte:c,drawText:h,hitbox:i,shapeHitbox:e,textHitbox:r,efficientHitbox:a,getBoundingBox:s,activateTextArea:f}},Pe=t=>{const{at:n,size:e,rotation:r,lineWidth:a,borderRadius:i}={...Xt,...t},s=a/2,o=S({at:{x:n.x-e/2,y:n.y-s},width:e,height:a,rotation:r,borderRadius:i}),c=S({at:{x:n.x-s,y:n.y-e/2},width:a,height:e,rotation:r,borderRadius:i});return h=>o(h)||c(h)},ze=t=>()=>{const{at:n,size:e}=t;return{topLeft:{x:n.x-e/2,y:n.y-e/2},bottomRight:{x:n.x+e/2,y:n.y+e/2}}},We=t=>{const{at:n,size:e}=t,r=I({at:{x:n.x-e/2,y:n.y-e/2},width:e,height:e});return a=>r(a)},Fe=t=>{const{at:n,size:e,rotation:r,color:a,lineWidth:i,borderRadius:s}={...Xt,...t},o=i/2;return c=>{ot({at:{x:n.x-o,y:n.y-e/2},width:i,height:e,color:a,borderRadius:s,rotation:r})(c),ot({at:{x:n.x-e/2,y:n.y-o},width:e,height:i,color:a,borderRadius:s,rotation:r})(c)}},Xt={rotation:0,color:"black",lineWidth:Tt.width,borderRadius:0},Oe=t=>{if(t.lineWidth&&t.lineWidth<0)throw new Error("lineWidth must be positive");const n=Fe(t),e=Pe(t),r=We(t),a=o=>e(o),i=ze(t),s=o=>{n(o)};return{id:t.id??R(),name:"cross",draw:s,drawShape:n,shapeHitbox:e,hitbox:a,efficientHitbox:r,getBoundingBox:i}},De=t=>n=>{const{type:e,color:r,brushWeight:a,points:i}={...Xe,...t};e==="draw"?(()=>{n.strokeStyle=r,n.lineCap="round",n.lineJoin="round",n.lineWidth=a,n.beginPath();const[c,...h]=i;n.moveTo(c.x,c.y),h.forEach(({x:l,y:f})=>n.lineTo(l,f)),n.stroke()})():(()=>{n.globalCompositeOperation="destination-out",n.lineWidth=it;for(let c=0;c<i.length-1;c++){const h=i[c],l=i[c+1],f=Math.pow(l.x-h.x,2)+Math.pow(l.y-h.y,2),d=Math.sqrt(f),v=Math.ceil(d/it);for(let b=0;b<=v;b++){const g=h.x+b/v*(l.x-h.x),L=h.y+b/v*(l.y-h.y);n.beginPath(),n.arc(g,L,it,0,Math.PI*2),n.fill()}}n.globalCompositeOperation="source-over"})(),n.lineCap="butt",n.lineJoin="miter"},Ue=t=>n=>{const{type:e,points:r}=t;if(e==="erase")return!1;const{topLeft:a,bottomRight:i}=ft(t)(),s=i.x-a.x,o=i.y-a.y;if(!S({at:{x:a.x,y:a.y},width:Math.max(s,10),height:Math.max(o,10)})(n))return!1;for(let h=0;h<r.length-1;h++){const l={start:r[h],end:r[h+1]};if(_t(l)({at:n,width:1,height:1}))return!0}return!1},ft=t=>()=>{const{points:n}=t;let e=n[0].x,r=n[0].y,a=n[0].x,i=n[0].y;for(const s of n)s.x<e&&(e=s.x),s.y<r&&(r=s.y),s.x>a&&(a=s.x),s.y>i&&(i=s.y);return{topLeft:{x:e,y:r},bottomRight:{x:a,y:i}}},Ne=t=>{if(t.type==="erase")return s=>!1;const{topLeft:n,bottomRight:e}=ft(t)(),r=e.x-n.x,a=e.y-n.y,i=I({at:{x:n.x,y:n.y},width:Math.max(r,10),height:Math.max(a,10)});return s=>i(s)},Xe={color:"red",brushWeight:3},it=50,Ye=t=>{if(t.points.length<1)throw new Error("not enough points to draw scribble");if(t.brushWeight&&t.brushWeight<1)throw new Error('brushWeight must be at least "1"');const n=Ue(t),e=Ne(t),r=o=>n(o),a=ft(t),i=De(t),s=o=>{i(o)};return{id:t.id??R(),name:"scribble",drawShape:i,draw:s,hitbox:r,shapeHitbox:n,efficientHitbox:e,getBoundingBox:a}},$e=t=>n=>{const{at:e,radiusX:r,radiusY:a,color:i,stroke:s}={...Vt,...t};if(n.beginPath(),n.ellipse(e.x,e.y,r,a,0,0,2*Math.PI),n.fillStyle=i,n.fill(),s){const{color:o,width:c,dash:h}=s;n.strokeStyle=o,n.lineWidth=c,n.setLineDash(h||[]),n.stroke(),n.setLineDash([])}n.closePath()},Ge=t=>n=>{const e=n.x-t.at.x,r=n.y-t.at.y,a={...St,...t.stroke},i=t.radiusX+a.width/2,s=t.radiusY+a.width/2;return e*e/(i*i)+r*r/(s*s)<=1},Yt=t=>()=>{const{at:n,radiusX:e,radiusY:r}=t,{width:a}={...St,...t.stroke};return{topLeft:{x:n.x-(e+a/2),y:n.y-(r+a/2)},bottomRight:{x:n.x+(e+a/2),y:n.y+(r+a/2)}}},Ve=t=>{const{topLeft:n,bottomRight:e}=Yt(t)(),r=I({at:{x:n.x,y:n.y},width:e.x-n.x,height:e.y-n.y});return a=>r(a)},tt=t=>{const{at:n,textArea:e}={...Vt,...t};if(!e)throw new Error("no text area provided");const{text:r}=e,{fontSize:a}={...j,...r};return{x:n.x-a,y:n.y-a}},je=t=>{if(!t.textArea)return;const n=tt(t),e=w(t.textArea,n),{width:r,height:a}=N(e),i=S({at:e.at,width:r,height:a});return s=>i(s)},$t=t=>{if(!t.textArea)return;const n=tt(t),e=w(t.textArea,n),r=X(e);return a=>r(a)},Gt=t=>{if(!t.textArea)return;const n=tt(t),e=w(t.textArea,n),r=Y(e);return a=>r(a)},qe=t=>{const n=$t(t),e=Gt(t);if(!(!n||!e))return r=>{n(r),e(r)}},Vt=re,Ze=t=>{if(t.radiusX<0||t.radiusY<0)throw new Error("radius must be positive");const n=$e(t),e=Ge(t),r=je(t),a=Ve(t),i=d=>(r==null?void 0:r(d))||e(d),s=Yt(t),o=qe(t),c=$t(t),h=Gt(t),l=d=>{n(d),o==null||o(d)},f=(d,v)=>{if(!t.textArea)return;const b=tt(t),g=w(t.textArea,b);q(d,g,v)};return{id:R(),name:"ellipse",draw:l,drawShape:n,drawTextArea:o,drawTextAreaMatte:c,drawText:h,hitbox:i,shapeHitbox:e,textHitbox:r,efficientHitbox:a,getBoundingBox:s,activateTextArea:f}},Je=ae,Ke=Ae,Qe=ie,tn=se,en=Ee,nn=ge,rn=Ie,jt=Oe,an=Ye,sn=Ze,Un={arrow:Ke,circle:Qe,line:Je,rect:tn,square:en,triangle:nn,uturn:rn,cross:jt,scribble:an,ellipse:sn};function V(t){"@babel/helpers - typeof";return V=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},V(t)}var on=/^\s+/,cn=/\s+$/;function u(t,n){if(t=t||"",n=n||{},t instanceof u)return t;if(!(this instanceof u))return new u(t,n);var e=hn(t);this._originalInput=t,this._r=e.r,this._g=e.g,this._b=e.b,this._a=e.a,this._roundA=Math.round(100*this._a)/100,this._format=n.format||e.format,this._gradientType=n.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=e.ok}u.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var n=this.toRgb();return(n.r*299+n.g*587+n.b*114)/1e3},getLuminance:function(){var n=this.toRgb(),e,r,a,i,s,o;return e=n.r/255,r=n.g/255,a=n.b/255,e<=.03928?i=e/12.92:i=Math.pow((e+.055)/1.055,2.4),r<=.03928?s=r/12.92:s=Math.pow((r+.055)/1.055,2.4),a<=.03928?o=a/12.92:o=Math.pow((a+.055)/1.055,2.4),.2126*i+.7152*s+.0722*o},setAlpha:function(n){return this._a=qt(n),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var n=wt(this._r,this._g,this._b);return{h:n.h*360,s:n.s,v:n.v,a:this._a}},toHsvString:function(){var n=wt(this._r,this._g,this._b),e=Math.round(n.h*360),r=Math.round(n.s*100),a=Math.round(n.v*100);return this._a==1?"hsv("+e+", "+r+"%, "+a+"%)":"hsva("+e+", "+r+"%, "+a+"%, "+this._roundA+")"},toHsl:function(){var n=yt(this._r,this._g,this._b);return{h:n.h*360,s:n.s,l:n.l,a:this._a}},toHslString:function(){var n=yt(this._r,this._g,this._b),e=Math.round(n.h*360),r=Math.round(n.s*100),a=Math.round(n.l*100);return this._a==1?"hsl("+e+", "+r+"%, "+a+"%)":"hsla("+e+", "+r+"%, "+a+"%, "+this._roundA+")"},toHex:function(n){return mt(this._r,this._g,this._b,n)},toHexString:function(n){return"#"+this.toHex(n)},toHex8:function(n){return dn(this._r,this._g,this._b,this._a,n)},toHex8String:function(n){return"#"+this.toHex8(n)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(x(this._r,255)*100)+"%",g:Math.round(x(this._g,255)*100)+"%",b:Math.round(x(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(x(this._r,255)*100)+"%, "+Math.round(x(this._g,255)*100)+"%, "+Math.round(x(this._b,255)*100)+"%)":"rgba("+Math.round(x(this._r,255)*100)+"%, "+Math.round(x(this._g,255)*100)+"%, "+Math.round(x(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:Tn[mt(this._r,this._g,this._b,!0)]||!1},toFilter:function(n){var e="#"+At(this._r,this._g,this._b,this._a),r=e,a=this._gradientType?"GradientType = 1, ":"";if(n){var i=u(n);r="#"+At(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+a+"startColorstr="+e+",endColorstr="+r+")"},toString:function(n){var e=!!n;n=n||this._format;var r=!1,a=this._a<1&&this._a>=0,i=!e&&a&&(n==="hex"||n==="hex6"||n==="hex3"||n==="hex4"||n==="hex8"||n==="name");return i?n==="name"&&this._a===0?this.toName():this.toRgbString():(n==="rgb"&&(r=this.toRgbString()),n==="prgb"&&(r=this.toPercentageRgbString()),(n==="hex"||n==="hex6")&&(r=this.toHexString()),n==="hex3"&&(r=this.toHexString(!0)),n==="hex4"&&(r=this.toHex8String(!0)),n==="hex8"&&(r=this.toHex8String()),n==="name"&&(r=this.toName()),n==="hsl"&&(r=this.toHslString()),n==="hsv"&&(r=this.toHsvString()),r||this.toHexString())},clone:function(){return u(this.toString())},_applyModification:function(n,e){var r=n.apply(null,[this].concat([].slice.call(e)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(vn,arguments)},brighten:function(){return this._applyModification(yn,arguments)},darken:function(){return this._applyModification(wn,arguments)},desaturate:function(){return this._applyModification(gn,arguments)},saturate:function(){return this._applyModification(xn,arguments)},greyscale:function(){return this._applyModification(bn,arguments)},spin:function(){return this._applyModification(mn,arguments)},_applyCombination:function(n,e){return n.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(Mn,arguments)},complement:function(){return this._applyCombination(An,arguments)},monochromatic:function(){return this._applyCombination(_n,arguments)},splitcomplement:function(){return this._applyCombination(pn,arguments)},triad:function(){return this._applyCombination(pt,[3])},tetrad:function(){return this._applyCombination(pt,[4])}};u.fromRatio=function(t,n){if(V(t)=="object"){var e={};for(var r in t)t.hasOwnProperty(r)&&(r==="a"?e[r]=t[r]:e[r]=O(t[r]));t=e}return u(t,n)};function hn(t){var n={r:0,g:0,b:0},e=1,r=null,a=null,i=null,s=!1,o=!1;return typeof t=="string"&&(t=Cn(t)),V(t)=="object"&&(T(t.r)&&T(t.g)&&T(t.b)?(n=un(t.r,t.g,t.b),s=!0,o=String(t.r).substr(-1)==="%"?"prgb":"rgb"):T(t.h)&&T(t.s)&&T(t.v)?(r=O(t.s),a=O(t.v),n=fn(t.h,r,a),s=!0,o="hsv"):T(t.h)&&T(t.s)&&T(t.l)&&(r=O(t.s),i=O(t.l),n=ln(t.h,r,i),s=!0,o="hsl"),t.hasOwnProperty("a")&&(e=t.a)),e=qt(e),{ok:s,format:t.format||o,r:Math.min(255,Math.max(n.r,0)),g:Math.min(255,Math.max(n.g,0)),b:Math.min(255,Math.max(n.b,0)),a:e}}function un(t,n,e){return{r:x(t,255)*255,g:x(n,255)*255,b:x(e,255)*255}}function yt(t,n,e){t=x(t,255),n=x(n,255),e=x(e,255);var r=Math.max(t,n,e),a=Math.min(t,n,e),i,s,o=(r+a)/2;if(r==a)i=s=0;else{var c=r-a;switch(s=o>.5?c/(2-r-a):c/(r+a),r){case t:i=(n-e)/c+(n<e?6:0);break;case n:i=(e-t)/c+2;break;case e:i=(t-n)/c+4;break}i/=6}return{h:i,s,l:o}}function ln(t,n,e){var r,a,i;t=x(t,360),n=x(n,100),e=x(e,100);function s(h,l,f){return f<0&&(f+=1),f>1&&(f-=1),f<1/6?h+(l-h)*6*f:f<1/2?l:f<2/3?h+(l-h)*(2/3-f)*6:h}if(n===0)r=a=i=e;else{var o=e<.5?e*(1+n):e+n-e*n,c=2*e-o;r=s(c,o,t+1/3),a=s(c,o,t),i=s(c,o,t-1/3)}return{r:r*255,g:a*255,b:i*255}}function wt(t,n,e){t=x(t,255),n=x(n,255),e=x(e,255);var r=Math.max(t,n,e),a=Math.min(t,n,e),i,s,o=r,c=r-a;if(s=r===0?0:c/r,r==a)i=0;else{switch(r){case t:i=(n-e)/c+(n<e?6:0);break;case n:i=(e-t)/c+2;break;case e:i=(t-n)/c+4;break}i/=6}return{h:i,s,v:o}}function fn(t,n,e){t=x(t,360)*6,n=x(n,100),e=x(e,100);var r=Math.floor(t),a=t-r,i=e*(1-n),s=e*(1-a*n),o=e*(1-(1-a)*n),c=r%6,h=[e,s,i,i,o,e][c],l=[o,e,e,s,i,i][c],f=[i,i,o,e,e,s][c];return{r:h*255,g:l*255,b:f*255}}function mt(t,n,e,r){var a=[_(Math.round(t).toString(16)),_(Math.round(n).toString(16)),_(Math.round(e).toString(16))];return r&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0):a.join("")}function dn(t,n,e,r,a){var i=[_(Math.round(t).toString(16)),_(Math.round(n).toString(16)),_(Math.round(e).toString(16)),_(Zt(r))];return a&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)&&i[3].charAt(0)==i[3].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0)+i[3].charAt(0):i.join("")}function At(t,n,e,r){var a=[_(Zt(r)),_(Math.round(t).toString(16)),_(Math.round(n).toString(16)),_(Math.round(e).toString(16))];return a.join("")}u.equals=function(t,n){return!t||!n?!1:u(t).toRgbString()==u(n).toRgbString()};u.random=function(){return u.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function gn(t,n){n=n===0?0:n||10;var e=u(t).toHsl();return e.s-=n/100,e.s=et(e.s),u(e)}function xn(t,n){n=n===0?0:n||10;var e=u(t).toHsl();return e.s+=n/100,e.s=et(e.s),u(e)}function bn(t){return u(t).desaturate(100)}function vn(t,n){n=n===0?0:n||10;var e=u(t).toHsl();return e.l+=n/100,e.l=et(e.l),u(e)}function yn(t,n){n=n===0?0:n||10;var e=u(t).toRgb();return e.r=Math.max(0,Math.min(255,e.r-Math.round(255*-(n/100)))),e.g=Math.max(0,Math.min(255,e.g-Math.round(255*-(n/100)))),e.b=Math.max(0,Math.min(255,e.b-Math.round(255*-(n/100)))),u(e)}function wn(t,n){n=n===0?0:n||10;var e=u(t).toHsl();return e.l-=n/100,e.l=et(e.l),u(e)}function mn(t,n){var e=u(t).toHsl(),r=(e.h+n)%360;return e.h=r<0?360+r:r,u(e)}function An(t){var n=u(t).toHsl();return n.h=(n.h+180)%360,u(n)}function pt(t,n){if(isNaN(n)||n<=0)throw new Error("Argument to polyad must be a positive number");for(var e=u(t).toHsl(),r=[u(t)],a=360/n,i=1;i<n;i++)r.push(u({h:(e.h+i*a)%360,s:e.s,l:e.l}));return r}function pn(t){var n=u(t).toHsl(),e=n.h;return[u(t),u({h:(e+72)%360,s:n.s,l:n.l}),u({h:(e+216)%360,s:n.s,l:n.l})]}function Mn(t,n,e){n=n||6,e=e||30;var r=u(t).toHsl(),a=360/e,i=[u(t)];for(r.h=(r.h-(a*n>>1)+720)%360;--n;)r.h=(r.h+a)%360,i.push(u(r));return i}function _n(t,n){n=n||6;for(var e=u(t).toHsv(),r=e.h,a=e.s,i=e.v,s=[],o=1/n;n--;)s.push(u({h:r,s:a,v:i})),i=(i+o)%1;return s}u.mix=function(t,n,e){e=e===0?0:e||50;var r=u(t).toRgb(),a=u(n).toRgb(),i=e/100,s={r:(a.r-r.r)*i+r.r,g:(a.g-r.g)*i+r.g,b:(a.b-r.b)*i+r.b,a:(a.a-r.a)*i+r.a};return u(s)};u.readability=function(t,n){var e=u(t),r=u(n);return(Math.max(e.getLuminance(),r.getLuminance())+.05)/(Math.min(e.getLuminance(),r.getLuminance())+.05)};u.isReadable=function(t,n,e){var r=u.readability(t,n),a,i;switch(i=!1,a=kn(e),a.level+a.size){case"AAsmall":case"AAAlarge":i=r>=4.5;break;case"AAlarge":i=r>=3;break;case"AAAsmall":i=r>=7;break}return i};u.mostReadable=function(t,n,e){var r=null,a=0,i,s,o,c;e=e||{},s=e.includeFallbackColors,o=e.level,c=e.size;for(var h=0;h<n.length;h++)i=u.readability(t,n[h]),i>a&&(a=i,r=u(n[h]));return u.isReadable(t,r,{level:o,size:c})||!s?r:(e.includeFallbackColors=!1,u.mostReadable(t,["#fff","#000"],e))};var ct=u.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Tn=u.hexNames=Sn(ct);function Sn(t){var n={};for(var e in t)t.hasOwnProperty(e)&&(n[t[e]]=e);return n}function qt(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function x(t,n){Hn(t)&&(t="100%");var e=En(t);return t=Math.min(n,Math.max(0,parseFloat(t))),e&&(t=parseInt(t*n,10)/100),Math.abs(t-n)<1e-6?1:t%n/parseFloat(n)}function et(t){return Math.min(1,Math.max(0,t))}function A(t){return parseInt(t,16)}function Hn(t){return typeof t=="string"&&t.indexOf(".")!=-1&&parseFloat(t)===1}function En(t){return typeof t=="string"&&t.indexOf("%")!=-1}function _(t){return t.length==1?"0"+t:""+t}function O(t){return t<=1&&(t=t*100+"%"),t}function Zt(t){return Math.round(parseFloat(t)*255).toString(16)}function Mt(t){return A(t)/255}var M=function(){var t="[-\\+]?\\d+%?",n="[-\\+]?\\d*\\.\\d+%?",e="(?:"+n+")|(?:"+t+")",r="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?",a="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?";return{CSS_UNIT:new RegExp(e),rgb:new RegExp("rgb"+r),rgba:new RegExp("rgba"+a),hsl:new RegExp("hsl"+r),hsla:new RegExp("hsla"+a),hsv:new RegExp("hsv"+r),hsva:new RegExp("hsva"+a),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function T(t){return!!M.CSS_UNIT.exec(t)}function Cn(t){t=t.replace(on,"").replace(cn,"").toLowerCase();var n=!1;if(ct[t])t=ct[t],n=!0;else if(t=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var e;return(e=M.rgb.exec(t))?{r:e[1],g:e[2],b:e[3]}:(e=M.rgba.exec(t))?{r:e[1],g:e[2],b:e[3],a:e[4]}:(e=M.hsl.exec(t))?{h:e[1],s:e[2],l:e[3]}:(e=M.hsla.exec(t))?{h:e[1],s:e[2],l:e[3],a:e[4]}:(e=M.hsv.exec(t))?{h:e[1],s:e[2],v:e[3]}:(e=M.hsva.exec(t))?{h:e[1],s:e[2],v:e[3],a:e[4]}:(e=M.hex8.exec(t))?{r:A(e[1]),g:A(e[2]),b:A(e[3]),a:Mt(e[4]),format:n?"name":"hex8"}:(e=M.hex6.exec(t))?{r:A(e[1]),g:A(e[2]),b:A(e[3]),format:n?"name":"hex"}:(e=M.hex4.exec(t))?{r:A(e[1]+""+e[1]),g:A(e[2]+""+e[2]),b:A(e[3]+""+e[3]),a:Mt(e[4]+""+e[4]),format:n?"name":"hex8"}:(e=M.hex3.exec(t))?{r:A(e[1]+""+e[1]),g:A(e[2]+""+e[2]),b:A(e[3]+""+e[3]),format:n?"name":"hex"}:!1}function kn(t){var n,e;return t=t||{level:"AA",size:"small"},n=(t.level||"AA").toUpperCase(),e=(t.size||"small").toLowerCase(),n!=="AA"&&n!=="AAA"&&(n="AA"),e!=="small"&&e!=="large"&&(e="small"),{level:n,size:e}}const U=t=>{if(!t)throw new Error("canvas not found");const n="value"in t?t.value:t;if(!n)throw new Error("canvas not found");const e=n.getContext("2d");if(!e)throw new Error("2d context not found");return e},Ln=()=>{const{class:t}=oe();return G(()=>{if(!t)return[];if(typeof t!="string")throw new Error("class attribute must be a string");return t.split(" ")})},Rn=(t,n)=>{let e;return()=>{clearTimeout(e),e=setTimeout(t,n)}},Bn=.5,In=5;function Pn(t){const n=C(1),e=C({x:0,y:0}),r=i=>{if(!i.ctrlKey)return;i.preventDefault();const s=t.value;if(!s)return;const o=s.getBoundingClientRect(),c=i.clientX-o.left,h=i.clientY-o.top,l=i.deltaY<0?1.03:.97,f=Math.min(In,Math.max(Bn,n.value*l));e.value.x=c-(c-e.value.x)*(f/n.value),e.value.y=h-(h-e.value.y)*(f/n.value),n.value=f,a()},a=()=>{const i=U(t);i.resetTransform(),i.translate(e.value.x,e.value.y),i.scale(n.value,n.value)};return Ht(()=>{const i=t.value;if(!i)throw new Error("Canvas ref is not defined");i.addEventListener("wheel",r,{passive:!1})}),Et(()=>{const i=t.value;i&&i.removeEventListener("wheel",r)}),{scale:n,origin:e}}const zn=t=>{const n=rt("pan-zoom-scale",0),e=rt("pan-zoom-pan-x",0),r=rt("pan-zoom-pan-y",0),a=()=>{const s=U(t),{a:o,e:c,f:h}=s.getTransform();n.value=o,e.value=c,r.value=h},i=()=>{U(t)};return Ht(()=>{t.value&&(t.value.addEventListener("wheel",a),t.value.addEventListener("mousedown",a),t.value.addEventListener("mouseup",a),setTimeout(()=>i(),0))}),Et(()=>{t.value&&(t.value.removeEventListener("wheel",a),t.value.removeEventListener("mousedown",a),t.value.removeEventListener("mouseup",a))}),{track:a,apply:i,scale:n,panX:e,panY:r}},Wn=["width","height"],Fn=["width","height"],Nn=ce({__name:"ResponsiveCanvas",props:{color:{},patternColor:{},canvasWidth:{},canvasHeight:{}},emits:["canvasRef","widthChange","heightChange"],setup(t,{emit:n}){const e=C(0),r=C(0),a=C(!0),i=C(),s=C(),o=t,c=G(()=>(o==null?void 0:o.canvasWidth)??5e3),h=G(()=>(o==null?void 0:o.canvasHeight)??3e3),l=n,f=["w-full","h-full","relative","overflow-auto"],d=Ln(),v=G(()=>[...f,...d.value]),b=y=>{i.value=y,l("canvasRef",y)},g=C(),{height:L,width:B}=he(g),P=()=>{e.value=c.value,r.value=h.value},$=async()=>g.value??new Promise(y=>{const m=setInterval(()=>{g.value&&(clearInterval(m),y(g.value))},100)}),nt=async()=>new Promise(y=>{const m=setInterval(()=>{s.value&&(y(U(s.value)),clearInterval(m))},100)}),H=async()=>{const y=await nt();y.clearRect(0,0,e.value,r.value);const m=75,E=(z,W)=>{jt({at:{x:z,y:W},size:2,color:o.patternColor}).draw(y)},Jt=e.value,Kt=r.value;for(let z=m/2;z<Jt;z+=m)for(let W=m/2;W<Kt;W+=m)E(z,W)},p=Rn(H,250);(async()=>{H();const y=await $(),m=r.value/2-y.clientHeight/2;y.scrollTop=m;const E=e.value/2-y.clientWidth/2;y.scrollLeft=E,a.value=!1})(),F(L,()=>{P(),H(),l("widthChange",e.value)}),F(B,()=>{P(),H(),l("heightChange",r.value)}),F([c,h],()=>{P(),H(),l("widthChange",e.value),l("heightChange",r.value)}),F(()=>o.patternColor,H),ue({canvasWidth:e,canvasHeight:r,getParentEl:$});const dt=Pn(i);return zn(i),F(dt.scale,()=>{const{scale:y,origin:m}=dt,E=U(s.value);E.clearRect(0,0,e.value,r.value),E.resetTransform(),E.translate(m.value.x,m.value.y),E.scale(y.value,y.value),p()}),(y,m)=>(vt(),gt("div",{ref_key:"parentEl",ref:g,class:at(v.value),id:"responsive-canvas-container"},[a.value?(vt(),gt("div",{key:0,style:xt({backgroundColor:y.color}),class:"absolute top-0 left-0 w-full h-full"},null,4)):le("",!0),bt("canvas",{ref:b,width:e.value,height:r.value,class:at([`w-[${e.value}px]`,`h-[${r.value}px]`]),id:"responsive-canvas"},null,10,Wn),bt("canvas",{ref_key:"bgCanvas",ref:s,width:e.value,height:r.value,style:xt({backgroundColor:y.color}),class:at([`w-[${e.value}px]`,`h-[${r.value}px]`,"absolute","top-0","-z-10","pointer-events-none"])},null,14,Fn)],2))}});export{Nn as _,en as a,Ke as b,Qe as c,Rn as d,rn as e,U as g,Je as l,tn as r,Un as s,u as t,Ln as u};
