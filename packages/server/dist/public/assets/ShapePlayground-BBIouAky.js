import{c as t,d as z,a as D,b as G,_ as M,s as B,A as N}from"./ResponsiveCanvas.vue_vue_type_script_setup_true_lang-D8CiXWrW.js";import{f as R,n as g,m as C,d as U,G as W,o as S,c as P,e as _,w as T,C as E,a as y,t as A,H as O,x as $,F as I,D as L}from"./index-BEDsS_T4.js";import{_ as H,a as V}from"./InputRange.vue_vue_type_script_setup_true_lang-akmC6FDl.js";const b=i=>{if(!i)throw new Error("canvas not found");const s="value"in i?i.value:i;if(!s)throw new Error("canvas not found");const l=s.getContext("2d");if(!l)throw new Error("2d context not found");return l},Y=t.GREEN_500,F=t.RED_500,q=t.YELLOW_500,X=(i,s)=>{const l=R(!1),d=R(4),o=R(99),c=R(0),n=g(()=>o.value<1?"00":o.value<10?`0${o.value}`:o.value>99?"":o.value.toString()),e=document.createElement("canvas"),v=()=>{if(!i.value)throw new Error("target canvas not found");const{width:p,height:f}=i.value.getBoundingClientRect();e.width=p,e.height=f,e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.pointerEvents="none";const m=document.getElementById("responsive-canvas-container");if(!m)throw new Error("Canvas container not found");m.appendChild(e)},u=p=>{const f=s.value.findLast(x=>x.hitbox(p)),m=s.value.findLast(x=>{var k;return(k=x.textHitbox)==null?void 0:k.call(x,p)}),h={at:p,radius:2,color:Y+n.value};m?h.color=q+n.value:f&&(h.color=F+n.value);const w=b(e);D(h).draw(w)},a=async()=>{if(b(e).clearRect(0,0,e.width,e.height),c.value=0,!e||!l.value)return;const{width:f,height:m}=e.getBoundingClientRect();for(let h=0;h<m;h+=d.value)for(let w=0;w<f;w+=d.value)c.value%2e4===0&&await new Promise(x=>setTimeout(x,10)),u({x:w,y:h}),c.value++};C(l,a);const r=z(a,500);return C(d,r),C(o,r),C(s,r),setTimeout(v,500),{heatmapActive:l,heatmapOpacity:o,heatmapResolution:d,runHeatmap:a,runHeatmapDebounced:r,pointsSampled:c}},j={key:0,class:"flex items-center gap-3 text-white h-6 mt-1 text-sm font-bold"},J=U({__name:"Toolbar",props:{canvas:{},items:{},draw:{type:Function}},setup(i){const s=i,{items:l,canvas:d}=W(s),{heatmapActive:o,heatmapOpacity:c,heatmapResolution:n}=X(d,l),e=g(()=>o.value?"Hide Heatmap":"Show Heatmap"),v=()=>{var u,a;(a=(u=l.value[2]).activateTextArea)==null||a.call(u,r=>{console.log("value",r)})};return(u,a)=>(S(),P(I,null,[_(H,{onClick:u.draw},{default:T(()=>a[3]||(a[3]=[L("Redraw")])),_:1},8,["onClick"]),_(H,{onClick:a[0]||(a[0]=r=>o.value=!E(o))},{default:T(()=>[L(A(e.value),1)]),_:1}),_(H,{onClick:v},{default:T(()=>a[4]||(a[4]=[L(" Micro Control ")])),_:1}),E(o)?(S(),P("div",j,[y("div",null,[y("p",null,"Opacity "+A(E(c)),1),_(V,{modelValue:E(c),"onUpdate:modelValue":a[1]||(a[1]=r=>O(c)?c.value=r:null),modelModifiers:{number:!0},min:"0",max:"100"},null,8,["modelValue"])]),y("div",null,[y("p",null,"Resolution "+A(E(n)),1),_(V,{modelValue:E(n),"onUpdate:modelValue":a[2]||(a[2]=r=>O(n)?n.value=r:null),modelModifiers:{number:!0},min:"1",max:"10"},null,8,["modelValue"])])])):$("",!0)],64))}}),K={class:"h-full w-full"},Q={class:"absolute m-3 flex gap-3 z-50"},oe=U({__name:"ShapePlayground",setup(i){const s=R(),l=G(),d=g(()=>l.value?t.GRAY_800:t.GRAY_200),o=R([]),c=g(()=>(l.value?t.GRAY_200:t.GRAY_700)+"15"),n=()=>{const e=b(s);e.clearRect(0,0,e.canvas.width,e.canvas.height);const{circle:v,uturn:u,cross:a,rect:r,square:p}=B;o.value.push(v({at:{x:200,y:200},radius:50,color:t.BLUE_500,stroke:{color:t.BLUE_700,width:10},textArea:{text:{content:"51",color:t.WHITE,fontSize:20},color:t.TRANSPARENT}})),o.value.push(u({at:{x:600,y:100},downDistance:50,upDistance:50,lineWidth:10,color:t.BLUE_500,rotation:Math.PI*.2,spacing:20,textArea:{color:t.PURPLE_500,activeColor:t.PURPLE_600,text:{content:"5",color:t.WHITE,fontSize:20}}}));const f=B.line({start:{x:100,y:100},end:{x:600,y:900},color:t.GRAY_900,width:10,textArea:{color:t.PURPLE_500,activeColor:t.PURPLE_600,text:{content:"5",color:t.WHITE,fontSize:20}}});o.value.push(f),o.value.push(a({at:{x:500,y:300},color:t.SLATE_600,size:150,rotation:Math.PI/.6,borderRadius:10,lineWidth:80})),o.value.push(p({at:{x:600,y:400},size:120,rotation:Math.PI/.7,color:t.GREEN_600,borderRadius:25,textArea:{text:{content:"13",color:t.WHITE,fontSize:20},color:N}})),o.value.forEach(m=>m.draw(e))};return document.addEventListener("resize",n),document.addEventListener("keyup",e=>{e.code==="Space"&&n()}),setTimeout(n,100),(e,v)=>(S(),P("div",K,[y("div",Q,[_(J,{canvas:s.value,items:o.value,draw:n},null,8,["canvas","items"])]),_(M,{onCanvasRef:v[0]||(v[0]=u=>s.value=u),color:d.value,"pattern-color":c.value,"open-world-factor":1},null,8,["color","pattern-color"])]))}});export{oe as default};
