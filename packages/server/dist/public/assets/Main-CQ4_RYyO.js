import{v as _,d as $,G as C,V as m,o as l,c as v,Z as I,J as O,W as V,x as ge,F as S,f as E,s as u,a as b,b as i,w as s,e as y,t as A,D as F,B as h,$ as le,a0 as re,a1 as xe,a2 as $e,a3 as X,a4 as be,g as L,a5 as ye,a6 as H,K as Y,a7 as Ce,a8 as ke,a9 as we,aa as Ae,ab as Q,E as ie,u as G,N as se,ac as ee,ad as Me}from"./index-BauKbB-4.js";import{a as ze,u as Ie}from"./Graph.vue_vue_type_script_setup_true_lang-7isHUvaQ.js";import{a as T,b as q,c as Z,u as ue,s as Se,d as Te,p as j,e as z,f as K,g as B,h as Ne,i as te,_ as Fe}from"./GraphProduct.vue_vue_type_script_setup_true_lang-BvBe-TTq.js";import{u as Ee}from"./useGraphTutorial-Cbl7N3se.js";import{_ as P}from"./Icon.vue_vue_type_script_setup_true_lang-DSRcHQgC.js";import{d as Re}from"./ResponsiveCanvas.vue_vue_type_script_setup_true_lang-CO0BbGB8.js";import{_ as oe}from"./Button.vue_vue_type_script_setup_true_lang-cxTUj0Qs.js";import"./TutorialHint.vue_vue_type_script_setup_true_lang-DWZG_nza.js";const Le={persistentStorageKey:"graph-sandbox"},Pe={light:{color:_.GRAY_300,textColor:_.GRAY_900},dark:{color:_.GRAY_600,textColor:_.GRAY_100},girl:{color:_.PINK_100,textColor:_.PINK_800}},D=$({__name:"GNode",props:{size:{default:60},borderSize:{}},setup(a){const e=C(()=>Pe[m.value.themeName.value]),t=a,o=C(()=>Math.round(Math.max(1,Math.log(t.size))));return(n,c)=>(l(),v("div",{class:O(["flex","font-bold","items-center","justify-center","rounded-full"]),style:V({color:e.value.textColor,border:`${o.value}px solid ${e.value.textColor}`,backgroundColor:e.value.color,height:`${n.size}px`,width:`${n.size}px`})},[I(n.$slots,"default")],4))}}),Ve={class:"flex flex-col gap-4"},Be={class:"overflow-auto"},De={class:"flex items-center gap-4"},Ge={class:"leading-[15px]"},Ue={key:0,class:"leading-[15px] text-[8px]"},We={key:0,class:"opacity-60"},He=$({__name:"AdjacencyListDisplay",setup(a){const{weightedAdjacencyList:e}=ge(m.value),t=n=>{var c;return(c=m.value.getNode(n))==null?void 0:c.label},o=C(()=>m.value.settings.value.displayEdgeLabels);return(n,c)=>(l(),v("div",Ve,[(l(!0),v(S,null,E(u(e),(f,g)=>(l(),v("div",{key:g,class:"flex items-center"},[b("div",null,[i(D,null,{default:s(()=>[y(A(t(g)),1)]),_:2},1024)]),i(P,{icon:"arrow_right",class:"text-4xl"}),b("div",Be,[b("div",De,[(l(!0),v(S,null,E(f,p=>(l(),v("div",{key:p.id},[i(D,{class:"relative flex flex-col"},{default:s(()=>[b("span",Ge,A(p.label),1),o.value?(l(),v("span",Ue," Cost "+A(p.weight),1)):F("",!0)]),_:2},1024)]))),128)),f.length===0?(l(),v("h2",We," None ")):F("",!0)])])]))),128))]))}}),je=$({__name:"AdjacencyList",setup(a){return(e,t)=>(l(),v(S,null,[t[0]||(t[0]=b("h2",{class:"text-xl font-bold mb-2"},"Adjacency List",-1)),i(T,{secondary:"",class:"p-4 rounded-lg max-h-[200px] overflow-auto"},{default:s(()=>[i(He)]),_:1})],64))}}),Ke=["onMouseenter","onMouseleave"],de=$({__name:"PopoverTooltip",props:{offset:{default:4}},setup(a){return(e,t)=>(l(),h(q,{offset:e.offset},{activator:s(({toggle:o})=>[b("div",{onMouseenter:o,onMouseleave:o},[I(e.$slots,"default")],40,Ke)]),default:s(()=>[I(e.$slots,"content")]),_:3},8,["offset"]))}}),Oe={class:"text-xl font-bold text-center flex items-center justify-center overflow-hidden p-[3px]"},Ye=$({__name:"TransitionMatrixLabel",props:{toNode:{},fromNode:{},weight:{}},setup(a){return(e,t)=>(l(),v("div",Oe,[i(de,null,{content:s(()=>[i(T,{class:"flex items-center py-2 px-3 rounded-md"},{default:s(()=>[i(D,{size:30},{default:s(()=>[y(A(e.toNode.label),1)]),_:1}),i(P,{class:"text-2xl",icon:"arrow_right"}),i(D,{size:30},{default:s(()=>[y(A(e.fromNode.label),1)]),_:1})]),_:1})]),default:s(()=>[i(Z,{secondary:"",class:"h-10 w-10 cursor-default grid place-items-center rounded-md"},{default:s(()=>[y(A(e.weight),1)]),_:1})]),_:1})]))}}),Xe={key:0,class:"flex py-6 items-center"},qe=$({__name:"TransitionMatrixDisplay",setup(a){const{transitionMatrix:e}=ze(m.value),t=ue(),o={background:`
      linear-gradient(
        ${t.value.secondary},
        ${t.value.secondary}
      )
      50%
      50%/calc(100% - 10px)
      calc(100% - 10px) no-repeat,
      linear-gradient(
        90deg,
        ${t.value.text}
        10%,
        ${_.TRANSPARENT}
        10%,
        ${_.TRANSPARENT}
        90%,
        ${t.value.text}
        90%
      )
      188%
      0`},n=C(()=>m.value.nodes.value);return(c,f)=>u(e).length!==0?(l(),v("div",Xe,[f[0]||(f[0]=b("div",{class:"text-xl font-bold px-5 text-nowrap"},"T =",-1)),b("div",{style:o,class:"p-4 rounded"},[(l(!0),v(S,null,E(u(e),(g,p)=>(l(),v("div",{key:"row-"+p,class:"flex"},[(l(!0),v(S,null,E(g,(r,d)=>(l(),v("div",{key:"col-"+d},[i(Ye,{"to-node":n.value[p],"from-node":n.value[d],weight:r},null,8,["to-node","from-node","weight"])]))),128))]))),128))])])):F("",!0)}}),Ze=$({__name:"TransitionMatrix",setup(a){return(e,t)=>(l(),v(S,null,[t[0]||(t[0]=b("div",{class:"flex items-end justify-between"},[b("h2",{class:"text-xl font-bold mb-2 mt-5"},"Transition Matrix")],-1)),i(T,{secondary:"",class:"p-4 rounded-lg max-h-[300px] overflow-auto"},{default:s(()=>[i(qe)]),_:1})],64))}}),Je=["innerHTML"],R=$({__name:"ConnectedInfoBox",props:{tooltip:{}},setup(a){return(e,t)=>(l(),h(de,null,{content:s(()=>[i(T,{tertiary:"",class:"px-3 py-2 w-72 rounded-lg"},{default:s(()=>[b("div",{innerHTML:e.tooltip},null,8,Je)]),_:1})]),default:s(()=>[i(Z,{tertiary:"",class:"px-2 py-1 rounded-lg"},{default:s(()=>[I(e.$slots,"default")]),_:3})]),_:3}))}}),Qe={class:"mb-2 text-lg"},et={key:0,class:"flex flex-wrap gap-2"},tt={key:1,class:"flex flex-wrap gap-2"},ot=$({__name:"ConnectedInfo",setup(a){const e=C(()=>m.value.characteristics.isConnected.value),t=C(()=>m.value.characteristics.isWeaklyConnected.value),o=C(()=>m.value.settings.value.isGraphDirected),n={isConnected:"A graph is <b>connected</b> if there is a path between every pair of nodes/vertices.",isWeaklyConnected:"A directed graph is <b>weakly connected</b> if replacing all of its directed edges with undirected edges produces a connected (undirected) graph.",isStronglyConnected:"A directed graph is <b>strongly connected</b> if there is a directed path from every vertex to every other vertex."};return(c,f)=>(l(),v("div",Qe,[o.value?(l(),v("div",et,[e.value?(l(),h(R,{key:0,tooltip:n.isStronglyConnected},{default:s(()=>f[0]||(f[0]=[y(" Strongly Connected ")])),_:1},8,["tooltip"])):(l(),h(R,{key:1,tooltip:n.isStronglyConnected},{default:s(()=>f[1]||(f[1]=[y(" Not Strongly Connected ")])),_:1},8,["tooltip"])),t.value?(l(),h(R,{key:2,tooltip:n.isWeaklyConnected},{default:s(()=>f[2]||(f[2]=[y(" Weakly Connected ")])),_:1},8,["tooltip"])):(l(),h(R,{key:3,tooltip:n.isWeaklyConnected},{default:s(()=>f[3]||(f[3]=[y(" Not Weakly Connected ")])),_:1},8,["tooltip"]))])):(l(),v("div",tt,[e.value?(l(),h(R,{key:0,tooltip:n.isConnected},{default:s(()=>f[4]||(f[4]=[y(" Connected ")])),_:1},8,["tooltip"])):(l(),h(R,{key:1,tooltip:n.isConnected},{default:s(()=>f[5]||(f[5]=[y(" Not Connected ")])),_:1},8,["tooltip"]))]))]))}}),nt={key:0},at={key:1},lt=$({__name:"GraphInfoMenu",setup(a){const e=C(()=>m.value.nodes.value.length>0);return(t,o)=>(l(),h(q,null,{activator:s(n=>[I(t.$slots,"default",le(re(n)))]),default:s(()=>[i(T,{class:"flex flex-col text-xl font-bold p-3 w-[400px] rounded-lg gap-2"},{default:s(()=>[o[1]||(o[1]=b("h1",{class:"text-2xl mb-3"},"Graph Info",-1)),e.value?(l(),v("div",nt,[i(ot),i(je),i(Ze)])):(l(),v("div",at,o[0]||(o[0]=[b("h2",null,"Try adding some nodes first!",-1)])))]),_:1})]),_:3}))}});var rt={name:"BaseEditableHolder",extends:Se,emits:["update:modelValue","value-change"],props:{modelValue:{type:null,default:void 0},defaultValue:{type:null,default:void 0},name:{type:String,default:void 0},invalid:{type:Boolean,default:void 0},disabled:{type:Boolean,default:!1},formControl:{type:Object,default:void 0}},inject:{$parentInstance:{default:void 0},$pcForm:{default:void 0},$pcFormField:{default:void 0}},data:function(){return{d_value:this.defaultValue||this.modelValue}},watch:{modelValue:function(e){this.d_value=e},defaultValue:function(e){this.d_value=e},$formName:{immediate:!0,handler:function(e){var t,o;this.formField=((t=this.$pcForm)===null||t===void 0||(o=t.register)===null||o===void 0?void 0:o.call(t,e,this.$formControl))||{}}},$formControl:{immediate:!0,handler:function(e){var t,o;this.formField=((t=this.$pcForm)===null||t===void 0||(o=t.register)===null||o===void 0?void 0:o.call(t,this.$formName,e))||{}}},$formDefaultValue:{immediate:!0,handler:function(e){this.d_value!==e&&(this.d_value=e)}}},formField:{},methods:{writeValue:function(e,t){var o,n;this.controlled&&(this.d_value=e,this.$emit("update:modelValue",e)),this.$emit("value-change",e),(o=(n=this.formField).onChange)===null||o===void 0||o.call(n,{originalEvent:t,value:e})}},computed:{$filled:function(){return xe(this.d_value)},$invalid:function(){var e,t,o,n;return(e=(t=this.invalid)!==null&&t!==void 0?t:(o=this.$pcFormField)===null||o===void 0||(o=o.$field)===null||o===void 0?void 0:o.invalid)!==null&&e!==void 0?e:(n=this.$pcForm)===null||n===void 0||(n=n.states)===null||n===void 0||(n=n[this.$formName])===null||n===void 0?void 0:n.invalid},$formName:function(){var e;return this.name||((e=this.$formControl)===null||e===void 0?void 0:e.name)},$formControl:function(){var e;return this.formControl||((e=this.$pcFormField)===null||e===void 0?void 0:e.formControl)},$formDefaultValue:function(){var e,t,o,n;return(e=(t=this.d_value)!==null&&t!==void 0?t:(o=this.$pcFormField)===null||o===void 0?void 0:o.initialValue)!==null&&e!==void 0?e:(n=this.$pcForm)===null||n===void 0||(n=n.initialValues)===null||n===void 0?void 0:n[this.$formName]},controlled:function(){return this.$inProps.hasOwnProperty("modelValue")||!this.$inProps.hasOwnProperty("modelValue")&&!this.$inProps.hasOwnProperty("defaultValue")},filled:function(){return this.$filled}}},it={name:"BaseInput",extends:rt,props:{size:{type:String,default:null},fluid:{type:Boolean,default:null},variant:{type:String,default:null}},inject:{$parentInstance:{default:void 0},$pcFluid:{default:void 0}},computed:{$variant:function(){var e;return(e=this.variant)!==null&&e!==void 0?e:this.$primevue.config.inputStyle||this.$primevue.config.inputVariant},$fluid:function(){var e;return(e=this.fluid)!==null&&e!==void 0?e:!!this.$pcFluid},hasFluid:function(){return this.$fluid}}},st=function(e){var t=e.dt;return`
.p-inputtext {
    font-family: inherit;
    font-feature-settings: inherit;
    font-size: 1rem;
    color: `.concat(t("inputtext.color"),`;
    background: `).concat(t("inputtext.background"),`;
    padding-block: `).concat(t("inputtext.padding.y"),`;
    padding-inline: `).concat(t("inputtext.padding.x"),`;
    border: 1px solid `).concat(t("inputtext.border.color"),`;
    transition: background `).concat(t("inputtext.transition.duration"),", color ").concat(t("inputtext.transition.duration"),", border-color ").concat(t("inputtext.transition.duration"),", outline-color ").concat(t("inputtext.transition.duration"),", box-shadow ").concat(t("inputtext.transition.duration"),`;
    appearance: none;
    border-radius: `).concat(t("inputtext.border.radius"),`;
    outline-color: transparent;
    box-shadow: `).concat(t("inputtext.shadow"),`;
}

.p-inputtext:enabled:hover {
    border-color: `).concat(t("inputtext.hover.border.color"),`;
}

.p-inputtext:enabled:focus {
    border-color: `).concat(t("inputtext.focus.border.color"),`;
    box-shadow: `).concat(t("inputtext.focus.ring.shadow"),`;
    outline: `).concat(t("inputtext.focus.ring.width")," ").concat(t("inputtext.focus.ring.style")," ").concat(t("inputtext.focus.ring.color"),`;
    outline-offset: `).concat(t("inputtext.focus.ring.offset"),`;
}

.p-inputtext.p-invalid {
    border-color: `).concat(t("inputtext.invalid.border.color"),`;
}

.p-inputtext.p-variant-filled {
    background: `).concat(t("inputtext.filled.background"),`;
}

.p-inputtext.p-variant-filled:enabled:hover {
    background: `).concat(t("inputtext.filled.hover.background"),`;
}

.p-inputtext.p-variant-filled:enabled:focus {
    background: `).concat(t("inputtext.filled.focus.background"),`;
}

.p-inputtext:disabled {
    opacity: 1;
    background: `).concat(t("inputtext.disabled.background"),`;
    color: `).concat(t("inputtext.disabled.color"),`;
}

.p-inputtext::placeholder {
    color: `).concat(t("inputtext.placeholder.color"),`;
}

.p-inputtext.p-invalid::placeholder {
    color: `).concat(t("inputtext.invalid.placeholder.color"),`;
}

.p-inputtext-sm {
    font-size: `).concat(t("inputtext.sm.font.size"),`;
    padding-block: `).concat(t("inputtext.sm.padding.y"),`;
    padding-inline: `).concat(t("inputtext.sm.padding.x"),`;
}

.p-inputtext-lg {
    font-size: `).concat(t("inputtext.lg.font.size"),`;
    padding-block: `).concat(t("inputtext.lg.padding.y"),`;
    padding-inline: `).concat(t("inputtext.lg.padding.x"),`;
}

.p-inputtext-fluid {
    width: 100%;
}
`)},ut={root:function(e){var t=e.instance,o=e.props;return["p-inputtext p-component",{"p-filled":t.$filled,"p-inputtext-sm p-inputfield-sm":o.size==="small","p-inputtext-lg p-inputfield-lg":o.size==="large","p-invalid":t.$invalid,"p-variant-filled":t.$variant==="filled","p-inputtext-fluid":t.$fluid}]}},dt=$e.extend({name:"inputtext",theme:st,classes:ut}),ct={name:"BaseInputText",extends:it,style:dt,provide:function(){return{$pcInputText:this,$parentInstance:this}}},ce={name:"InputText",extends:ct,inheritAttrs:!1,methods:{onInput:function(e){this.writeValue(e.target.value,e)}},computed:{attrs:function(){return X(this.ptmi("root",{context:{filled:this.$filled,disabled:this.disabled}}),this.formField)}}},pt=["value","disabled","aria-invalid"];function ft(a,e,t,o,n,c){return l(),v("input",X({type:"text",class:a.cx("root"),value:a.d_value,disabled:a.disabled,"aria-invalid":a.$invalid||void 0,onInput:e[0]||(e[0]=function(){return c.onInput&&c.onInput.apply(c,arguments)})},c.attrs),null,16,pt)}ce.render=ft;const vt=$({__name:"InputText",setup(a){return(e,t)=>(l(),h(u(ce)))}}),mt=$({__name:"GInputText",setup(a){return(e,t)=>(l(),h(vt))}}),_t={class:"rounded-lg mb-2"},ht={class:"w-full mt-2"},gt={key:2},xt={key:0,class:"mt-4 w-full"},$t={key:1},bt={class:"text-xl font-bold mt-4 mb-2"},yt={class:"flex flex-wrap items-center gap-2"},Ct=["onClick"],kt=$({__name:"CollaborativeSessionMenu",setup(a){const e=be(),{navigate:t}=Te(),{connectToRoom:o,isConnected:n,connectedRoomId:c,disconnectFromRoom:f,collaborators:g,collaboratorCount:p,meAsACollaborator:r}=Ce,d=C(()=>`${window.location.origin}?rid=${c.value}`),x=L(!1),w=Re(()=>{x.value=!1},2e3),N=L(!1),me=()=>{try{navigator.clipboard.writeText(d.value),x.value=!0,w()}catch(W){console.error("Failed to copy link to clipboard",W)}},_e=async()=>{N.value=!0,await o({roomId:ke(),productId:we.productId,graph:m.value}),e.push({query:{rid:c.value}}),N.value=!1},he=()=>{f(),e.push({query:{rid:void 0}})};return(W,k)=>{const J=ye("tooltip");return l(),h(q,null,{activator:s(M=>[I(W.$slots,"default",le(re(M)))]),default:s(()=>[i(T,{class:"flex flex-col p-3 w-[400px] rounded-lg"},{default:s(()=>[k[4]||(k[4]=b("h1",{class:"text-2xl font-bold mb-3"},"Collaborate",-1)),k[5]||(k[5]=b("h2",{class:"text-xl font-bold mb-2"},"My Name",-1)),b("div",_t,[i(mt,{modelValue:u(H).name,"onUpdate:modelValue":k[0]||(k[0]=M=>u(H).name=M),disabled:u(n)||N.value,id:"collab-name",class:"w-full",placeholder:"Pick a name for others to see"},null,8,["modelValue","disabled"])]),b("div",ht,[!u(n)&&!N.value?(l(),h(Z,{key:0,onClick:_e,contrast:"",disabled:!u(H).name,class:"w-full"},{default:s(()=>[k[1]||(k[1]=y(" Generate Link ")),i(P,{icon:"link",class:"ml-2"})]),_:1},8,["disabled"])):N.value?(l(),h(oe,{key:1,disabled:"",class:"w-full"},{default:s(()=>k[2]||(k[2]=[y(" Preparing Room... ")])),_:1})):(l(),v("div",gt,[i(T,{tertiary:"",onClick:me,class:"group p-2 rounded-md cursor-pointer flex justify-between items-center"},{default:s(()=>[b("span",null,A(d.value),1),x.value?F("",!0):(l(),h(P,{key:0,icon:"content_copy",class:"group-hover:opacity-100 opacity-0"})),x.value?(l(),h(P,{key:1,icon:"check",class:"text-green-400"})):F("",!0)]),_:1})]))]),u(n)?(l(),v("div",xt,[i(oe,{onClick:he,color:u(_).RED_600,class:"w-full"},{default:s(()=>k[3]||(k[3]=[y(" Disconnect ")])),_:1},8,["color"])])):F("",!0),u(n)&&u(r)?(l(),v("div",$t,[b("h2",bt," Collaborators ("+A(u(p))+") ",1),b("div",yt,[Y((l(),v("div",{style:V({backgroundColor:u(r).color}),class:"text-gray-300 font-bold rounded-md px-3 py-1"},[y(A(u(r).name)+" (You) ",1)],4)),[[J,{value:`You are in ${u(j)[u(r).productId].name}`,pt:{text:"bg-magic"}},void 0,{bottom:!0}]]),(l(!0),v(S,null,E(u(g),M=>Y((l(),v("button",{onClick:Gt=>u(t)(u(j)[M.productId]),key:M.id,style:V({backgroundColor:M.color}),class:"text-gray-300 font-bold rounded-md px-3 py-1"},[y(A(M.name),1)],12,Ct)),[[J,`${M.name} is in ${u(j)[M.productId].name}`]])),128))])])):F("",!0)]),_:1})]),_:3})}}}),wt=$({__name:"IslandToolbar",setup(a){const e=Ee(m.value,[{dismiss:"onNodeAdded",hint:"Double click on the canvas to add a node."},{dismiss:"onEdgeAdded",hint:"Hover node to show anchors, drag between them to add an edge."}]);e.start();const t=()=>{const{activateAnnotation:g,deactivateAnnotation:p,annotationActive:r}=m.value;r.value?p():g(),m.value.canvasFocused.value=!0},o=()=>m.value.shortcutActions.undo.value(),n=()=>m.value.shortcutActions.redo.value(),c=C(()=>{const{annotationActive:g,canUndo:p,canUndoAnnotation:r,settings:d}=m.value;return g.value?r.value:d.value.interactive?p.value:!1}),f=C(()=>{const{annotationActive:g,canRedo:p,canRedoAnnotation:r,settings:d}=m.value;return g.value?r.value:d.value.interactive?p.value:!1});return(g,p)=>(l(),h(Ne,{hint:u(e)},{default:s(()=>[i(B,{class:"gap-0"},{default:s(()=>[i(z,{onClick:p[0]||(p[0]=r=>u(m).settings.value.displayEdgeLabels=!0),active:u(m).settings.value.displayEdgeLabels,icon:"label_outline"},null,8,["active"]),i(K),i(z,{onClick:p[1]||(p[1]=r=>u(m).settings.value.displayEdgeLabels=!1),active:!u(m).settings.value.displayEdgeLabels,icon:"label_off_outline"},null,8,["active"])]),_:1}),i(B,{class:"gap-0"},{default:s(()=>[i(z,{onClick:p[2]||(p[2]=r=>u(m).settings.value.isGraphDirected=!0),active:u(m).settings.value.isGraphDirected,icon:"arrow_right_alt"},null,8,["active"]),i(K),i(z,{onClick:p[3]||(p[3]=r=>u(m).settings.value.isGraphDirected=!1),active:!u(m).settings.value.isGraphDirected,icon:"remove"},null,8,["active"])]),_:1}),i(B,{class:"gap-0"},{default:s(()=>[i(z,{onClick:o,disabled:!c.value,icon:"undo"},null,8,["disabled"]),i(K),i(z,{onClick:n,disabled:!f.value,icon:"redo"},null,8,["disabled"])]),_:1}),i(B,null,{default:s(()=>[i(z,{onClick:t,active:u(m).annotationActive.value,icon:"edit"},null,8,["active"]),i(lt,null,{default:s(({toggle:r,isOpen:d})=>[i(z,{onClick:r,active:d,icon:"info_outline"},null,8,["onClick","active"])]),_:1}),i(kt,null,{default:s(({toggle:r,isOpen:d})=>[i(z,{onClick:r,active:d,icon:"group"},null,8,["onClick","active"])]),_:1})]),_:1})]),_:1},8,["hint"]))}}),U="markup",At=["XS","SM","MD","LG","XL"],ne="MD",Mt=[_.BLACK,_.BLUE_600,_.RED_600,_.GREEN_600,_.YELLOW_600],ae=_.BLACK,zt={XS:25,SM:30,MD:35,LG:40,XL:45},pe={XS:6,SM:8,MD:10,LG:12,XL:14},It={},St={class:"flex flex-col gap-1"};function Tt(a,e){return l(),v("div",St,[I(a.$slots,"default")])}const fe=Ae(It,[["render",Tt]]),Nt=$({__name:"RadioButton",props:{outlineColor:{default:_.WHITE},color:{default:_.GRAY_700},active:{type:Boolean,default:!1}},setup(a){const e=a,t=Q(e,"outlineColor"),o=te(t),n=C(()=>(o.value.isDark()?o.value.lighten(30):o.value.darken(30)).toHexString()),c=Q(e,"color"),f=te(c),g=C(()=>f.value.isDark()?_.WHITE:_.BLACK),p=C(()=>e.active?e.outlineColor:d.value?n.value:_.TRANSPARENT),r=["cursor-pointer","rounded-xl","p-1","border-2"],d=L(!1);return(x,w)=>(l(),v("button",{onMouseenter:w[0]||(w[0]=N=>d.value=!0),onMouseleave:w[1]||(w[1]=N=>d.value=!1),class:O(r),style:V({borderColor:p.value,color:g.value})},[b("div",{class:O(["relative","w-8","h-8","rounded-md","flex","items-center","justify-center","text-sm"]),style:V({backgroundColor:e.color})},[I(x.$slots,"default")],4)],36))}}),ve=$({__name:"GRadioButton",setup(a){const e=ue();return(t,o)=>(l(),h(Nt,X(t.$attrs,{color:u(e).secondary,"outline-color":u(e).text}),{default:s(()=>[I(t.$slots,"default")]),_:3},16,["color","outline-color"]))}}),Ft=$({__name:"InputColor",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(a){const e=ie(a,"modelValue");return(t,o)=>(l(),h(fe,null,{default:s(()=>[(l(!0),v(S,null,E(u(Mt),n=>(l(),h(ve,{onClick:c=>e.value=n,key:n,active:e.value===n,color:n},null,8,["onClick","active","color"]))),128))]),_:1}))}}),Et=$({__name:"NodeEdgeColorInput",props:{graph:{},colorMap:{}},setup(a){const e=a,t=()=>{const r=Array.from(e.graph.focusedItemIds.value),d=new Set(r.map(w=>e.colorMap.get(w)));if(d.has(void 0)||d.size!==1)return;const x=d.values().next().value;return x||ae},o=L(t()),n=r=>{for(const d of e.graph.focusedItemIds.value)e.colorMap.set(d,r);o.value=r},c=({id:r})=>{o.value&&e.colorMap.set(r,o.value)},f=async()=>{e.graph.focusedItemIds.value.size!==0&&(await new Promise(r=>setTimeout(r,0)),o.value=t())};e.graph.subscribe("onNodeAdded",c),e.graph.subscribe("onEdgeAdded",c),e.graph.subscribe("onFocusChange",f);const{setTheme:g}=G(e.graph,U+"-preview");return g("linkPreviewColor",()=>o.value??ae),(r,d)=>(l(),h(Ft,{"onUpdate:modelValue":n,"model-value":o.value},null,8,["model-value"]))}}),Rt=$({__name:"InputSize",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(a){const e=ie(a,"modelValue");return(t,o)=>(l(),h(fe,null,{default:s(()=>[(l(!0),v(S,null,E(u(At),n=>(l(),h(ve,{onClick:c=>e.value=n,key:n,active:e.value===n},{default:s(()=>[y(A(n),1)]),_:2},1032,["onClick","active"]))),128))]),_:1}))}}),Lt=$({__name:"NodeEdgeSizeInput",props:{graph:{},sizeMap:{}},setup(a){const e=a,t=()=>{const r=Array.from(e.graph.focusedItemIds.value),d=new Set(r.map(w=>e.sizeMap.get(w)));if(d.has(void 0)||d.size!==1)return;const x=d.values().next().value;return x||ne},o=L(t()),n=r=>{for(const d of e.graph.focusedItemIds.value)e.sizeMap.set(d,r);o.value=r,e.graph.updateEncapsulatedNodeBox()},c=({id:r})=>{o.value&&e.sizeMap.set(r,o.value)},f=async()=>{e.graph.focusedItemIds.value.size!==0&&(await new Promise(r=>setTimeout(r,0)),o.value=t())};e.graph.subscribe("onNodeAdded",c),e.graph.subscribe("onEdgeAdded",c),e.graph.subscribe("onFocusChange",f);const{setTheme:g}=G(e.graph,U+"-preview");return g("linkPreviewWidth",()=>pe[o.value??ne]),(r,d)=>(l(),h(Rt,{"onUpdate:modelValue":n,"model-value":o.value},null,8,["model-value"]))}}),Pt={class:"flex flex-col gap-3"},Vt=$({__name:"IslandMarkup",props:{graph:{},sizeMap:{},colorMap:{}},setup(a){const e=a;return(t,o)=>(l(),v("div",Pt,[i(T,{class:"p-2 rounded-xl"},{default:s(()=>[i(Et,{graph:e.graph,colorMap:t.colorMap},null,8,["graph","colorMap"])]),_:1}),i(T,{class:"p-2 rounded-xl"},{default:s(()=>[i(Lt,{graph:e.graph,sizeMap:t.sizeMap},null,8,["graph","sizeMap"])]),_:1})]))}}),Bt=a=>{const{setTheme:e,removeAllThemes:t}=G(a,U),o=se("markup-color-map",new Map),n=d=>{if(o.value.get(d.id))return a.baseTheme.value.nodeColor},c=d=>{const x=o.value.get(d.id);if(x)return a.isFocused(d.id)?ee(x,30):x},f=d=>{const x=o.value.get(d.id);if(x)return a.isFocused(d.id)?ee(x,30):x},g=()=>({dark:_.WHITE,light:_.BLACK,girl:_.PURPLE_800})[a.themeName.value]+"80";return{colorize:()=>{e("nodeColor",n),e("nodeBorderColor",c),e("nodeFocusBorderColor",c),e("nodeAnchorColor",c),e("nodeAnchorColorWhenParentFocused",c),e("edgeColor",f),e("marqueeSelectionBoxColor",_.TRANSPARENT),e("marqueeEncapsulatedNodeBoxBorderColor",g),e("marqueeEncapsulatedNodeBoxColor",_.TRANSPARENT)},decolorize:()=>{t()},colorMap:o}},Dt=a=>{const{setTheme:e,removeAllThemes:t}=G(a,U),o=se("markup-size-map",new Map),n=p=>{const r=o.value.get(p.id);if(r)return zt[r]},c=p=>{const r=o.value.get(p.id);if(r)return pe[r]};return{size:()=>{e("nodeSize",n),e("edgeWidth",c)},desize:()=>{t()},sizeMap:o}},qt=$({__name:"Main",setup(a){const e=L(),t=Ie(e,Le),{colorize:o,colorMap:n}=Bt(t);o();const{size:c,sizeMap:f}=Dt(t);return c(),(g,p)=>(l(),h(Fe,{onGraphRef:p[0]||(p[0]=r=>e.value=r),graph:u(t)},{"top-center":s(()=>[i(wt)]),"center-left":s(()=>[Y(i(Vt,{graph:u(t),sizeMap:u(f),colorMap:u(n)},null,8,["graph","sizeMap","colorMap"]),[[Me,!u(t).annotationActive.value]])]),_:1},8,["graph"]))}});export{qt as default};
