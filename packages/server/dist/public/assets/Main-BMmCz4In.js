import{d as b,g as R,W as v,H as k,z as be,o as s,c as m,$ as S,e as C,t as $,K as J,X as G,C as y,w as r,a as g,y as Ce,F as B,f as F,v as c,b as l,E as L,a0 as ye,x as _,a1 as j,u as P,a2 as pe,a3 as ve,a4 as ke,a5 as ze,a6 as Me,a7 as we,a8 as q,L as Q,a9 as Ae,aa as Te,ab as Ee,ac as Ie,ad as ne,G as fe,O as me,ae,af as Ne}from"./index-X-1QUzvR.js";import{r as le,u as Se}from"./Graph.vue_vue_type_script_setup_true_lang-OJg9rFBy.js";import{a as ee,b as A,c as te,u as _e,s as Be,d as Le,p as X,e as N,f as Z,g as O,h as Re,i as ie,_ as Fe}from"./GraphProduct.vue_vue_type_script_setup_true_lang-D0k_89YM.js";import{g as Pe,u as De}from"./string-CSPQ6rjJ.js";import{_ as D}from"./Icon.vue_vue_type_script_setup_true_lang-BMKPNwt9.js";import{d as Ve}from"./ResponsiveCanvas.vue_vue_type_script_setup_true_lang-_FAHmvQA.js";import{_ as re}from"./Button.vue_vue_type_script_setup_true_lang-BPNDQ8Ec.js";import"./TutorialHint.vue_vue_type_script_setup_true_lang-DwSwWxVw.js";const Ge={persistentStorageKey:"graph-sandbox"},H=b({__name:"GNode",props:{size:{default:60},node:{}},setup(n){const e=n,t=R(le(v.value.getTheme,e.node)),o=k(()=>Math.round(Math.max(1,Math.log(e.size)))),a=()=>{v.value.setFocus([e.node.id])},u=setInterval(()=>{t.value=le(v.value.getTheme,e.node)},100);return be(()=>{clearInterval(u)}),(f,h)=>(s(),m("div",{onClick:a,class:J(["flex","font-bold","items-center","justify-center","rounded-full","cursor-pointer"]),style:G({color:t.value.nodeTextColor,border:`${o.value}px solid ${t.value.nodeBorderColor}`,backgroundColor:t.value.nodeColor,height:`${f.size}px`,width:`${f.size}px`})},[S(f.$slots,"default",{},()=>[C($(f.node.label),1)])],4))}}),Ue=["onMouseenter","onMouseleave"],W=b({__name:"PopoverTooltip",props:{offset:{default:4}},setup(n){return(e,t)=>(s(),y(ee,{offset:e.offset},{activator:r(({toggle:o})=>[g("div",{onMouseenter:o,onMouseleave:o},[S(e.$slots,"default")],40,Ue)]),default:r(()=>[S(e.$slots,"content")]),_:3},8,["offset"]))}}),Oe={class:"flex flex-col gap-4"},He={class:"overflow-auto"},We={class:"flex items-center gap-4"},je={class:"leading-[15px]"},Ye={key:0,class:"leading-[15px] text-[8px]"},Ke={key:0},qe={key:0,class:"opacity-60"},Xe=b({__name:"AdjacencyListDisplay",setup(n){const{weightedAdjacencyList:e}=Ce(v.value),t=a=>{const u=v.value.getNode(a);if(u===void 0)throw new Error("node not found");return u},o=k(()=>v.value.settings.value.displayEdgeLabels);return(a,u)=>(s(),m("div",Oe,[(s(!0),m(B,null,F(c(e),(f,h)=>(s(),m("div",{key:h,class:"flex items-center"},[g("div",null,[l(W,null,{content:r(()=>[l(A,{class:"px-3 py-2 rounded-md"},{default:r(()=>[g("b",null,$(t(h).label),1),u[0]||(u[0]=C(" links to ")),g("b",null,$(c(Pe)(f.map(d=>d.label))||"nothing"),1)]),_:2},1024)]),default:r(()=>[l(H,{node:t(h)},null,8,["node"])]),_:2},1024)]),l(D,{icon:"arrow_right",class:"text-4xl"}),g("div",He,[g("div",We,[(s(!0),m(B,null,F(f,d=>(s(),m("div",{key:d.id},[l(W,null,{content:r(()=>[l(A,{class:"p-2 rounded-md"},{default:r(()=>[g("b",null,$(d.label),1),u[2]||(u[2]=C(" links to ")),g("b",null,$(t(h).label),1),o.value?(s(),m("span",Ke,[u[1]||(u[1]=C(" with a cost of ")),g("b",null,$(d.weight),1)])):L("",!0)]),_:2},1024)]),default:r(()=>[l(H,{node:d,class:"relative flex flex-col"},{default:r(()=>[g("span",je,$(d.label),1),o.value?(s(),m("span",Ye," Cost "+$(d.weight),1)):L("",!0)]),_:2},1032,["node"])]),_:2},1024)]))),128)),f.length===0?(s(),m("h2",qe," None ")):L("",!0)])])]))),128))]))}}),Ze=b({__name:"AdjacencyList",setup(n){return(e,t)=>(s(),m(B,null,[t[0]||(t[0]=g("h2",{class:"text-xl font-bold mb-2"},"Adjacency List",-1)),l(A,{secondary:"",class:"p-4 rounded-lg max-h-[200px] overflow-auto"},{default:r(()=>[l(Xe)]),_:1})],64))}}),Je={class:"text-xl font-bold text-center flex items-center justify-center overflow-hidden p-[3px]"},Qe=b({__name:"TransitionMatrixLabel",props:{toNode:{},fromNode:{},weight:{}},setup(n){return(e,t)=>(s(),m("div",Je,[l(W,null,{content:r(()=>[l(A,{class:"flex items-center py-2 px-3 rounded-md"},{default:r(()=>[l(H,{node:e.toNode,size:30},null,8,["node"]),l(D,{class:"text-2xl",icon:"arrow_right"}),l(H,{node:e.fromNode,size:30},null,8,["node"])]),_:1})]),default:r(()=>[l(te,{secondary:"",class:"h-10 w-10 cursor-default grid place-items-center rounded-md"},{default:r(()=>[C($(e.weight),1)]),_:1})]),_:1})]))}}),et={key:0,class:"flex py-6 items-center"},tt=b({__name:"TransitionMatrixDisplay",setup(n){const{transitionMatrix:e}=ye(v.value),t=_e(),o={background:`
      linear-gradient(
        ${t.value.secondary},
        ${t.value.secondary}
      )
      50%
      50%/calc(100% - 10px)
      calc(100% - 10px) no-repeat,
      linear-gradient(
        90deg,
        ${t.value.text}
        10%,
        ${_.TRANSPARENT}
        10%,
        ${_.TRANSPARENT}
        90%,
        ${t.value.text}
        90%
      )
      188%
      0`},a=k(()=>v.value.nodes.value);return(u,f)=>c(e).length!==0?(s(),m("div",et,[f[0]||(f[0]=g("div",{class:"text-xl font-bold px-5 text-nowrap"},"T =",-1)),g("div",{style:o,class:"p-4 rounded"},[(s(!0),m(B,null,F(c(e),(h,d)=>(s(),m("div",{key:"row-"+d,class:"flex"},[(s(!0),m(B,null,F(h,(i,p)=>(s(),m("div",{key:"col-"+p},[l(Qe,{"to-node":a.value[d],"from-node":a.value[p],weight:i},null,8,["to-node","from-node","weight"])]))),128))]))),128))])])):L("",!0)}}),ot=b({__name:"TransitionMatrix",setup(n){return(e,t)=>(s(),m(B,null,[t[0]||(t[0]=g("div",{class:"flex items-end justify-between"},[g("h2",{class:"text-xl font-bold mb-2 mt-5"},"Transition Matrix")],-1)),l(A,{secondary:"",class:"p-4 rounded-lg max-h-[300px] overflow-auto"},{default:r(()=>[l(tt)]),_:1})],64))}}),nt=["innerHTML"],I=b({__name:"ConnectedInfoBox",props:{tooltip:{}},setup(n){return(e,t)=>(s(),y(W,null,{content:r(()=>[l(A,{tertiary:"",class:"px-3 py-2 w-72 rounded-lg"},{default:r(()=>[g("div",{innerHTML:e.tooltip},null,8,nt)]),_:1})]),default:r(()=>[l(te,j(e.$attrs,{tertiary:"",class:"px-2 py-1 flex items-center gap-1 rounded-lg"}),{default:r(()=>[S(e.$slots,"default"),l(D,{icon:"info_outline"})]),_:3},16)]),_:3}))}}),at="scc-colorizer",se=[_.RED_500,_.BLUE_500,_.GREEN_500,_.YELLOW_500,_.PURPLE_500,_.ORANGE_500],lt=n=>{const{setTheme:e,removeAllThemes:t}=P(n,at),o=f=>{const d=n.characteristics.nodeIdToStronglyConnectedComponent.value.get(f.id);if(d!==void 0)return se[d%se.length]};return{colorize:()=>{e("nodeBorderColor",o)},decolorize:()=>{t()}}},it="bipartite-colorizer",rt=n=>{const{setTheme:e,removeAllThemes:t}=P(n,it),o=f=>{if(!n.characteristics.isBipartite.value)return;const i=n.characteristics.nodeIdToBipartitePartition.value.get(f.id);if(i!==void 0)return i===0?_.RED_500:_.BLUE_500};return{colorize:()=>{e("nodeBorderColor",o)},decolorize:()=>{t()}}},st="cycle-colorizer",ce=[_.RED_500,_.BLUE_500,_.GREEN_500,_.YELLOW_500,_.PURPLE_500,_.ORANGE_500],ct=n=>{const{setTheme:e,removeAllThemes:t}=P(n,st),o=f=>{if(n.characteristics.isAcyclic.value)return;const i=n.characteristics.nodeIdToCycle.value.get(f.id);if(i!==void 0)return ce[i%ce.length]};return{colorize:()=>{e("nodeBorderColor",o)},decolorize:()=>{t()}}},ut={class:"mb-2 text-sm"},dt={key:0,class:"flex flex-wrap gap-2"},pt={key:1,class:"flex flex-wrap gap-2"},vt=b({__name:"ConnectedInfo",setup(n){const e=k(()=>v.value.characteristics.isConnected.value),t=k(()=>v.value.characteristics.isWeaklyConnected.value),o=k(()=>v.value.settings.value.isGraphDirected),a=k(()=>v.value.characteristics.stronglyConnectedComponents.value.map(U=>U.map(V=>V.label))),u=k(()=>v.value.characteristics.isBipartite.value),f=k(()=>v.value.characteristics.isAcyclic.value),h=k(()=>v.value.characteristics.isComplete.value),{colorize:d,decolorize:i}=lt(v.value),{colorize:p,decolorize:x}=rt(v.value),{colorize:z,decolorize:T}=ct(v.value),M={isConnected:"A graph is <b>connected</b> if there is a path between every pair of nodes/vertices.",isWeaklyConnected:"A directed graph is <b>weakly connected</b> if replacing all of its directed edges with undirected edges produces a connected (undirected) graph.",isStronglyConnected:"A directed graph is <b>strongly connected</b> if there is a directed path from every vertex to every other vertex.",stronglyConnectedComponents:"A <b>strongly connected component</b> or SCC in a directed graph is a maximal group of vertices where every vertex is reachable from every other vertex within the group. If you can travel between any two vertices in both directions (following the edges), they belong to the same SCC.",bipartite:"A graph is <b>bipartite</b> if its vertices can be divided into two disjoint sets U and V such that every edge connects a vertex in U to one in V.",acyclic:"A graph is <b>acyclic</b> if it has no cycles (loops). For example, A -> B -> C -> A is a cycle.",complete:"A graph is <b>complete</b> if every pair of distinct vertices is connected by a unique edge or if the graph is directed, by a pair of unique edges (one in each direction)."};return(K,U)=>(s(),m("div",ut,[o.value?(s(),m("div",dt,[l(I,{tooltip:M.isStronglyConnected},{default:r(()=>[C(" Strongly Connected? "+$(e.value?"Yes":"No"),1)]),_:1},8,["tooltip"]),l(I,{tooltip:M.isWeaklyConnected},{default:r(()=>[C(" Weakly Connected? "+$(t.value?"Yes":"No"),1)]),_:1},8,["tooltip"]),l(I,{onMouseenter:c(d),onMouseleave:c(i),tooltip:M.stronglyConnectedComponents},{default:r(()=>[C(" Strongly Connected Components: "+$(a.value.length),1)]),_:1},8,["onMouseenter","onMouseleave","tooltip"]),l(I,{onMouseenter:c(p),onMouseleave:c(x),tooltip:M.bipartite},{default:r(()=>[C(" Bipartite? "+$(u.value?"Yes":"No"),1)]),_:1},8,["onMouseenter","onMouseleave","tooltip"]),l(I,{onMouseenter:c(z),onMouseleave:c(T),tooltip:M.acyclic},{default:r(()=>[C(" Acyclic? "+$(f.value?"Yes":"No"),1)]),_:1},8,["onMouseenter","onMouseleave","tooltip"]),l(I,{tooltip:M.complete},{default:r(()=>[C(" Complete? "+$(h.value?"Yes":"No"),1)]),_:1},8,["tooltip"])])):(s(),m("div",pt,[l(I,{tooltip:M.isConnected},{default:r(()=>[C(" Connected? "+$(e.value?"Yes":"No"),1)]),_:1},8,["tooltip"]),l(I,{onMouseenter:c(p),onMouseleave:c(x),tooltip:M.bipartite},{default:r(()=>[C(" Bipartite? "+$(u.value?"Yes":"No"),1)]),_:1},8,["onMouseenter","onMouseleave","tooltip"]),l(I,{onMouseenter:c(z),onMouseleave:c(T),tooltip:M.acyclic},{default:r(()=>[C(" Acyclic? "+$(f.value?"Yes":"No"),1)]),_:1},8,["onMouseenter","onMouseleave","tooltip"]),l(I,{tooltip:M.complete},{default:r(()=>[C(" Complete? "+$(h.value?"Yes":"No"),1)]),_:1},8,["tooltip"])]))]))}}),ft={key:0},mt={key:1},_t=b({__name:"GraphInfoMenu",setup(n){const e=k(()=>v.value.nodes.value.length>0);return(t,o)=>(s(),y(ee,null,{activator:r(a=>[S(t.$slots,"default",pe(ve(a)))]),default:r(()=>[l(A,{class:"flex flex-col text-xl font-bold p-3 w-[400px] h-[600px] overflow-auto rounded-lg gap-2"},{default:r(()=>[o[1]||(o[1]=g("h1",{class:"text-2xl mb-3"},"Graph Info",-1)),e.value?(s(),m("div",ft,[l(vt),l(Ze),l(ot)])):(s(),m("div",mt,o[0]||(o[0]=[g("h2",null,"Try adding some nodes first!",-1)])))]),_:1})]),_:3}))}});var ht={name:"BaseEditableHolder",extends:Be,emits:["update:modelValue","value-change"],props:{modelValue:{type:null,default:void 0},defaultValue:{type:null,default:void 0},name:{type:String,default:void 0},invalid:{type:Boolean,default:void 0},disabled:{type:Boolean,default:!1},formControl:{type:Object,default:void 0}},inject:{$parentInstance:{default:void 0},$pcForm:{default:void 0},$pcFormField:{default:void 0}},data:function(){return{d_value:this.defaultValue||this.modelValue}},watch:{modelValue:function(e){this.d_value=e},defaultValue:function(e){this.d_value=e},$formName:{immediate:!0,handler:function(e){var t,o;this.formField=((t=this.$pcForm)===null||t===void 0||(o=t.register)===null||o===void 0?void 0:o.call(t,e,this.$formControl))||{}}},$formControl:{immediate:!0,handler:function(e){var t,o;this.formField=((t=this.$pcForm)===null||t===void 0||(o=t.register)===null||o===void 0?void 0:o.call(t,this.$formName,e))||{}}},$formDefaultValue:{immediate:!0,handler:function(e){this.d_value!==e&&(this.d_value=e)}}},formField:{},methods:{writeValue:function(e,t){var o,a;this.controlled&&(this.d_value=e,this.$emit("update:modelValue",e)),this.$emit("value-change",e),(o=(a=this.formField).onChange)===null||o===void 0||o.call(a,{originalEvent:t,value:e})}},computed:{$filled:function(){return ke(this.d_value)},$invalid:function(){var e,t,o,a;return(e=(t=this.invalid)!==null&&t!==void 0?t:(o=this.$pcFormField)===null||o===void 0||(o=o.$field)===null||o===void 0?void 0:o.invalid)!==null&&e!==void 0?e:(a=this.$pcForm)===null||a===void 0||(a=a.states)===null||a===void 0||(a=a[this.$formName])===null||a===void 0?void 0:a.invalid},$formName:function(){var e;return this.name||((e=this.$formControl)===null||e===void 0?void 0:e.name)},$formControl:function(){var e;return this.formControl||((e=this.$pcFormField)===null||e===void 0?void 0:e.formControl)},$formDefaultValue:function(){var e,t,o,a;return(e=(t=this.d_value)!==null&&t!==void 0?t:(o=this.$pcFormField)===null||o===void 0?void 0:o.initialValue)!==null&&e!==void 0?e:(a=this.$pcForm)===null||a===void 0||(a=a.initialValues)===null||a===void 0?void 0:a[this.$formName]},controlled:function(){return this.$inProps.hasOwnProperty("modelValue")||!this.$inProps.hasOwnProperty("modelValue")&&!this.$inProps.hasOwnProperty("defaultValue")},filled:function(){return this.$filled}}},gt={name:"BaseInput",extends:ht,props:{size:{type:String,default:null},fluid:{type:Boolean,default:null},variant:{type:String,default:null}},inject:{$parentInstance:{default:void 0},$pcFluid:{default:void 0}},computed:{$variant:function(){var e;return(e=this.variant)!==null&&e!==void 0?e:this.$primevue.config.inputStyle||this.$primevue.config.inputVariant},$fluid:function(){var e;return(e=this.fluid)!==null&&e!==void 0?e:!!this.$pcFluid},hasFluid:function(){return this.$fluid}}},xt=function(e){var t=e.dt;return`
.p-inputtext {
    font-family: inherit;
    font-feature-settings: inherit;
    font-size: 1rem;
    color: `.concat(t("inputtext.color"),`;
    background: `).concat(t("inputtext.background"),`;
    padding-block: `).concat(t("inputtext.padding.y"),`;
    padding-inline: `).concat(t("inputtext.padding.x"),`;
    border: 1px solid `).concat(t("inputtext.border.color"),`;
    transition: background `).concat(t("inputtext.transition.duration"),", color ").concat(t("inputtext.transition.duration"),", border-color ").concat(t("inputtext.transition.duration"),", outline-color ").concat(t("inputtext.transition.duration"),", box-shadow ").concat(t("inputtext.transition.duration"),`;
    appearance: none;
    border-radius: `).concat(t("inputtext.border.radius"),`;
    outline-color: transparent;
    box-shadow: `).concat(t("inputtext.shadow"),`;
}

.p-inputtext:enabled:hover {
    border-color: `).concat(t("inputtext.hover.border.color"),`;
}

.p-inputtext:enabled:focus {
    border-color: `).concat(t("inputtext.focus.border.color"),`;
    box-shadow: `).concat(t("inputtext.focus.ring.shadow"),`;
    outline: `).concat(t("inputtext.focus.ring.width")," ").concat(t("inputtext.focus.ring.style")," ").concat(t("inputtext.focus.ring.color"),`;
    outline-offset: `).concat(t("inputtext.focus.ring.offset"),`;
}

.p-inputtext.p-invalid {
    border-color: `).concat(t("inputtext.invalid.border.color"),`;
}

.p-inputtext.p-variant-filled {
    background: `).concat(t("inputtext.filled.background"),`;
}

.p-inputtext.p-variant-filled:enabled:hover {
    background: `).concat(t("inputtext.filled.hover.background"),`;
}

.p-inputtext.p-variant-filled:enabled:focus {
    background: `).concat(t("inputtext.filled.focus.background"),`;
}

.p-inputtext:disabled {
    opacity: 1;
    background: `).concat(t("inputtext.disabled.background"),`;
    color: `).concat(t("inputtext.disabled.color"),`;
}

.p-inputtext::placeholder {
    color: `).concat(t("inputtext.placeholder.color"),`;
}

.p-inputtext.p-invalid::placeholder {
    color: `).concat(t("inputtext.invalid.placeholder.color"),`;
}

.p-inputtext-sm {
    font-size: `).concat(t("inputtext.sm.font.size"),`;
    padding-block: `).concat(t("inputtext.sm.padding.y"),`;
    padding-inline: `).concat(t("inputtext.sm.padding.x"),`;
}

.p-inputtext-lg {
    font-size: `).concat(t("inputtext.lg.font.size"),`;
    padding-block: `).concat(t("inputtext.lg.padding.y"),`;
    padding-inline: `).concat(t("inputtext.lg.padding.x"),`;
}

.p-inputtext-fluid {
    width: 100%;
}
`)},$t={root:function(e){var t=e.instance,o=e.props;return["p-inputtext p-component",{"p-filled":t.$filled,"p-inputtext-sm p-inputfield-sm":o.size==="small","p-inputtext-lg p-inputfield-lg":o.size==="large","p-invalid":t.$invalid,"p-variant-filled":t.$variant==="filled","p-inputtext-fluid":t.$fluid}]}},bt=ze.extend({name:"inputtext",theme:xt,classes:$t}),Ct={name:"BaseInputText",extends:gt,style:bt,provide:function(){return{$pcInputText:this,$parentInstance:this}}},he={name:"InputText",extends:Ct,inheritAttrs:!1,methods:{onInput:function(e){this.writeValue(e.target.value,e)}},computed:{attrs:function(){return j(this.ptmi("root",{context:{filled:this.$filled,disabled:this.disabled}}),this.formField)}}},yt=["value","disabled","aria-invalid"];function kt(n,e,t,o,a,u){return s(),m("input",j({type:"text",class:n.cx("root"),value:n.d_value,disabled:n.disabled,"aria-invalid":n.$invalid||void 0,onInput:e[0]||(e[0]=function(){return u.onInput&&u.onInput.apply(u,arguments)})},u.attrs),null,16,yt)}he.render=kt;const zt=b({__name:"InputText",setup(n){return(e,t)=>(s(),y(c(he)))}}),Mt=b({__name:"GInputText",setup(n){return(e,t)=>(s(),y(zt))}}),wt={class:"rounded-lg mb-2"},At={class:"w-full mt-2"},Tt={key:2},Et={key:0,class:"mt-4 w-full"},It={key:1},Nt={class:"text-xl font-bold mt-4 mb-2"},St={class:"flex flex-wrap items-center gap-2"},Bt=["onClick"],Lt=b({__name:"CollaborativeSessionMenu",setup(n){const e=Me(),{navigate:t}=Le(),{connectToRoom:o,isConnected:a,connectedRoomId:u,disconnectFromRoom:f,collaborators:h,collaboratorCount:d,meAsACollaborator:i}=Ae,p=k(()=>`${window.location.origin}?rid=${u.value}`),x=R(!1),z=Ve(()=>{x.value=!1},2e3),T=R(!1),M=()=>{try{navigator.clipboard.writeText(p.value),x.value=!0,z()}catch(V){console.error("Failed to copy link to clipboard",V)}},K=async()=>{T.value=!0,await o({roomId:Te(),productId:Ee.productId,graph:v.value}),e.push({query:{rid:u.value}}),T.value=!1},U=()=>{f(),e.push({query:{rid:void 0}})};return(V,w)=>{const oe=we("tooltip");return s(),y(ee,null,{activator:r(E=>[S(V.$slots,"default",pe(ve(E)))]),default:r(()=>[l(A,{class:"flex flex-col p-3 w-[400px] rounded-lg"},{default:r(()=>[w[4]||(w[4]=g("h1",{class:"text-2xl font-bold mb-3"},"Collaborate",-1)),w[5]||(w[5]=g("h2",{class:"text-xl font-bold mb-2"},"My Name",-1)),g("div",wt,[l(Mt,{modelValue:c(q).name,"onUpdate:modelValue":w[0]||(w[0]=E=>c(q).name=E),disabled:c(a)||T.value,id:"collab-name",class:"w-full",placeholder:"Pick a name for others to see"},null,8,["modelValue","disabled"])]),g("div",At,[!c(a)&&!T.value?(s(),y(te,{key:0,onClick:K,contrast:"",disabled:!c(q).name,class:"w-full"},{default:r(()=>[w[1]||(w[1]=C(" Generate Link ")),l(D,{icon:"link",class:"ml-2"})]),_:1},8,["disabled"])):T.value?(s(),y(re,{key:1,disabled:"",class:"w-full"},{default:r(()=>w[2]||(w[2]=[C(" Preparing Room... ")])),_:1})):(s(),m("div",Tt,[l(A,{tertiary:"",onClick:M,class:"group p-2 rounded-md cursor-pointer flex justify-between items-center"},{default:r(()=>[g("span",null,$(p.value),1),x.value?L("",!0):(s(),y(D,{key:0,icon:"content_copy",class:"group-hover:opacity-100 opacity-0"})),x.value?(s(),y(D,{key:1,icon:"check",class:"text-green-400"})):L("",!0)]),_:1})]))]),c(a)?(s(),m("div",Et,[l(re,{onClick:U,color:c(_).RED_600,class:"w-full"},{default:r(()=>w[3]||(w[3]=[C(" Disconnect ")])),_:1},8,["color"])])):L("",!0),c(a)&&c(i)?(s(),m("div",It,[g("h2",Nt," Collaborators ("+$(c(d))+") ",1),g("div",St,[Q((s(),m("div",{style:G({backgroundColor:c(i).color}),class:"text-gray-300 font-bold rounded-md px-3 py-1"},[C($(c(i).name)+" (You) ",1)],4)),[[oe,{value:`You are in ${c(X)[c(i).productId].name}`,pt:{text:"bg-magic"}},void 0,{bottom:!0}]]),(s(!0),m(B,null,F(c(h),E=>Q((s(),m("button",{onClick:Jt=>c(t)(c(X)[E.productId]),key:E.id,style:G({backgroundColor:E.color}),class:"text-gray-300 font-bold rounded-md px-3 py-1"},[C($(E.name),1)],12,Bt)),[[oe,`${E.name} is in ${c(X)[E.productId].name}`]])),128))])])):L("",!0)]),_:1})]),_:3})}}}),Rt=b({__name:"IslandToolbar",setup(n){const e=De(v.value,[{dismiss:"onNodeAdded",hint:"Double click on the canvas to add a node."},{dismiss:"onEdgeAdded",hint:"Hover node to show anchors, drag between them to add an edge."}]);e.start();const t=()=>{const{activateAnnotation:h,deactivateAnnotation:d,annotationActive:i}=v.value;i.value?d():h(),v.value.canvasFocused.value=!0},o=()=>v.value.shortcutActions.undo.value(),a=()=>v.value.shortcutActions.redo.value(),u=k(()=>{const{annotationActive:h,canUndo:d,canUndoAnnotation:i,settings:p}=v.value;return h.value?i.value:p.value.interactive?d.value:!1}),f=k(()=>{const{annotationActive:h,canRedo:d,canRedoAnnotation:i,settings:p}=v.value;return h.value?i.value:p.value.interactive?d.value:!1});return(h,d)=>(s(),y(Re,{hint:c(e)},{default:r(()=>[l(O,{class:"gap-0"},{default:r(()=>[l(N,{onClick:d[0]||(d[0]=i=>c(v).settings.value.displayEdgeLabels=!0),active:c(v).settings.value.displayEdgeLabels,icon:"label_outline"},null,8,["active"]),l(Z),l(N,{onClick:d[1]||(d[1]=i=>c(v).settings.value.displayEdgeLabels=!1),active:!c(v).settings.value.displayEdgeLabels,icon:"label_off_outline"},null,8,["active"])]),_:1}),l(O,{class:"gap-0"},{default:r(()=>[l(N,{onClick:d[2]||(d[2]=i=>c(v).settings.value.isGraphDirected=!0),active:c(v).settings.value.isGraphDirected,icon:"arrow_right_alt"},null,8,["active"]),l(Z),l(N,{onClick:d[3]||(d[3]=i=>c(v).settings.value.isGraphDirected=!1),active:!c(v).settings.value.isGraphDirected,icon:"remove"},null,8,["active"])]),_:1}),l(O,{class:"gap-0"},{default:r(()=>[l(N,{onClick:o,disabled:!u.value,icon:"undo"},null,8,["disabled"]),l(Z),l(N,{onClick:a,disabled:!f.value,icon:"redo"},null,8,["disabled"])]),_:1}),l(O,null,{default:r(()=>[l(N,{onClick:t,active:c(v).annotationActive.value,icon:"edit"},null,8,["active"]),l(_t,null,{default:r(({toggle:i,isOpen:p})=>[l(N,{onClick:i,active:p,icon:"info_outline"},null,8,["onClick","active"])]),_:1}),l(Lt,null,{default:r(({toggle:i,isOpen:p})=>[l(N,{onClick:i,active:p,icon:"group"},null,8,["onClick","active"])]),_:1})]),_:1})]),_:1},8,["hint"]))}}),Y="markup",Ft=["XS","SM","MD","LG","XL"],ue="MD",Pt=[_.BLACK,_.BLUE_600,_.RED_600,_.GREEN_600,_.YELLOW_600],de=_.BLACK,Dt={XS:25,SM:30,MD:35,LG:40,XL:45},ge={XS:6,SM:8,MD:10,LG:12,XL:14},Vt={},Gt={class:"flex flex-col gap-1"};function Ut(n,e){return s(),m("div",Gt,[S(n.$slots,"default")])}const xe=Ie(Vt,[["render",Ut]]),Ot=b({__name:"RadioButton",props:{outlineColor:{default:_.WHITE},color:{default:_.GRAY_700},active:{type:Boolean,default:!1}},setup(n){const e=n,t=ne(e,"outlineColor"),o=ie(t),a=k(()=>(o.value.isDark()?o.value.lighten(30):o.value.darken(30)).toHexString()),u=ne(e,"color"),f=ie(u),h=k(()=>f.value.isDark()?_.WHITE:_.BLACK),d=k(()=>e.active?e.outlineColor:p.value?a.value:_.TRANSPARENT),i=["cursor-pointer","rounded-xl","p-1","border-2"],p=R(!1);return(x,z)=>(s(),m("button",{onMouseenter:z[0]||(z[0]=T=>p.value=!0),onMouseleave:z[1]||(z[1]=T=>p.value=!1),class:J(i),style:G({borderColor:d.value,color:h.value})},[g("div",{class:J(["relative","w-8","h-8","rounded-md","flex","items-center","justify-center","text-sm"]),style:G({backgroundColor:e.color})},[S(x.$slots,"default")],4)],36))}}),$e=b({__name:"GRadioButton",setup(n){const e=_e();return(t,o)=>(s(),y(Ot,j(t.$attrs,{color:c(e).secondary,"outline-color":c(e).text}),{default:r(()=>[S(t.$slots,"default")]),_:3},16,["color","outline-color"]))}}),Ht=b({__name:"InputColor",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(n){const e=fe(n,"modelValue");return(t,o)=>(s(),y(xe,null,{default:r(()=>[(s(!0),m(B,null,F(c(Pt),a=>(s(),y($e,{onClick:u=>e.value=a,key:a,active:e.value===a,color:a},null,8,["onClick","active","color"]))),128))]),_:1}))}}),Wt=b({__name:"NodeEdgeColorInput",props:{graph:{},colorMap:{}},setup(n){const e=n,t=()=>{const i=Array.from(e.graph.focusedItemIds.value),p=new Set(i.map(z=>e.colorMap.get(z)));if(p.has(void 0)||p.size!==1)return;const x=p.values().next().value;return x||de},o=R(t()),a=i=>{for(const p of e.graph.focusedItemIds.value)e.colorMap.set(p,i);o.value=i},u=({id:i})=>{o.value&&e.colorMap.set(i,o.value)},f=async()=>{e.graph.focusedItemIds.value.size!==0&&(await new Promise(i=>setTimeout(i,0)),o.value=t())};e.graph.subscribe("onNodeAdded",u),e.graph.subscribe("onEdgeAdded",u),e.graph.subscribe("onFocusChange",f);const{setTheme:h}=P(e.graph,Y+"-preview");return h("linkPreviewColor",()=>o.value??de),(i,p)=>(s(),y(Ht,{"onUpdate:modelValue":a,"model-value":o.value},null,8,["model-value"]))}}),jt=b({__name:"InputSize",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(n){const e=fe(n,"modelValue");return(t,o)=>(s(),y(xe,null,{default:r(()=>[(s(!0),m(B,null,F(c(Ft),a=>(s(),y($e,{onClick:u=>e.value=a,key:a,active:e.value===a},{default:r(()=>[C($(a),1)]),_:2},1032,["onClick","active"]))),128))]),_:1}))}}),Yt=b({__name:"NodeEdgeSizeInput",props:{graph:{},sizeMap:{}},setup(n){const e=n,t=()=>{const i=Array.from(e.graph.focusedItemIds.value),p=new Set(i.map(z=>e.sizeMap.get(z)));if(p.has(void 0)||p.size!==1)return;const x=p.values().next().value;return x||ue},o=R(t()),a=i=>{for(const p of e.graph.focusedItemIds.value)e.sizeMap.set(p,i);o.value=i,e.graph.updateEncapsulatedNodeBox()},u=({id:i})=>{o.value&&e.sizeMap.set(i,o.value)},f=async()=>{e.graph.focusedItemIds.value.size!==0&&(await new Promise(i=>setTimeout(i,0)),o.value=t())};e.graph.subscribe("onNodeAdded",u),e.graph.subscribe("onEdgeAdded",u),e.graph.subscribe("onFocusChange",f);const{setTheme:h}=P(e.graph,Y+"-preview");return h("linkPreviewWidth",()=>ge[o.value??ue]),(i,p)=>(s(),y(jt,{"onUpdate:modelValue":a,"model-value":o.value},null,8,["model-value"]))}}),Kt={class:"flex flex-col gap-3"},qt=b({__name:"IslandMarkup",props:{graph:{},sizeMap:{},colorMap:{}},setup(n){const e=n;return(t,o)=>(s(),m("div",Kt,[l(A,{class:"p-2 rounded-xl"},{default:r(()=>[l(Wt,{graph:e.graph,colorMap:t.colorMap},null,8,["graph","colorMap"])]),_:1}),l(A,{class:"p-2 rounded-xl"},{default:r(()=>[l(Yt,{graph:e.graph,sizeMap:t.sizeMap},null,8,["graph","sizeMap"])]),_:1})]))}}),Xt=n=>{const{setTheme:e,removeAllThemes:t}=P(n,Y),o=me("markup-color-map",new Map),a=p=>{if(o.value.get(p.id))return n.baseTheme.value.nodeColor},u=p=>{const x=o.value.get(p.id);if(x)return n.isFocused(p.id)?ae(x,30):x},f=p=>{const x=o.value.get(p.id);if(x)return n.isFocused(p.id)?ae(x,30):x},h=()=>({dark:_.WHITE,light:_.BLACK,girl:_.PURPLE_800})[n.themeName.value]+"80";return{colorize:()=>{e("nodeColor",a),e("nodeBorderColor",u),e("nodeFocusBorderColor",u),e("nodeAnchorColor",u),e("nodeAnchorColorWhenParentFocused",u),e("edgeColor",f),e("marqueeSelectionBoxColor",_.TRANSPARENT),e("marqueeEncapsulatedNodeBoxBorderColor",h),e("marqueeEncapsulatedNodeBoxColor",_.TRANSPARENT)},decolorize:()=>{t()},colorMap:o}},Zt=n=>{const{setTheme:e,removeAllThemes:t}=P(n,Y),o=me("markup-size-map",new Map),a=d=>{const i=o.value.get(d.id);if(i)return Dt[i]},u=d=>{const i=o.value.get(d.id);if(i)return ge[i]};return{size:()=>{e("nodeSize",a),e("edgeWidth",u)},desize:()=>{t()},sizeMap:o}},ro=b({__name:"Main",setup(n){const e=R(),t=Se(e,Ge),{colorize:o,colorMap:a}=Xt(t);o();const{size:u,sizeMap:f}=Zt(t);return u(),(h,d)=>(s(),y(Fe,{onGraphRef:d[0]||(d[0]=i=>e.value=i),graph:c(t)},{"top-center":r(()=>[l(Rt)]),"center-left":r(()=>[Q(l(qt,{graph:c(t),sizeMap:c(f),colorMap:c(a)},null,8,["graph","sizeMap","colorMap"]),[[Ne,!c(t).annotationActive.value]])]),_:1},8,["graph"]))}});export{ro as default};
