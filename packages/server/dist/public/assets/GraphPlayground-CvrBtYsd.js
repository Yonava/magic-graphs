import{u as Q,n as te,g as W,C as le,a as se,b as ne,_ as ae}from"./Graph.vue_vue_type_script_setup_true_lang-Bprgm9ke.js";import{f as A,l as re,m as V,n as x,d as y,o as r,c as d,a as b,p as S,F as I,t as w,q as ie,s as K,u as de,b as D,v as ue,x as R,y as B,z as G,A as Z,e as h,B as N,w as j,C as m,D as F,E as ce}from"./index-CQQOVkFF.js";import{P as ge,R as ve,c as C,g as J,u as me}from"./ResponsiveCanvas.vue_vue_type_script_setup_true_lang-C3PeDXjJ.js";import{_ as q,a as be}from"./InputRange.vue_vue_type_script_setup_true_lang-n74QyzrC.js";const pe="element-highlight",Ee=1e3,fe=1e3,he="tutorial",Ce=(e,t)=>{const o=A(0),l=re(t);let s,n;const u=a=>{const{event:g,predicate:i}=typeof a.dismiss=="string"?{event:a.dismiss,predicate:()=>!0}:a.dismiss;if(g==="onInterval"){const T="interval"in a?a.interval:Ee;let k=0;const $=setInterval(()=>{i(++k)&&o.value++},T);return()=>clearInterval($)}const c=(...T)=>{(i==null?void 0:i(...T))&&o.value++};return e.subscribe(g,c),()=>e.unsubscribe(g,c)},p=()=>{var g,i;const a=l.value[o.value];if(a){if((g=a.onInit)==null||g.call(a),(i=a.precondition)!=null&&i.call(a,e)){o.value++;return}a!=null&&a.highlightElement&&(s=ye(a)),n=u(a.dismiss!=="onTimeout"?a:{hint:a.hint,dismiss:"onInterval",interval:a.after})}},E=(a,g)=>{var c;if(a<0)return o.value=0;if(a>l.value.length)return o.value=l.value.length;const i=l.value[g];(c=i==null?void 0:i.onDismiss)==null||c.call(i),n==null||n(),s==null||s(),p()};return V(o,E),V(l,()=>E(o.value,o.value)),p(),{currentStepIndex:o,currentStep:x(()=>l.value[o.value]),sequence:l,nextStep:()=>o.value++,previousStep:()=>o.value--,endTutorial:()=>o.value=l.value.length,restartTutorial:()=>o.value=0,isTutorialOver:x(()=>o.value>=l.value.length)}},ye=e=>{const{highlightElement:t}=e;if(!t)return()=>{};const{id:o,className:l}={id:typeof t=="string"?t:t.id,className:typeof t=="string"||!(t!=null&&t.className)?pe:t.className};if(!o)return()=>{};const s=document.getElementById(o);if(!s)throw new Error(`element with id ${o} not found`);return s.classList.add(l),()=>s.classList.remove(l)},v={reset:"reset",draggable:"draggable",nodeAnchors:"node-anchors",edgeLabels:"edge-labels",edgeLabelsEditable:"edge-labels-editable",userEditable:"user-editable",edgeType:"edge-type",edgeWeight:"edge-weight",nodeSize:"node-size",storageKey:"storage-key",clearLocalStorage:"clear-local-storage",persistentGraphClone:"persistent-graph-clone",testRoom:"test-room",log:"log",bfsColorize:"toggle-bfs-colorize"},_e=e=>({greeting:{hint:"Welcome to the graph editor tutorial",dismiss:"onClick"},goodbye:{hint:"Have fun editing graphs!",dismiss:"onTimeout",after:3e3},createNode:{hint:"Double click anywhere to add a node",dismiss:"onNodeAdded"},moveNode:{hint:"Drag a node to move it",dismiss:"onNodeDrop"},createEdge:{hint:"Create an edge by dragging an anchor onto another node",dismiss:"onEdgeAdded"},createUndirectedEdge:{hint:"Now create an undirected edge by toggling the edge type",highlightElement:v.edgeType,dismiss:{event:"onEdgeAdded",predicate:t=>t.type==="undirected"}},createSelfDirectedEdge:{hint:'You can even create self directed edges! Make sure you are in "directed" mode and drag an anchor inwards',highlightElement:v.edgeType,dismiss:{event:"onEdgeAdded",predicate:t=>t.to===t.from}},editEdgeWeight:{hint:"Edit the edge weight by clicking on it and typing a number",dismiss:"onEdgeWeightChange"},removeElement:Te(e)}),Te=e=>{let t=!1;const o=()=>t=!0,{setTheme:l,removeAllThemes:s}=Q(e,he);return{hint:"Remove an edge or node by clicking on it and hitting backspace/delete",dismiss:{event:"onInterval",predicate:()=>t},onInit:()=>{t=!1,l("nodeAnchorColor",n=>n.label==="1"?ge:ve),e.subscribe("onEdgeRemoved",o),e.subscribe("onNodeRemoved",o)},onDismiss:()=>{s(),e.unsubscribe("onEdgeRemoved",o),e.unsubscribe("onNodeRemoved",o)}}},Ae=e=>{const{greeting:t,createNode:o,moveNode:l,createEdge:s,createUndirectedEdge:n,editEdgeWeight:u,removeElement:p,goodbye:E}=_e(e);return[t,o,l,s,n,u,p,E]},Se=e=>({basics:Ae(e)}),Re=e=>Ce(e,Se(e).basics),Le=y({__name:"TutorialControls",props:{tutorial:{}},setup(e){return x(()=>`${e.tutorial.currentStepIndex.value+1} / ${e.tutorial.sequence.value.length}`),(t,o)=>(r(),d(I,null,[b("button",{onClick:o[0]||(o[0]=(...l)=>t.tutorial.previousStep&&t.tutorial.previousStep(...l)),class:S("bg-blue-600 text-white px-3 py-1 rounded-lg font-bold")},o[4]||(o[4]=[b("span",{class:"select-none"},"Previous Step",-1)])),b("button",{onClick:o[1]||(o[1]=(...l)=>t.tutorial.nextStep&&t.tutorial.nextStep(...l)),class:S("bg-blue-600 text-white px-3 py-1 rounded-lg font-bold")},o[5]||(o[5]=[b("span",{class:"select-none"},"Next Step",-1)])),b("button",{onClick:o[2]||(o[2]=(...l)=>t.tutorial.endTutorial&&t.tutorial.endTutorial(...l)),class:S("bg-blue-600 text-white px-3 py-1 rounded-lg font-bold")},o[6]||(o[6]=[b("span",{class:"select-none"},"End Tutorial",-1)])),b("button",{onClick:o[3]||(o[3]=(...l)=>t.tutorial.restartTutorial&&t.tutorial.restartTutorial(...l)),class:S("bg-blue-600 text-white px-3 py-1 rounded-lg font-bold")},o[7]||(o[7]=[b("span",{class:"select-none"},"Restart Tutorial",-1)]))],64))}}),Ne={class:"text-3xl font-bold"},Y=300,Ve=y({__name:"TutorialHint",props:{tutorial:{}},setup(e){const t=A(0),o=x(()=>{var n;return((n=e.tutorial.currentStep.value)==null?void 0:n.hint)??""}),l=A("");let s;return V(o,()=>{t.value=0,clearTimeout(s),s=setTimeout(()=>{l.value=o.value,t.value=1},Y+fe)},{immediate:!0}),(n,u)=>(r(),d("div",{class:S(["transition-opacity",`duration-[${Y}ms]`,"select-none","text-center"]),style:ie({opacity:t.value})},[b("h1",Ne,w(l.value),1)],6))}}),we="product/search-visualizer",Ie=(e,t)=>{const o=A({}),l=A(t),s=()=>{if(o.value={},!l.value)return;const n=te(e.nodes.value,e.edges.value);if(!n[l.value])return;let u=[l.value];const p=new Set(u);let E=0;for(;u.length>0;){const a=[];for(const g of u){o.value[g]=E;for(const i of n[g])p.has(i)||(p.add(i),a.push(i))}u=[],u.push(...a),E++}};return e.subscribe("onStructureChange",s),K(()=>e.unsubscribe("onStructureChange",s)),V(l,s),{bfsLevelRecord:de(o),startNode:l}},ke=[C.RED_600,C.ORANGE_600,C.YELLOW_600,C.GREEN_600,C.TEAL_600,C.BLUE_600,C.INDIGO_600,C.PURPLE_600],xe=e=>{var g;const t=A(!1),{setTheme:o,removeTheme:l}=Q(e,we),{bfsLevelRecord:s,startNode:n}=Ie(e,(g=e.nodes.value[0])==null?void 0:g.id),u=()=>{if(n.value===void 0){const[c]=e.nodes.value;c&&(n.value=c.id)}if(!e.nodes.value.find(c=>c.id===n.value)){const[c]=e.nodes.value;n.value=c?c.id:void 0}},p=i=>{if(e.isHighlighted(i.id))return;const c=s.value[i.id];if(c===void 0)return;const T=ke;return T[c%T.length]},E=()=>{o("nodeBorderColor",p),o("nodeAnchorColor",p),t.value=!0},a=()=>{l("nodeBorderColor"),l("nodeAnchorColor"),t.value=!1};return V(t,()=>{t.value?E():a()}),e.subscribe("onNodeRemoved",u),e.subscribe("onNodeAdded",u),K(()=>{e.unsubscribe("onNodeRemoved",u),e.unsubscribe("onNodeAdded",u)}),{isColorized:t,colorize:E,decolorize:a,toggleColorize:()=>t.value=!t.value,bfsLevelRecord:s,startNode:n}},O=e=>e.charAt(0).toUpperCase()+e.slice(1),$e=e=>{const t=e.replace(/([A-Z])/g," $1");return O(t)},Ue=e=>{const t={label:()=>"Reset",action:()=>e.reset(),color:()=>"red",id:v.reset},o={label:()=>e.settings.value.draggable?"Draggable":"Not Draggable",action:()=>e.settings.value.draggable=!e.settings.value.draggable,color:()=>e.settings.value.draggable?"green":"orange",id:v.draggable},l={label:()=>e.settings.value.nodeAnchors?"Anchors":"No Anchors",action:()=>e.settings.value.nodeAnchors=!e.settings.value.nodeAnchors,color:()=>e.settings.value.nodeAnchors?"green":"orange",id:v.nodeAnchors},s={label:()=>e.settings.value.displayEdgeLabels?"Edge Labels":"No Edge Labels",action:()=>e.settings.value.displayEdgeLabels=!e.settings.value.displayEdgeLabels,color:()=>e.settings.value.displayEdgeLabels?"green":"orange",id:v.edgeLabels},n={label:()=>e.settings.value.edgeLabelsEditable?"Edge Labels Editable":"Edge Labels Not Editable",action:()=>e.settings.value.edgeLabelsEditable=!e.settings.value.edgeLabelsEditable,color:()=>e.settings.value.edgeLabelsEditable?"green":"orange",id:v.edgeLabelsEditable},u={label:()=>e.settings.value.userEditable?"Editable":"Not Editable",action:()=>e.settings.value.userEditable=!e.settings.value.userEditable,color:()=>e.settings.value.userEditable?"green":"orange",id:v.userEditable},p={cond:()=>!!e.settings.value.userEditable,label:()=>O(e.settings.value.userEditableAddedEdgeType),action:()=>{e.settings.value.userEditableAddedEdgeType==="directed"?e.settings.value.userEditableAddedEdgeType="undirected":e.settings.value.userEditableAddedEdgeType="directed"},color:()=>{const{userEditableAddedEdgeType:f}=e.settings.value;return f==="directed"?"blue":"purple"},id:v.edgeType},E={cond:()=>!!e.settings.value.userEditable,label:()=>{const{userEditableAddedEdgeWeight:f}=e.settings.value;return`Change Added Edge Weight (${f})`},action:()=>{e.settings.value.userEditableAddedEdgeWeight=J(1,10)},color:()=>"green",id:v.edgeWeight},a={label:()=>`Change Node Size (${e.theme.value.nodeSize})`,action:()=>e.theme.value.nodeSize=J(20,50),color:()=>"pink",id:v.nodeSize},g={label:()=>{const{persistentStorageKey:f}=e.settings.value;return`Change Storage Key (${f})`},action:()=>{const{persistentStorageKey:f}=e.settings.value,_=f==="graph"?"graph2":"graph";e.settings.value.persistentStorageKey=_},color:()=>"blue",id:v.storageKey},i={label:()=>"Clear Local Storage",action:()=>localStorage.clear(),color:()=>"red",id:v.clearLocalStorage},c={label:()=>"Clone Search Visualizer Graph",action:()=>{e.settings.value.persistentStorageKey="search-visualizer-graph"},color:()=>"amber",id:v.persistentGraphClone},T={label:()=>{const{collaborativeRoomId:f,collaboratorCount:_,inCollaborativeRoom:L}=e,U=`Leave ${f.value} Room (${_.value+1} In Room)`;return L.value?U:"Join Test Room"},action:()=>{const f=W(le),_=W(se);e.meAsACollaborator.value.name=f,e.meAsACollaborator.value.color=_;const{joinCollaborativeRoom:L,leaveCollaborativeRoom:U,inCollaborativeRoom:P}=e;P.value?U():L("Test")},color:()=>e.inCollaborativeRoom.value?"red":"green",id:v.testRoom},k={label:()=>"Log",action:()=>{console.log(JSON.stringify(e.collaborators.value,null,2)),console.log(JSON.stringify(e.collaboratorCount.value,null,2)),console.log(JSON.stringify(e.meAsACollaborator.value,null,2))},color:()=>"blue",id:v.log},{toggleColorize:$,isColorized:H,startNode:ee}=xe(e),M={reset:t,clearLocalStorage:i,changeNodeSize:a,toggleEdgeLabelDisplay:s,toggleEdgeLabelsEditable:n,toggleDraggable:o,toggleNodeAnchors:l,toggleUserEditable:u,toggleEdgeType:p,changeEdgeWeight:E,changeStorageKey:g,persistentGraphClone:c,toggleTestRoom:T,bfsColorize:{label:()=>{const f="Colorize",_=e.getNode(ee.value),L=`Stop Colorizing (${_==null?void 0:_.label})`;return H.value?L:f},color:()=>H.value?"red":"pink",action:$,id:"toggle-bfs-colorize"},log:k},oe=Object.values(M);return{...M,btnArr:oe}},ze=["onClick","id"],De={class:"select-none"},Be=y({__name:"GraphBtns",props:{btns:{}},setup(e){const t=o=>o?o():!0;return(o,l)=>(r(!0),d(I,null,D(o.btns,s=>(r(),d("div",null,[t(s.cond)?(r(),d("button",{key:0,onClick:ue(s.action,["stop"]),class:S(`bg-${s.color()}-600 text-white px-3 py-1 rounded-lg font-bold`),id:s.id},[b("span",De,w(s.label()),1)],10,ze)):R("",!0)]))),256))}}),z=y({__name:"InputText",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(e){const t=B(e,"modelValue");return(o,l)=>G((r(),d("input",{"onUpdate:modelValue":l[0]||(l[0]=s=>t.value=s),type:"text",class:"p-1 border border-gray-300 rounded-md"},null,512)),[[Z,t.value]])}}),X=y({__name:"InputColor",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(e){const t=B(e,"modelValue");return(o,l)=>G((r(),d("input",{"onUpdate:modelValue":l[0]||(l[0]=s=>t.value=s),type:"color",class:S("p-1 w-10 h-full rounded-md appearance-none")},null,512)),[[Z,t.value]])}}),Ge=y({__name:"CollabControls",props:{graph:{}},setup(e){const t=A("graph-playground");return(o,l)=>(r(),d(I,null,[h(z,{modelValue:o.graph.meAsACollaborator.value.name,"onUpdate:modelValue":l[0]||(l[0]=s=>o.graph.meAsACollaborator.value.name=s),disabled:o.graph.inCollaborativeRoom.value,placeholder:"Your Name"},null,8,["modelValue","disabled"]),h(X,{modelValue:o.graph.meAsACollaborator.value.color,"onUpdate:modelValue":l[1]||(l[1]=s=>o.graph.meAsACollaborator.value.color=s),disabled:o.graph.inCollaborativeRoom.value},null,8,["modelValue","disabled"]),h(z,{modelValue:t.value,"onUpdate:modelValue":l[2]||(l[2]=s=>t.value=s),disabled:o.graph.inCollaborativeRoom.value,placeholder:"Collaborative Room ID"},null,8,["modelValue","disabled"]),o.graph.inCollaborativeRoom.value?(r(),N(q,{key:1,onClick:l[4]||(l[4]=s=>o.graph.leaveCollaborativeRoom()),color:m(C).RED_500,textColor:m(C).WHITE},{default:j(()=>l[6]||(l[6]=[F(" Leave Room ")])),_:1},8,["color","textColor"])):(r(),N(q,{key:0,onClick:l[3]||(l[3]=s=>o.graph.joinCollaborativeRoom(t.value))},{default:j(()=>l[5]||(l[5]=[F(" Join Room ")])),_:1}))],64))}}),Oe={class:"my-2 px-4"},He={class:"text-white mb-2"},Me={class:"font-bold text-lg"},Pe={class:"text-md"},We={key:3,class:"text-red-500 font-bold"},je=y({__name:"ThemeControls",props:{graph:{}},setup(e){return(t,o)=>(r(!0),d(I,null,D(t.graph.theme.value,(l,s)=>(r(),d("div",Oe,[b("div",He,[b("h3",Me,w(m($e)(s)),1),b("h4",Pe,w(l),1)]),typeof l=="string"&&s.toLowerCase().includes("color")?(r(),N(X,{key:0,modelValue:t.graph.theme.value[s],"onUpdate:modelValue":n=>t.graph.theme.value[s]=n,style:{width:"100px",height:"30px"}},null,8,["modelValue","onUpdate:modelValue"])):typeof l=="string"?(r(),N(z,{key:1,modelValue:t.graph.theme.value[s],"onUpdate:modelValue":n=>t.graph.theme.value[s]=n},null,8,["modelValue","onUpdate:modelValue"])):typeof l=="number"?(r(),N(be,{key:2,modelValue:t.graph.theme.value[s],"onUpdate:modelValue":n=>t.graph.theme.value[s]=n,style:{width:"100%"},min:0,max:100},null,8,["modelValue","onUpdate:modelValue"])):(r(),d("h5",We," Not Supported "))]))),256))}}),Fe=y({__name:"InputCheckbox",props:{modelValue:{type:Boolean},modelModifiers:{}},emits:["update:modelValue"],setup(e){const t=B(e,"modelValue");return(o,l)=>G((r(),d("input",{"onUpdate:modelValue":l[0]||(l[0]=s=>t.value=s),type:"checkbox"},null,512)),[[ce,t.value]])}}),Je=["onClick"],qe={class:"text-white font-bold"},Ye=y({__name:"GraphPlaygroundControls",props:{playgroundControls:{}},setup(e){return(t,o)=>(r(!0),d(I,null,D(t.playgroundControls,(l,s)=>(r(),d("div",{class:"flex gap-3 items-center pl-3 py-2 hover:bg-gray-800 cursor-pointer",onClick:n=>t.playgroundControls[s]=!t.playgroundControls[s]},[h(Fe,{modelValue:t.playgroundControls[s],"onUpdate:modelValue":n=>t.playgroundControls[s]=n,class:"h-6 w-6 rounded-xl cursor-pointer"},null,8,["modelValue","onUpdate:modelValue"]),b("h2",qe,w(m(O)(s)),1)],8,Je))),256))}}),Qe={class:"relative w-full h-full"},Ke={class:"w-full h-full absolute"},Ze={key:0,class:"absolute flex gap-2 m-2 flex flex-wrap w-[85%]"},Xe={key:1,class:"absolute bottom-0 right-0 flex gap-2 h-8 m-2"},eo={key:2,class:"bottom-0 absolute flex gap-2 m-2"},oo={key:3,class:"absolute w-full dark:text-white bottom-[10%] grid place-items-center pointer-events-none"},to={key:4,class:"absolute h-1/2 w-[325px] top-1/4 right-0 overflow-auto bg-gray-800 bg-opacity-80 rounded-l-xl"},lo={class:"absolute w-[150px] top-1/4 overflow-auto bg-gray-800 bg-opacity-80 rounded-r-xl"},uo=y({__name:"GraphPlayground",setup(e){const t=A(),o=ne(t),l=Re(o),{btnArr:s}=Ue(o),n=me("graph-playground-controls",{tutorial:!0,theme:!0,collab:!0,settings:!0});return(u,p)=>(r(),d("div",Qe,[b("div",Ke,[h(ae,{onGraphRef:p[0]||(p[0]=E=>t.value=E),graph:m(o)},null,8,["graph"])]),m(n).settings?(r(),d("div",Ze,[h(Be,{btns:m(s)},null,8,["btns"])])):R("",!0),m(n).collab?(r(),d("div",Xe,[h(Ge,{graph:m(o)},null,8,["graph"])])):R("",!0),m(n).tutorial?(r(),d("div",eo,[h(Le,{tutorial:m(l)},null,8,["tutorial"])])):R("",!0),m(n).tutorial?(r(),d("div",oo,[h(Ve,{tutorial:m(l)},null,8,["tutorial"])])):R("",!0),m(n).theme?(r(),d("div",to,[h(je,{graph:m(o)},null,8,["graph"])])):R("",!0),b("div",lo,[h(Ye,{playgroundControls:m(n)},null,8,["playgroundControls"])])]))}});export{uo as default};
