import{h as nt,i as rt,j as at,k as lt,l as it,m as ct,n as ut,p as dt,q as _t,s as pt,am as N,a4 as gt,X as f,an as Y,ao as mt,a7 as vt,e as h,r as C,o as a,N as m,w as _,b as p,a0 as $,B as x,ap as ft,H,c as v,a as l,v as k,Y as V,M as g,S as ht,g as z,y as K,d as w,t as E,E as U,_ as O,F as T,f as j,aq as bt,ar as $t,a2 as X,a3 as J,as as yt,K as wt,ac as xt}from"./index-_A0fE95w.js";import{_ as kt}from"./Graph.vue_vue_type_script_setup_true_lang-CmAuI0o1.js";import{_ as Q}from"./Button.vue_vue_type_script_setup_true_lang-BJ0GeZfz.js";import{_ as Ct}from"./TutorialHint.vue_vue_type_script_setup_true_lang-TSklC11o.js";const St=Object.assign({"/src/menu/info.ts":nt,"/src/playground/graph/info.ts":rt,"/src/playground/shape/info.ts":at,"/src/products/dijkstras/info.ts":lt,"/src/products/graph-sandbox/info.ts":it,"/src/products/markov-chains/info.ts":ct,"/src/products/min-spanning-tree/info.ts":ut,"/src/products/network-flow/info.ts":dt,"/src/products/search-visualizer/info.ts":_t,"/src/products/set-visualizer/info.ts":pt}),M=Object.values(St).flatMap(s=>s.default);M.map(s=>s.route);const Te=M.reduce((s,t)=>(s[t.productId]=t,s),{}),Z=M.reduce((s,t)=>(s[t.route.path]=t,s),{}),Pt=s=>M.map(e=>e.simulations).filter(Boolean).map(e=>e(s)).flat(),Bt=(s,t)=>{const o=N();if(!t){const r=Z[o.path];if(!r)throw new Error(`product not found for ${o.path}`);t=r.simulations}return(t??Pt)(s)},Et=()=>{const s=N(),t=gt(),o=r=>{const i=s.query.rid;return typeof i=="string"&&i.length>0?`${r}?rid=${i}`:r};return{navigate:r=>{var n,u;const i=(u=(n=r.route)==null?void 0:n.redirect)==null?void 0:u.toString(),c=i==null?void 0:i.startsWith("http");if(i&&c)return window.open(i,"_blank");t.push(o(r.route.path))},productLink:o}},Tt=(s,t)=>{const o=N();if(!t){const n=Z[o.path];if(!n)throw new Error(`no product found for route ${o.path}`);t=n}const{connectToRoom:e}=vt,r=o.query.rid,{productId:i,name:c}=t;document.title=`${c} - Magic Algorithms`,f.value=s,Y(()=>{if(r){if(typeof r!="string")return console.error("room id must be a string");e({graph:s,roomId:r,productId:i})}}),mt(()=>{var n;(n=t.state)==null||n.reset()})},D=h({__name:"PlaybackButton",setup(s){return(t,o)=>{const e=C("v-icon");return a(),m(Q,{style:{"border-radius":"40px"}},{default:_(()=>[p(e,{size:"42",class:"py-6 px-10"},{default:_(()=>[$(t.$slots,"default")]),_:3})]),_:3})}}}),Mt={transitionTimeMs:250,transitionEasing:"ease-in-out",color:x.GRAY_200},Rt=h({__name:"ProgressBar",props:ft({range:{},progress:{},previewProgress:{},transitionTimeMs:{},transitionEasing:{},color:{},onProgressSet:{type:Function},onHover:{type:Function}},Mt),setup(s){const t=s,o=H(()=>{const[n,u]=t.range;return u-n}),e=n=>{const[u]=t.range;return Math.min(Math.max(n-u,0),o.value)/o.value*100},r=n=>{const u=n.currentTarget;if(!(u instanceof HTMLElement))throw new Error("Invalid target");const d=n.offsetX,y=u.offsetWidth,S=d/y,P=t.range[0]+S*o.value;return Math.round(P)},i=n=>{var d;const u=r(n);(d=t.onProgressSet)==null||d.call(t,u)},c=n=>{var d;const u=r(n);(d=t.onHover)==null||d.call(t,u)};return(n,u)=>(a(),v("div",{onMousemove:c,onClick:i,class:"relative overflow-hidden h-4 w-full z-1"},[l("div",{class:k("absolute top-0 left-0 h-full z-0"),style:V({backgroundColor:t.color,width:`${e(n.progress)}%`,transition:`width ${t.transitionTimeMs}ms ${t.transitionEasing}`})},null,4),l("div",{class:k("absolute top-0 left-0 h-full z-10"),style:V({backgroundColor:g(x).GRAY_400+"90",width:`${e(n.previewProgress??t.range[0])}%`,transition:`width ${t.transitionTimeMs}ms ${t.transitionEasing}`})},null,4)],32))}}),At={class:"flex flex-col gap-5 items-center justify-center"},Dt={class:"flex gap-4 fill-white dark:fill-black"},It=h({__name:"SimulationPlaybackControls",props:{controls:{}},setup(s){const t=s,{isOver:o,paused:e,step:r,trace:i,hasBegun:c}=ht(t.controls),{nextStep:n,prevStep:u,setStep:d,start:y,stop:S}=t.controls,P=()=>{u(),e.value=!0},b=()=>{n(),e.value=!0},R=A=>{d(A),e.value=!0},F=()=>{e.value=!e.value},et=()=>{S(),y()},G=z(-1),ot=A=>{G.value=A},st=()=>{G.value=-1},L=()=>{e.value=!0};return f.value.subscribe("onStructureChange",L),K(()=>{f.value.unsubscribe("onStructureChange",L)}),(A,B)=>(a(),v("div",At,[p(Rt,{onMouseleave:st,range:[0,g(i).length],progress:g(r),"on-progress-set":R,"preview-progress":G.value,"on-hover":ot,class:"w-full border-gray-200 border-2 rounded-lg"},null,8,["range","progress","preview-progress"]),l("div",Dt,[p(D,{onClick:P,disabled:!g(c)},{default:_(()=>B[0]||(B[0]=[w(" mdi-chevron-left ")])),_:1},8,["disabled"]),g(o)?(a(),m(D,{key:0,onClick:et},{default:_(()=>B[1]||(B[1]=[w(" mdi-restart ")])),_:1})):(a(),m(D,{key:1,onClick:F},{default:_(()=>[w(E(g(e)?"mdi-play":"mdi-pause"),1)]),_:1})),p(D,{onClick:b,disabled:g(o)},{default:_(()=>B[2]||(B[2]=[w(" mdi-chevron-right ")])),_:1},8,["disabled"])])]))}}),zt={class:"text-white text-opacity-60 text-sm"},jt=h({__name:"ToolbarHint",props:{tutorial:{}},setup(s){return(t,o)=>(a(),m(Ct,{tutorial:t.tutorial},{default:_(({hint:e})=>[l("h5",zt,E(e),1)]),_:1},8,["tutorial"]))}}),Ft={class:"flex flex-col gap-2"},Gt={class:"flex items-center gap-2 bg-gray-800 py-1 px-1 rounded-lg"},Wt=h({__name:"Toolbar",props:{hint:{}},setup(s){return(t,o)=>(a(),v("div",Ft,[l("div",Gt,[$(t.$slots,"default")]),t.hint?(a(),m(jt,{key:0,tutorial:t.hint},null,8,["tutorial"])):U("",!0)]))}}),Ht=["disabled"],I=h({__name:"ToolbarButton",props:{active:{type:Boolean},disabled:{type:Boolean}},setup(s){return(t,o)=>{const e=C("v-icon");return a(),v("button",{disabled:t.disabled,class:k(["text-white","p-2","rounded-md",t.disabled?"text-opacity-50":"",t.disabled?"":"hover:bg-gray-900",t.disabled?"cursor-not-allowed":"cursor-pointer",t.active?"bg-gray-900":"bg-gray-800"])},[p(e,null,{default:_(()=>[$(t.$slots,"default")]),_:3})],10,Ht)}}}),Nt={},Ot={class:"w-[1px] h-6 bg-white bg-opacity-20 mx-1"};function Lt(s,t){return a(),v("div",Ot)}const q=O(Nt,[["render",Lt]]),Vt={};function qt(s,t){return a(),v("div",{class:k("flex items-center relative "+s.$attrs.class)},[$(s.$slots,"default")],2)}const W=O(Vt,[["render",qt]]),Yt={class:k(["rounded-full","p-[3px]"])},Kt=h({__name:"AnnotationControls",setup(s){const{clearAnnotations:t}=f.value,o=n=>{f.value.annotationColor.value=n,f.value.annotationErasing.value=!1},e=n=>{f.value.annotationBrushWeight.value=n},r=n=>f.value.annotationErasing.value?!1:f.value.annotationColor.value===n,i=n=>f.value.annotationBrushWeight.value===n,c=()=>{f.value.annotationErasing.value=!f.value.annotationErasing.value};return(n,u)=>(a(),m(Wt,null,{default:_(()=>[p(W,null,{default:_(()=>[(a(!0),v(T,null,j(g(bt),d=>(a(),m(I,{onClick:y=>o(d),active:r(d),key:d,color:d},{default:_(()=>[l("div",Yt,[l("div",{class:k(["w-6","h-6","rounded-full",`bg-[${d}]`])},null,2)])]),_:2},1032,["onClick","active","color"]))),128))]),_:1}),p(q),p(W,null,{default:_(()=>[(a(!0),v(T,null,j(g($t),(d,y)=>(a(),m(I,{onClick:S=>e(d),active:i(d),key:d,color:g(x).TRANSPARENT},{default:_(()=>[l("div",{class:k(["bg-gray-400","rounded-md","w-[15px]",`h-[${y*5+1}px]`])},null,2)]),_:2},1032,["onClick","active","color"]))),128))]),_:1}),p(q),p(W,{class:"gap-1"},{default:_(()=>[p(I,{onClick:c,active:g(f).annotationErasing.value},{default:_(()=>u[0]||(u[0]=[w(" mdi-eraser ")])),_:1},8,["active"]),p(I,{onClick:g(t)},{default:_(()=>u[1]||(u[1]=[w(" mdi-delete-outline ")])),_:1},8,["onClick"])]),_:1})]),_:1}))}}),Ut={},Xt={class:"bg-gray-800 hover:bg-gray-900 text-white px-4 py-2 text-xl font-bold rounded-lg"};function Jt(s,t){return a(),v("button",Xt,t[0]||(t[0]=[l("h1",{class:"bg-gradient-to-tr dark:from-purple-600 dark:to-orange-500 from-purple-500 to-orange-500 text-transparent bg-clip-text"}," Magic Algorithms ",-1)]))}const Qt=O(Ut,[["render",Jt]]),Zt=["src"],te={class:"flex flex-col gap-1"},ee={class:"text-xl font-bold text-gray-200"},oe={class:"text-md text-gray-400"},se=h({__name:"ProductDropdownItem",props:{product:{}},setup(s){const{navigate:t}=Et();return(o,e)=>(a(),v("button",{onClick:e[0]||(e[0]=r=>g(t)(o.product)),class:"hover:bg-gray-900 p-2 rounded-md cursor-pointer rounded-lg text-left flex gap-4"},[l("img",{src:o.product.menu.thumbnail,class:"object-cover h-20 w-20 rounded-md"},null,8,Zt),l("div",te,[l("h1",ee,E(o.product.menu.name),1),l("p",oe,E(o.product.menu.description),1)])]))}}),ne={class:"bg-gray-800 flex flex-col text-white p-2 w-[400px] h-[700px] overflow-auto rounded-lg"},re=h({__name:"ProductDropdownMenu",setup(s){const t=M.filter(o=>o==null?void 0:o.menu);return(o,e)=>(a(),v("div",ne,[(a(!0),v(T,null,j(g(t),r=>(a(),m(se,{key:r.productId,product:r},null,8,["product"]))),128))]))}}),ae=h({__name:"ProductDropdown",setup(s){return(t,o)=>{const e=C("v-menu");return a(),m(e,{offset:[10,0]},{activator:_(({props:r})=>[p(Qt,X(J(r)),null,16)]),default:_(()=>[p(re)]),_:1})}}}),tt=h({__name:"StartSimButton",setup(s){return(t,o)=>{const e=C("v-btn");return a(),m(e,{icon:"mdi-play",size:"large",color:g(x).GRAY_800},null,8,["color"])}}}),le={class:"bg-gray-800 flex flex-col text-white p-2 w-[400px] rounded-lg"},ie=["onClick"],ce=["src"],ue={class:"flex flex-col gap-1"},de={class:"text-lg font-bold text-gray-200"},_e={class:"text-sm text-gray-400"},pe=h({__name:"SelectSimulation",props:{simulations:{}},emits:["simulation-selected"],setup(s,{emit:t}){const o=t;return(e,r)=>{const i=C("v-menu");return a(),m(i,{offset:[10,0]},{activator:_(({props:c})=>[p(tt,X(J(c)),null,16)]),default:_(()=>[l("div",le,[(a(!0),v(T,null,j(e.simulations,c=>(a(),v("button",{onClick:n=>o("simulation-selected",c),key:c.name,class:"hover:bg-gray-900 p-2 rounded-md cursor-pointer rounded-lg text-left flex gap-4"},[l("img",{src:c.thumbnail,class:"object-cover h-20 w-20 rounded-md"},null,8,ce),l("div",ue,[l("h1",de,E(c.name),1),l("p",_e,E(c.description),1)])],8,ie))),128))])]),_:1})}}}),ge=h({__name:"StopSimButton",setup(s){return(t,o)=>{const e=C("v-btn");return a(),m(e,{color:g(x).RED_600,icon:"mdi-stop",size:"large"},null,8,["color"])}}}),me=h({__name:"FullscreenButton",setup(s){const{toggle:t}=yt(),o=e=>{e.key.toLowerCase()==="f"&&t()};return f.value.subscribe("onKeyDown",o),K(()=>f.value.unsubscribe("onKeyDown",o)),(e,r)=>{const i=C("v-icon");return a(),m(Q,{onClick:g(t),color:g(x).GRAY_800,"text-color":g(x).WHITE,class:"aspect-square"},{default:_(()=>[p(i,null,{default:_(()=>r[0]||(r[0]=[w("mdi-fullscreen")])),_:1})]),_:1},8,["onClick","color","text-color"])}}}),ve={class:"absolute top-6 w-full flex flex-col justify-center items-center gap-2"},fe={class:"absolute grid place-items-center left-4 top-0 h-full max-w-96"},he={class:"relative max-h-3/4 w-full grid place-items-center overflow-auto"},be={class:"absolute grid place-items-center right-4 top-0 h-full max-w-96"},$e={class:"relative max-h-3/4 w-full grid place-items-center overflow-auto"},ye={class:"absolute top-6 left-6"},we={class:"absolute top-6 right-6"},xe={class:"absolute bottom-8 gap-4 w-full flex flex-col justify-center items-center"},ke={key:0},Ce={class:"absolute bottom-8 right-8"},Me=h({__name:"GraphProduct",props:{graph:{}},emits:["graph-ref","simulation-started","simulation-stopped"],setup(s,{emit:t}){const o=s,e=t,r=Bt(o.graph),i=z(r[0]),c=z(!1),n=H(()=>i.value.runner),u=H(()=>n.value.simControls.isActive),d=async()=>{c.value=!0,e("simulation-started",i.value),await n.value.start()},y=async()=>{await n.value.stop(),c.value=!1,e("simulation-stopped")},S=b=>{i.value=b,d()},P=z();return Tt(o.graph),Y(()=>{e("graph-ref",P.value)}),(b,R)=>(a(),v(T,null,[p(kt,{onGraphRef:R[0]||(R[0]=F=>P.value=F),graph:b.graph},null,8,["graph"]),l("div",ve,[c.value?$(b.$slots,"top-center-sim",{key:0}):$(b.$slots,"top-center",{key:1})]),l("div",fe,[l("div",he,[c.value?$(b.$slots,"center-left-sim",{key:0}):$(b.$slots,"center-left",{key:1})])]),l("div",be,[l("div",$e,[c.value?$(b.$slots,"center-right-sim",{key:0}):$(b.$slots,"center-right",{key:1})])]),l("div",ye,[p(ae)]),l("div",we,[c.value?$(b.$slots,"top-right-sim",{key:0},()=>[p(ge,{onClick:y})]):$(b.$slots,"top-right",{key:1},()=>[g(r).length>1?(a(),m(pe,{key:0,onSimulationSelected:S,simulations:g(r)},null,8,["simulations"])):(a(),m(tt,{key:1,onClick:d}))])]),l("div",xe,[u.value?(a(),v("div",ke,[p(It,{controls:n.value.simControls},null,8,["controls"])])):U("",!0),wt(l("div",null,[p(Kt)],512),[[xt,b.graph.annotationActive.value]])]),l("div",Ce,[p(me)])],64))}});export{W as T,Me as _,I as a,q as b,Wt as c,Te as p,Et as u};
