import{z as t,g,E as H,L as S,O as P,d as G,Q as V,o as M,c as O,b as w,w as T,e as b,t as B,y as d,A as D,C as z,a as C,S as W,F as U,T as $,U as F,V as j}from"./index-BBtyRjRC.js";import{d as X,c as q,_ as J,s as I}from"./ResponsiveCanvas.vue_vue_type_script_setup_true_lang-CAYqa9Pu.js";import{_ as k}from"./Button.vue_vue_type_script_setup_true_lang-8adz9tzV.js";import{_ as Y}from"./InputRange.vue_vue_type_script_setup_true_lang-bwvuoiBI.js";const K=t.GREEN_500,Q=t.RED_500,Z=t.YELLOW_500,tt=(L,c)=>{const p=g(!1),h=g(4),e=g(99),l=g(0),i=H(()=>e.value<1?"00":e.value<10?`0${e.value}`:e.value>99?"":e.value.toString()),n=document.createElement("canvas"),A=()=>{if(!L.value)throw new Error("target canvas not found");const{width:s,height:v}=L.value.getBoundingClientRect();n.width=s,n.height=v,n.style.position="absolute",n.style.top="0",n.style.left="0",n.style.pointerEvents="none";const _=document.getElementById("responsive-canvas-container");if(!_)throw new Error("Canvas container not found");_.appendChild(n)},o=g("precise"),x=()=>{o.value=o.value==="efficient"?"precise":"efficient",u()},E=s=>{const v=o.value==="precise"?c.value.findLast(r=>r.shapeHitbox(s)):c.value.findLast(r=>r.efficientHitbox({at:s,width:1,height:1})),_=c.value.findLast(r=>{var R;return(R=r.textHitbox)==null?void 0:R.call(r,s)}),f={at:s,radius:2,color:K+i.value};_?f.color=Z+i.value:v&&(f.color=Q+i.value);const m=P(n);q(f).draw(m)},u=async()=>{if(P(n).clearRect(0,0,n.width,n.height),l.value=0,!n||!p.value)return;const{width:v,height:_}=n.getBoundingClientRect();for(let f=0;f<_;f+=h.value)for(let m=0;m<v;m+=h.value)l.value%2e4===0&&await new Promise(r=>setTimeout(r,10)),E({x:m,y:f}),l.value++};S(p,u);const a=X(u,500);return S(h,a),S(e,a),S(c,a),setTimeout(A,500),{heatmapActive:p,heatmapOpacity:e,heatmapResolution:h,runHeatmap:u,runHeatmapDebounced:a,pointsSampled:l,toggleHeatmapMode:x,heatmapMode:o}},et={key:1,class:"flex items-center gap-3 text-white h-6 mt-1 text-sm font-bold"},at=G({__name:"Toolbar",props:{canvas:{},items:{},draw:{type:Function}},setup(L){const c=L,{items:p,canvas:h}=V(c),{heatmapActive:e,heatmapOpacity:l,heatmapResolution:i,toggleHeatmapMode:n,heatmapMode:A}=tt(h,p),o=H(()=>e.value?"Hide Heatmap":"Show Heatmap"),x=H(()=>A.value==="efficient"?"Precise Heatmap":"Efficient Heatmap"),E=()=>{var a,s;const u=P(h);(s=(a=p.value[2]).activateTextArea)==null||s.call(a,u,v=>{console.log("value",v)})};return(u,a)=>(M(),O(U,null,[w(k,{onClick:u.draw},{default:T(()=>a[3]||(a[3]=[b("Redraw")])),_:1},8,["onClick"]),w(k,{onClick:a[0]||(a[0]=s=>e.value=!d(e))},{default:T(()=>[b(B(o.value),1)]),_:1}),d(e)?(M(),D(k,{key:0,onClick:d(n)},{default:T(()=>[b(B(x.value),1)]),_:1},8,["onClick"])):z("",!0),w(k,{onClick:E},{default:T(()=>a[4]||(a[4]=[b("Micro Control")])),_:1}),d(e)?(M(),O("div",et,[C("div",null,[C("p",null,"Opacity "+B(d(l)),1),w(Y,{modelValue:d(l),"onUpdate:modelValue":a[1]||(a[1]=s=>W(l)?l.value=s:null),modelModifiers:{number:!0},min:"0",max:"100"},null,8,["modelValue"])]),C("div",null,[C("p",null,"Resolution "+B(d(i)),1),w(Y,{modelValue:d(i),"onUpdate:modelValue":a[2]||(a[2]=s=>W(i)?i.value=s:null),modelModifiers:{number:!0},min:"1",max:"10"},null,8,["modelValue"])])])):z("",!0)],64))}}),ot={class:"h-full w-full"},nt={class:"absolute m-3 flex gap-3 z-50"},ut=G({__name:"ShapePlayground",setup(L){const c=g(),p=$(),h=H(()=>p.value?t.GRAY_800:t.GRAY_200),e=g([]),l=H(()=>(p.value?t.GRAY_200:t.GRAY_700)+"15"),i=()=>{const o=P(c);o.clearRect(0,0,o.canvas.width,o.canvas.height);const{uturn:x,cross:E,ellipse:u,square:a,triangle:s,scribble:v,line:_,star:f,image:m}=I;e.value.push(u({at:{x:200,y:200},radiusX:50,radiusY:90,color:t.BLUE_500,stroke:{color:t.BLUE_700,width:10,dash:[10,5]},textArea:{text:{content:"dsadsadsadsadsadsadsa",color:t.WHITE,fontSize:10},color:t.TRANSPARENT}})),e.value.push(_({start:{x:1500,y:100},end:{x:1200,y:900},width:10,gradientStops:[{offset:.1,color:t.GREEN_400},{offset:.5,color:t.RED_600},{offset:.9,color:t.BLUE_700}]})),e.value.push(s({pointA:{x:800,y:100},pointB:{x:900,y:200},pointC:{x:700,y:200},color:t.BLUE_500})),e.value.push(x({at:{x:600,y:100},downDistance:50,upDistance:50,lineWidth:10,rotation:Math.PI*.2,spacing:20,gradientStops:[{offset:.1,color:t.GREEN_400},{offset:.5,color:t.RED_600},{offset:.9,color:t.BLUE_700}]}));const r=I.arrow({start:{x:100,y:100},end:{x:600,y:900},color:t.GRAY_900,width:10,arrowHeadSize:()=>({arrowHeadHeight:100,perpLineLength:100}),arrowHeadShape:(y,st,N)=>a({at:{x:y.x-N+18,y:y.y-N},size:N,color:t.GRAY_900,rotation:Math.atan2(-800,-500)+Math.PI/4}),textArea:{color:t.PURPLE_500,activeColor:t.PURPLE_600,text:{content:"5",color:t.WHITE,fontSize:20}}});e.value.push(r),e.value.push(E({at:{x:500,y:300},color:t.SLATE_600,size:150,rotation:Math.PI/.6,borderRadius:10,lineWidth:80})),e.value.push(a({at:{x:600,y:400},size:120,rotation:Math.PI/.7,color:t.GREEN_600,borderRadius:25,stroke:{color:t.YELLOW_200,width:10,dash:[10,5]},textArea:{text:{content:"13",color:t.WHITE,fontSize:20},color:j}})),e.value.push(v({type:"draw",brushWeight:10,points:[{x:534,y:612},{x:535,y:612}]})),e.value.push(...[{at:{x:700,y:300},color:t.YELLOW_500,innerRadius:8,outerRadius:20,points:5,rotation:Math.PI/4},{at:{x:730,y:280},color:t.YELLOW_400,innerRadius:6,outerRadius:15,points:6,rotation:Math.PI/4},{at:{x:670,y:290},color:t.YELLOW_600,innerRadius:4,outerRadius:12,points:7,rotation:Math.PI/6}].map(f));const R=()=>{o.clearRect(0,0,o.canvas.width,o.canvas.height),e.value.forEach(y=>y.draw(o))};e.value.push(m({at:{x:50,y:425},width:100,height:100,src:"/WillNeverBeFound.png",textArea:{text:{content:"Epic fail",color:t.WHITE,fontSize:20},color:t.RED_600},onLoad:R,onLoadError:R}),m({at:{x:200-1600/6/2,y:700-1200/6/2},width:1600/6,height:1200/6,textArea:{text:{content:"Llama",color:t.WHITE,fontSize:20},color:t.GREEN_600},rotation:.1,src:"https://upload.wikimedia.org/wikipedia/commons/c/cb/Lama_glama_in_Junsele.jpg",onLoad:R}),a({at:{x:215,y:575},size:1,textArea:{text:{content:"Â© EmojiOne (CC-BY-SA 4.0)",color:t.BLACK,fontSize:12},color:t.TRANSPARENT},color:t.TRANSPARENT}),m({at:{x:50,y:550},width:80,height:80,src:"/1F639.png",rotation:-.2,onLoad:R})),e.value.forEach(y=>y.draw(o))};document.addEventListener("resize",i),document.addEventListener("keyup",o=>{o.code==="Space"&&i()}),setTimeout(i,100);const{width:n,height:A}=F();return(o,x)=>(M(),O("div",ot,[C("div",nt,[w(at,{canvas:c.value,items:e.value,draw:i},null,8,["canvas","items"])]),w(J,{onCanvasRef:x[0]||(x[0]=E=>c.value=E),color:h.value,"pattern-color":l.value,"canvas-width":d(n),"canvas-height":d(A)},null,8,["color","pattern-color","canvas-width","canvas-height"])]))}});export{ut as default};
