import{g as f,y as O,z as y,A as B,B as b,d as N,C as z,c as S,F as A,e as x,D as F,E as M,u as n,w as k,a as g,t as C,G as L,o as H,b as $,m as G}from"./index-cGonYwJY.js";import{c as U,a as W,u as X,_ as Y}from"./index-Ck_6YoKB.js";import{d as j,_ as P}from"./Button.vue_vue_type_script_setup_true_lang-2V79GjHf.js";import{_ as D}from"./InputRange.vue_vue_type_script_setup_true_lang-CAIQf2rz.js";const q=b.GREEN_500,I=b.RED_500,J=b.YELLOW_500,K=(v,o)=>{const s=f(!1),l=f(4),e=f(99),i=f(0),r=O(()=>e.value<1?"00":e.value<10?`0${e.value}`:e.value>99?"":e.value.toString()),t=document.createElement("canvas"),R=()=>{if(!v.value)throw new Error("target canvas not found");const{width:m,height:h}=v.value.getBoundingClientRect();t.width=m,t.height=h,t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.pointerEvents="none",document.body.appendChild(t)},d=f("precise"),w=()=>{d.value=d.value==="efficient"?"precise":"efficient",a()},T=m=>{const h=d.value==="precise"?o.value.findLast(c=>c.shapeHitbox(m)):o.value.findLast(c=>c.efficientHitbox({at:m,width:1,height:1})),E=o.value.findLast(c=>{var V;return(V=c.textHitbox)==null?void 0:V.call(c,m)}),p={at:m,radius:2,fillColor:q+r.value};E?p.fillColor=J+r.value:h&&(p.fillColor=I+r.value);const _=B(t);U(p).draw(_)},a=async()=>{if(B(t).clearRect(0,0,t.width,t.height),i.value=0,!t||!s.value)return;const{width:h,height:E}=t.getBoundingClientRect();for(let p=0;p<E;p+=l.value)for(let _=0;_<h;_+=l.value)i.value%2e4===0&&await new Promise(c=>setTimeout(c,10)),T({x:_,y:p}),i.value++};y(s,a);const u=j(a,500);return y(l,u),y(e,u),y(o,u),setTimeout(R,500),{heatmapActive:s,heatmapOpacity:e,heatmapResolution:l,runHeatmap:a,runHeatmapDebounced:u,pointsSampled:i,toggleHeatmapMode:w,heatmapMode:d}},Q={key:1,class:"flex items-center gap-3 text-white h-6 mt-1 text-sm font-bold"},Z=N({__name:"ShapePlaygroundToolbar",props:{canvas:{},items:{}},setup(v){const o=v,{items:s,canvas:l}=z(o),{heatmapActive:e,heatmapOpacity:i,heatmapResolution:r,toggleHeatmapMode:t,heatmapMode:R}=K(l,s),d=O(()=>e.value?"Hide Heatmap":"Show Heatmap"),w=O(()=>R.value==="efficient"?"Precise Heatmap":"Efficient Heatmap");return(T,a)=>(H(),S(A,null,[x(P,{onClick:a[0]||(a[0]=u=>e.value=!n(e))},{default:k(()=>[$(C(d.value),1)]),_:1}),n(e)?(H(),F(P,{key:0,onClick:n(t)},{default:k(()=>[$(C(w.value),1)]),_:1},8,["onClick"])):M("",!0),n(e)?(H(),S("div",Q,[g("div",null,[g("p",null,"Opacity "+C(n(i)),1),x(D,{modelValue:n(i),"onUpdate:modelValue":a[1]||(a[1]=u=>L(i)?i.value=u:null),modelModifiers:{number:!0},min:"0",max:"100"},null,8,["modelValue"])]),g("div",null,[g("p",null,"Resolution "+C(n(r)),1),x(D,{modelValue:n(r),"onUpdate:modelValue":a[2]||(a[2]=u=>L(r)?r.value=u:null),modelModifiers:{number:!0},min:"1",max:"10"},null,8,["modelValue"])])])):M("",!0)],64))}}),ee={class:"h-full w-full"},te={class:"absolute m-3 flex gap-3 z-50"},le=N({__name:"ShapePlayground",setup(v){const o=f([]);o.value.push(W({at:{x:300,y:300},size:200,lineWidth:50,fillColor:b.RED_500,borderRadius:[0,10,20,5]}));const s=X();return s.draw.content.value=l=>o.value.forEach(e=>e.draw(l)),(l,e)=>(H(),S("div",ee,[g("div",te,[x(Z,{canvas:n(s).canvas.value,items:o.value},null,8,["canvas","items"])]),x(Y,G(n(s).ref,{class:"bg-gray-700"}),null,16)]))}});export{le as default};
