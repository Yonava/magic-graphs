import{u as A,b as D,_ as G}from"./Graph.vue_vue_type_script_setup_true_lang-Nyy1gMg2.js";import{d as c,r as F,o as u,c as p,e as l,w as d,L as S,q as z,M as I,B as C,a as m,t as B,z as h,F as y,A as g,C as x,b as w,f as T,y as U}from"./index-fWF74cCw.js";import{_ as H,u as P}from"./TutorialHint.vue_vue_type_script_setup_true_lang-D0Lxntcq.js";import{u as N,c as _,i as X,j as k}from"./ResponsiveCanvas.vue_vue_type_script_setup_true_lang-BF8QVsLo.js";const O={persistentStorageKey:"graph-sandbox"},W=["disabled"],f=c({__name:"ToolbarButton",props:{active:{type:Boolean},disabled:{type:Boolean}},setup(s){return(e,r)=>{const a=F("v-icon");return u(),p("button",{disabled:e.disabled,class:z(["text-white","p-2","rounded-md",e.disabled?"text-opacity-50":"",e.disabled?"":"hover:bg-gray-900",e.disabled?"cursor-not-allowed":"cursor-pointer",e.active?"bg-gray-900":"bg-gray-800"])},[l(a,null,{default:d(()=>[S(e.$slots,"default")]),_:3})],10,W)}}}),j={},q={class:"w-[1px] h-6 bg-white bg-opacity-20 mx-1"};function K(s,e){return u(),p("div",q)}const M=I(j,[["render",K]]),Z={},Y={class:"flex items-center relative"};function J(s,e){return u(),p("div",Y,[S(s.$slots,"default")])}const $=I(Z,[["render",J]]),Q={class:"text-white text-opacity-60 text-sm"},ee=c({__name:"ToolbarHint",props:{tutorial:{}},setup(s){return(e,r)=>(u(),C(H,{tutorial:e.tutorial},{default:d(({hint:a})=>[m("h5",Q,B(a),1)]),_:1},8,["tutorial"]))}}),te={class:"flex items-center gap-2 bg-gray-800 py-1 px-1 rounded-lg"},oe=c({__name:"IslandToolbar",props:{graph:{}},setup(s){const e=s,r=P(e.graph,[{dismiss:"onNodeAdded",hint:"Double click on the canvas to add a node."},{dismiss:"onEdgeAdded",hint:"Hover node to show anchors, drag between them to add an edge."}]);r.start();const a=()=>{e.graph.bulkRemoveNode([...e.graph.focusedItemIds.value]),e.graph.bulkRemoveEdge([...e.graph.focusedItemIds.value])};return(o,t)=>(u(),p(y,null,[m("div",te,[l($,null,{default:d(()=>[l(f,{onClick:t[0]||(t[0]=n=>o.graph.settings.value.displayEdgeLabels=!0),active:o.graph.settings.value.displayEdgeLabels},{default:d(()=>t[6]||(t[6]=[g(" mdi-label-outline ")])),_:1},8,["active"]),l(M),l(f,{onClick:t[1]||(t[1]=n=>o.graph.settings.value.displayEdgeLabels=!1),active:!o.graph.settings.value.displayEdgeLabels},{default:d(()=>t[7]||(t[7]=[g(" mdi-label-off-outline ")])),_:1},8,["active"])]),_:1}),l($,null,{default:d(()=>[l(f,{onClick:t[2]||(t[2]=n=>o.graph.settings.value.userAddedEdgeType="directed"),active:o.graph.settings.value.userAddedEdgeType==="directed"},{default:d(()=>t[8]||(t[8]=[g(" mdi-arrow-right-thin ")])),_:1},8,["active"]),l(M),l(f,{onClick:t[3]||(t[3]=n=>o.graph.settings.value.userAddedEdgeType="undirected"),active:o.graph.settings.value.userAddedEdgeType==="undirected"},{default:d(()=>t[9]||(t[9]=[g(" mdi-minus ")])),_:1},8,["active"])]),_:1}),l($,null,{default:d(()=>[l(f,{onClick:t[4]||(t[4]=n=>o.graph.undo()),disabled:!o.graph.canUndo.value},{default:d(()=>t[10]||(t[10]=[g(" mdi-undo ")])),_:1},8,["disabled"]),l(M),l(f,{onClick:t[5]||(t[5]=n=>o.graph.redo()),disabled:!o.graph.canRedo.value},{default:d(()=>t[11]||(t[11]=[g(" mdi-redo ")])),_:1},8,["disabled"])]),_:1}),l($,null,{default:d(()=>[l(f,{onClick:a,disabled:o.graph.focusedItemIds.value.size===0},{default:d(()=>t[12]||(t[12]=[g(" mdi-eraser ")])),_:1},8,["disabled"])]),_:1}),l($,null,{default:d(()=>[l(f,null,{default:d(()=>t[13]||(t[13]=[g("mdi-account-group")])),_:1})]),_:1})]),l(ee,{tutorial:h(r)},null,8,["tutorial"])],64))}}),L="markup",se=["XS","SM","MD","LG","XL"],re={XS:25,SM:30,MD:35,LG:40,XL:45},ae={XS:6,SM:8,MD:10,LG:12,XL:14},ne=s=>{const{setTheme:e,removeAllThemes:r}=A(s,L),a=N("markup-color-map",new Map),o=i=>{if(a.value.get(i.id))return X(s.theme.value.nodeColor,i)},t=i=>{const v=a.value.get(i.id);if(v)return s.isFocused(i.id)?k(v,30):v},n=i=>{const v=a.value.get(i.id);if(v)return s.isFocused(i.id)?k(v,30):v};return{colorize:()=>{e("nodeColor",o),e("nodeBorderColor",t),e("nodeFocusBorderColor",t),e("nodeAnchorColor",t),e("nodeAnchorColorWhenParentFocused",t),e("edgeColor",n),e("marqueeSelectionBoxColor",_.TRANSPARENT),e("marqueeEncapsulatedNodeBoxBorderColor",_.WHITE+"80"),e("marqueeEncapsulatedNodeBoxColor",_.TRANSPARENT)},decolorize:()=>{r()},colorMap:a}},le=s=>{const{setTheme:e,removeAllThemes:r}=A(s,L),a=N("markup-size-map",new Map),o=E=>{const i=a.value.get(E.id);if(i)return re[i]},t=E=>{const i=a.value.get(E.id);if(i)return ae[i]};return{size:()=>{e("nodeSize",o),e("edgeWidth",t)},desize:()=>{r()},sizeMap:a}},de={},ue={class:"flex flex-col gap-1"};function ie(s,e){return u(),p("div",ue,[S(s.$slots,"default")])}const R=I(de,[["render",ie]]),V=c({__name:"Button",props:{active:{type:Boolean}},setup(s){return(e,r)=>(u(),p("button",{class:z(["cursor-pointer","rounded-xl","p-1","border-2",e.active?"border-white":"border-transparent",e.active?"hover:border-white":"hover:border-gray-400"])},[m("div",{class:z(["relative","w-8","h-8","rounded-md","flex","items-center","justify-center","text-white","text-sm",e.active?"bg-gray-800":"bg-gray-700"])},[S(e.$slots,"default")],2)],2))}}),ce=c({__name:"InputColor",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(s){const e=[_.BLACK,_.BLUE_600,_.RED_600,_.GREEN_600,_.YELLOW_600],r=x(s,"modelValue");return(a,o)=>(u(),C(R,null,{default:d(()=>[(u(),p(y,null,w(e,t=>l(V,{onClick:n=>r.value=t,key:t,active:r.value===t},{default:d(()=>[m("div",{class:z([`bg-[${t}]`,"w-full","h-full","rounded-md"])},null,2)]),_:2},1032,["onClick","active"])),64))]),_:1}))}}),pe=c({__name:"NodeEdgeColorInput",props:{graph:{},colorMap:{}},setup(s){const e=s,r=()=>{const t=Array.from(e.graph.focusedItemIds.value),n=new Set(t.map(b=>e.colorMap.get(b)));if(!n.has(void 0)&&!(n.size>1))return n.values().next().value},a=T(r()),o=t=>{for(const n of e.graph.focusedItemIds.value)e.colorMap.set(n,t);a.value=t};return e.graph.subscribe("onFocusChange",()=>{a.value=r()}),(t,n)=>(u(),C(ce,{"model-value":a.value,"onUpdate:modelValue":o},null,8,["model-value"]))}}),ge=c({__name:"InputSize",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(s){const e=se,r=x(s,"modelValue");return(a,o)=>(u(),C(R,null,{default:d(()=>[(u(!0),p(y,null,w(h(e),t=>(u(),C(V,{onClick:n=>r.value=t,key:t,active:r.value===t},{default:d(()=>[g(B(t),1)]),_:2},1032,["onClick","active"]))),128))]),_:1}))}}),me=c({__name:"NodeEdgeSizeInput",props:{graph:{},sizeMap:{}},setup(s){const e=s,r=()=>{const t=Array.from(e.graph.focusedItemIds.value),n=new Set(t.map(b=>e.sizeMap.get(b)));if(!n.has(void 0)&&!(n.size>1))return n.values().next().value},a=T(r()),o=t=>{for(const n of e.graph.focusedItemIds.value)e.sizeMap.set(n,t);a.value=t,e.graph.updateEncapsulatedNodeBox()};return e.graph.subscribe("onFocusChange",()=>{a.value=r()}),(t,n)=>(u(),C(ge,{"model-value":a.value,"onUpdate:modelValue":o},null,8,["model-value"]))}}),ve={key:0,class:"flex flex-col gap-3"},fe={class:"p-2 bg-gray-800 rounded-xl"},_e={class:"p-2 bg-gray-800 rounded-xl"},he=c({__name:"MarkupMenu",props:{graph:{}},setup(s){const e=s,{colorize:r,colorMap:a}=ne(e.graph);r();const{size:o,sizeMap:t}=le(e.graph);return o(),(n,b)=>e.graph.focusedItemIds.value.size>0?(u(),p("div",ve,[m("div",fe,[l(pe,{graph:e.graph,colorMap:h(a)},null,8,["graph","colorMap"])]),m("div",_e,[l(me,{graph:e.graph,sizeMap:h(t)},null,8,["graph","sizeMap"])])])):U("",!0)}}),be={class:"absolute top-6 w-full flex flex-col justify-center items-center gap-2"},Ce={class:"absolute top-0 w-0 h-full flex items-center"},$e={class:"ml-4"},Me=c({__name:"Main",setup(s){const e=T(),r=D(e,{settings:O});return(a,o)=>(u(),p(y,null,[l(G,{onGraphRef:o[0]||(o[0]=t=>e.value=t),graph:h(r)},null,8,["graph"]),m("div",be,[l(oe,{graph:h(r)},null,8,["graph"])]),m("div",Ce,[m("div",$e,[l(he,{graph:h(r)},null,8,["graph"])])])],64))}});export{Me as default};
