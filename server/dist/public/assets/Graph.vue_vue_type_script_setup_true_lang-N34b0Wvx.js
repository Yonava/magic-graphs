var Ko=Object.defineProperty;var Xo=(o,e,t)=>e in o?Ko(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var yt=(o,e,t)=>Xo(o,typeof e!="symbol"?e+"":e,t);import{z as O,X as Mr,bk as mn,bl as Dr,bm as $o,bn as jo,E as I,g as D,ak as Rn,ah as qt,bo as Pr,L as ct,aJ as Zo,bp as Qo,an as Jo,aG as es,O as Ir,bq as ts,br as kr,bs as lt,x as Rr,bt as gn,bu as ns,a3 as rs,bv as rr,T as os,N as ss,bw as is,bx as as,by as us,bz as cs,bA as ls,bB as ds,bC as fs,bD as hs,bE as _s,bF as ps,bG as ms,a1 as gs,a2 as vs,d as ys,A as bs,o as Ts}from"./index-ChF9fs9q.js";import{c as Zt,e as xs,f as Ct,l as st,g as Et,r as or,s as tt,d as Ss,_ as Cs}from"./ResponsiveCanvas.vue_vue_type_script_setup_true_lang-Xsf6q3bT.js";function Ne(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function Br(o,e){o.prototype=Object.create(e.prototype),o.prototype.constructor=o,o.__proto__=e}/*!
 * GSAP 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var he={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},dt={duration:.5,overwrite:!1,delay:0},Bn,te,W,me=1e8,U=1/me,vn=Math.PI*2,Es=vn/4,As=0,Fr=Math.sqrt,ws=Math.cos,Os=Math.sin,j=function(e){return typeof e=="string"},Y=function(e){return typeof e=="function"},De=function(e){return typeof e=="number"},Fn=function(e){return typeof e>"u"},we=function(e){return typeof e=="object"},oe=function(e){return e!==!1},Ln=function(){return typeof window<"u"},Ut=function(e){return Y(e)||j(e)},Lr=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},ne=Array.isArray,yn=/(?:-?\.?\d|\.)+/gi,Ur=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,rt=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,on=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,zr=/[+-]=-?[.\d]+/,Gr=/[^,'"\[\]\s]+/gi,Ns=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,q,Se,bn,Un,_e={},Ht={},Wr,qr=function(e){return(Ht=Ze(e,_e))&&ue},zn=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},Nt=function(e,t){return!t&&console.warn(e)},Hr=function(e,t){return e&&(_e[e]=t)&&Ht&&(Ht[e]=t)||_e},Mt=function(){return 0},Ms={suppressEvents:!0,isStart:!0,kill:!1},zt={suppressEvents:!0,kill:!1},Ds={suppressEvents:!0},Gn={},Fe=[],Tn={},Yr,le={},sn={},sr=30,Gt=[],Wn="",qn=function(e){var t=e[0],n,r;if(we(t)||Y(t)||(e=[e]),!(n=(t._gsap||{}).harness)){for(r=Gt.length;r--&&!Gt[r].targetTest(t););n=Gt[r]}for(r=e.length;r--;)e[r]&&(e[r]._gsap||(e[r]._gsap=new mo(e[r],n)))||e.splice(r,1);return e},Ke=function(e){return e._gsap||qn(ge(e))[0]._gsap},Vr=function(e,t,n){return(n=e[t])&&Y(n)?e[t]():Fn(n)&&e.getAttribute&&e.getAttribute(t)||n},se=function(e,t){return(e=e.split(",")).forEach(t)||e},V=function(e){return Math.round(e*1e5)/1e5||0},$=function(e){return Math.round(e*1e7)/1e7||0},it=function(e,t){var n=t.charAt(0),r=parseFloat(t.substr(2));return e=parseFloat(e),n==="+"?e+r:n==="-"?e-r:n==="*"?e*r:e/r},Ps=function(e,t){for(var n=t.length,r=0;e.indexOf(t[r])<0&&++r<n;);return r<n},Yt=function(){var e=Fe.length,t=Fe.slice(0),n,r;for(Tn={},Fe.length=0,n=0;n<e;n++)r=t[n],r&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},Kr=function(e,t,n,r){Fe.length&&!te&&Yt(),e.render(t,n,te&&t<0&&(e._initted||e._startAt)),Fe.length&&!te&&Yt()},Xr=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(Gr).length<2?t:j(e)?e.trim():e},$r=function(e){return e},ve=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},Is=function(e){return function(t,n){for(var r in n)r in t||r==="duration"&&e||r==="ease"||(t[r]=n[r])}},Ze=function(e,t){for(var n in t)e[n]=t[n];return e},ir=function o(e,t){for(var n in t)n!=="__proto__"&&n!=="constructor"&&n!=="prototype"&&(e[n]=we(t[n])?o(e[n]||(e[n]={}),t[n]):t[n]);return e},Vt=function(e,t){var n={},r;for(r in e)r in t||(n[r]=e[r]);return n},At=function(e){var t=e.parent||q,n=e.keyframes?Is(ne(e.keyframes)):ve;if(oe(e.inherit))for(;t;)n(e,t.vars.defaults),t=t.parent||t._dp;return e},ks=function(e,t){for(var n=e.length,r=n===t.length;r&&n--&&e[n]===t[n];);return n<0},jr=function(e,t,n,r,s){var i=e[r],a;if(s)for(a=t[s];i&&i[s]>a;)i=i._prev;return i?(t._next=i._next,i._next=t):(t._next=e[n],e[n]=t),t._next?t._next._prev=t:e[r]=t,t._prev=i,t.parent=t._dp=e,t},Qt=function(e,t,n,r){n===void 0&&(n="_first"),r===void 0&&(r="_last");var s=t._prev,i=t._next;s?s._next=i:e[n]===t&&(e[n]=i),i?i._prev=s:e[r]===t&&(e[r]=s),t._next=t._prev=t.parent=null},Ue=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},Xe=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},Rs=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},xn=function(e,t,n,r){return e._startAt&&(te?e._startAt.revert(zt):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,r))},Bs=function o(e){return!e||e._ts&&o(e.parent)},ar=function(e){return e._repeat?ft(e._tTime,e=e.duration()+e._rDelay)*e:0},ft=function(e,t){var n=Math.floor(e/=t);return e&&n===e?n-1:n},Kt=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},Jt=function(e){return e._end=$(e._start+(e._tDur/Math.abs(e._ts||e._rts||U)||0))},en=function(e,t){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=$(n._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),Jt(e),n._dirty||Xe(n,e)),e},Zr=function(e,t){var n;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(n=Kt(e.rawTime(),t),(!t._dur||Bt(0,t.totalDuration(),n)-t._tTime>U)&&t.render(n,!0)),Xe(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-U}},Ce=function(e,t,n,r){return t.parent&&Ue(t),t._start=$((De(n)?n:n||e!==q?pe(e,n,t):e._time)+t._delay),t._end=$(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),jr(e,t,"_first","_last",e._sort?"_start":0),Sn(t)||(e._recent=t),r||Zr(e,t),e._ts<0&&en(e,e._tTime),e},Qr=function(e,t){return(_e.ScrollTrigger||zn("scrollTrigger",t))&&_e.ScrollTrigger.create(t,e)},Jr=function(e,t,n,r,s){if(Yn(e,t,s),!e._initted)return 1;if(!n&&e._pt&&!te&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&Yr!==de.frame)return Fe.push(e),e._lazy=[s,r],1},Fs=function o(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||o(t))},Sn=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},Ls=function(e,t,n,r){var s=e.ratio,i=t<0||!t&&(!e._start&&Fs(e)&&!(!e._initted&&Sn(e))||(e._ts<0||e._dp._ts<0)&&!Sn(e))?0:1,a=e._rDelay,u=0,c,l,d;if(a&&e._repeat&&(u=Bt(0,e._tDur,t),l=ft(u,a),e._yoyo&&l&1&&(i=1-i),l!==ft(e._tTime,a)&&(s=1-i,e.vars.repeatRefresh&&e._initted&&e.invalidate())),i!==s||te||r||e._zTime===U||!t&&e._zTime){if(!e._initted&&Jr(e,t,r,n,u))return;for(d=e._zTime,e._zTime=t||(n?U:0),n||(n=t&&!d),e.ratio=i,e._from&&(i=1-i),e._time=0,e._tTime=u,c=e._pt;c;)c.r(i,c.d),c=c._next;t<0&&xn(e,t,n,!0),e._onUpdate&&!n&&fe(e,"onUpdate"),u&&e._repeat&&!n&&e.parent&&fe(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===i&&(i&&Ue(e,1),!n&&!te&&(fe(e,i?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},Us=function(e,t,n){var r;if(n>t)for(r=e._first;r&&r._start<=n;){if(r.data==="isPause"&&r._start>t)return r;r=r._next}else for(r=e._last;r&&r._start>=n;){if(r.data==="isPause"&&r._start<t)return r;r=r._prev}},ht=function(e,t,n,r){var s=e._repeat,i=$(t)||0,a=e._tTime/e._tDur;return a&&!r&&(e._time*=i/e._dur),e._dur=i,e._tDur=s?s<0?1e10:$(i*(s+1)+e._rDelay*s):i,a>0&&!r&&en(e,e._tTime=e._tDur*a),e.parent&&Jt(e),n||Xe(e.parent,e),e},ur=function(e){return e instanceof re?Xe(e):ht(e,e._dur)},zs={_start:0,endTime:Mt,totalDuration:Mt},pe=function o(e,t,n){var r=e.labels,s=e._recent||zs,i=e.duration()>=me?s.endTime(!1):e._dur,a,u,c;return j(t)&&(isNaN(t)||t in r)?(u=t.charAt(0),c=t.substr(-1)==="%",a=t.indexOf("="),u==="<"||u===">"?(a>=0&&(t=t.replace(/=/,"")),(u==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(c?(a<0?s:n).totalDuration()/100:1)):a<0?(t in r||(r[t]=i),r[t]):(u=parseFloat(t.charAt(a-1)+t.substr(a+1)),c&&n&&(u=u/100*(ne(n)?n[0]:n).totalDuration()),a>1?o(e,t.substr(0,a-1),n)+u:i+u)):t==null?i:+t},wt=function(e,t,n){var r=De(t[1]),s=(r?2:1)+(e<2?0:1),i=t[s],a,u;if(r&&(i.duration=t[1]),i.parent=n,e){for(a=i,u=n;u&&!("immediateRender"in a);)a=u.vars.defaults||{},u=oe(u.vars.inherit)&&u.parent;i.immediateRender=oe(a.immediateRender),e<2?i.runBackwards=1:i.startAt=t[s-1]}return new K(t[0],i,t[s+1])},Ge=function(e,t){return e||e===0?t(e):t},Bt=function(e,t,n){return n<e?e:n>t?t:n},ee=function(e,t){return!j(e)||!(t=Ns.exec(e))?"":t[1]},Gs=function(e,t,n){return Ge(n,function(r){return Bt(e,t,r)})},Cn=[].slice,eo=function(e,t){return e&&we(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&we(e[0]))&&!e.nodeType&&e!==Se},Ws=function(e,t,n){return n===void 0&&(n=[]),e.forEach(function(r){var s;return j(r)&&!t||eo(r,1)?(s=n).push.apply(s,ge(r)):n.push(r)})||n},ge=function(e,t,n){return W&&!t&&W.selector?W.selector(e):j(e)&&!n&&(bn||!_t())?Cn.call((t||Un).querySelectorAll(e),0):ne(e)?Ws(e,n):eo(e)?Cn.call(e,0):e?[e]:[]},En=function(e){return e=ge(e)[0]||Nt("Invalid scope")||{},function(t){var n=e.current||e.nativeElement||e;return ge(t,n.querySelectorAll?n:n===e?Nt("Invalid scope")||Un.createElement("div"):e)}},to=function(e){return e.sort(function(){return .5-Math.random()})},no=function(e){if(Y(e))return e;var t=we(e)?e:{each:e},n=$e(t.ease),r=t.from||0,s=parseFloat(t.base)||0,i={},a=r>0&&r<1,u=isNaN(r)||a,c=t.axis,l=r,d=r;return j(r)?l=d={center:.5,edges:.5,end:1}[r]||0:!a&&u&&(l=r[0],d=r[1]),function(f,m,v){var _=(v||t).length,p=i[_],h,S,T,E,C,g,b,y,x;if(!p){if(x=t.grid==="auto"?0:(t.grid||[1,me])[1],!x){for(b=-me;b<(b=v[x++].getBoundingClientRect().left)&&x<_;);x<_&&x--}for(p=i[_]=[],h=u?Math.min(x,_)*l-.5:r%x,S=x===me?0:u?_*d/x-.5:r/x|0,b=0,y=me,g=0;g<_;g++)T=g%x-h,E=S-(g/x|0),p[g]=C=c?Math.abs(c==="y"?E:T):Fr(T*T+E*E),C>b&&(b=C),C<y&&(y=C);r==="random"&&to(p),p.max=b-y,p.min=y,p.v=_=(parseFloat(t.amount)||parseFloat(t.each)*(x>_?_-1:c?c==="y"?_/x:x:Math.max(x,_/x))||0)*(r==="edges"?-1:1),p.b=_<0?s-_:s,p.u=ee(t.amount||t.each)||0,n=n&&_<0?ho(n):n}return _=(p[f]-p.min)/p.max||0,$(p.b+(n?n(_):_)*p.v)+p.u}},An=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(n){var r=$(Math.round(parseFloat(n)/e)*e*t);return(r-r%1)/t+(De(n)?0:ee(n))}},ro=function(e,t){var n=ne(e),r,s;return!n&&we(e)&&(r=n=e.radius||me,e.values?(e=ge(e.values),(s=!De(e[0]))&&(r*=r)):e=An(e.increment)),Ge(t,n?Y(e)?function(i){return s=e(i),Math.abs(s-i)<=r?s:i}:function(i){for(var a=parseFloat(s?i.x:i),u=parseFloat(s?i.y:0),c=me,l=0,d=e.length,f,m;d--;)s?(f=e[d].x-a,m=e[d].y-u,f=f*f+m*m):f=Math.abs(e[d]-a),f<c&&(c=f,l=d);return l=!r||c<=r?e[l]:i,s||l===i||De(i)?l:l+ee(i)}:An(e))},oo=function(e,t,n,r){return Ge(ne(e)?!t:n===!0?!!(n=0):!r,function(){return ne(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(r=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(t-e+n*.99))/n)*n*r)/r})},qs=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return t.reduce(function(s,i){return i(s)},r)}},Hs=function(e,t){return function(n){return e(parseFloat(n))+(t||ee(n))}},Ys=function(e,t,n){return io(e,t,0,1,n)},so=function(e,t,n){return Ge(n,function(r){return e[~~t(r)]})},Vs=function o(e,t,n){var r=t-e;return ne(e)?so(e,o(0,e.length),t):Ge(n,function(s){return(r+(s-e)%r)%r+e})},Ks=function o(e,t,n){var r=t-e,s=r*2;return ne(e)?so(e,o(0,e.length-1),t):Ge(n,function(i){return i=(s+(i-e)%s)%s||0,e+(i>r?s-i:i)})},Dt=function(e){for(var t=0,n="",r,s,i,a;~(r=e.indexOf("random(",t));)i=e.indexOf(")",r),a=e.charAt(r+7)==="[",s=e.substr(r+7,i-r-7).match(a?Gr:yn),n+=e.substr(t,r-t)+oo(a?s:+s[0],a?0:+s[1],+s[2]||1e-5),t=i+1;return n+e.substr(t,e.length-t)},io=function(e,t,n,r,s){var i=t-e,a=r-n;return Ge(s,function(u){return n+((u-e)/i*a||0)})},Xs=function o(e,t,n,r){var s=isNaN(e+t)?0:function(m){return(1-m)*e+m*t};if(!s){var i=j(e),a={},u,c,l,d,f;if(n===!0&&(r=1)&&(n=null),i)e={p:e},t={p:t};else if(ne(e)&&!ne(t)){for(l=[],d=e.length,f=d-2,c=1;c<d;c++)l.push(o(e[c-1],e[c]));d--,s=function(v){v*=d;var _=Math.min(f,~~v);return l[_](v-_)},n=t}else r||(e=Ze(ne(e)?[]:{},e));if(!l){for(u in t)Hn.call(a,e,u,"get",t[u]);s=function(v){return Xn(v,a)||(i?e.p:e)}}}return Ge(n,s)},cr=function(e,t,n){var r=e.labels,s=me,i,a,u;for(i in r)a=r[i]-t,a<0==!!n&&a&&s>(a=Math.abs(a))&&(u=i,s=a);return u},fe=function(e,t,n){var r=e.vars,s=r[t],i=W,a=e._ctx,u,c,l;if(s)return u=r[t+"Params"],c=r.callbackScope||e,n&&Fe.length&&Yt(),a&&(W=a),l=u?s.apply(c,u):s.call(c),W=i,l},Tt=function(e){return Ue(e),e.scrollTrigger&&e.scrollTrigger.kill(!!te),e.progress()<1&&fe(e,"onInterrupt"),e},ot,ao=[],uo=function(e){if(e)if(e=!e.name&&e.default||e,Ln()||e.headless){var t=e.name,n=Y(e),r=t&&!n&&e.init?function(){this._props=[]}:e,s={init:Mt,render:Xn,add:Hn,kill:li,modifier:ci,rawVars:0},i={targetTest:0,get:0,getSetter:Kn,aliases:{},register:0};if(_t(),e!==r){if(le[t])return;ve(r,ve(Vt(e,s),i)),Ze(r.prototype,Ze(s,Vt(e,i))),le[r.prop=t]=r,e.targetTest&&(Gt.push(r),Gn[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}Hr(t,r),e.register&&e.register(ue,r,ie)}else ao.push(e)},B=255,xt={aqua:[0,B,B],lime:[0,B,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,B],navy:[0,0,128],white:[B,B,B],olive:[128,128,0],yellow:[B,B,0],orange:[B,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[B,0,0],pink:[B,192,203],cyan:[0,B,B],transparent:[B,B,B,0]},an=function(e,t,n){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(n-t)*e*6:e<.5?n:e*3<2?t+(n-t)*(2/3-e)*6:t)*B+.5|0},co=function(e,t,n){var r=e?De(e)?[e>>16,e>>8&B,e&B]:0:xt.black,s,i,a,u,c,l,d,f,m,v;if(!r){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),xt[e])r=xt[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),i=e.charAt(2),a=e.charAt(3),e="#"+s+s+i+i+a+a+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return r=parseInt(e.substr(1,6),16),[r>>16,r>>8&B,r&B,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),r=[e>>16,e>>8&B,e&B]}else if(e.substr(0,3)==="hsl"){if(r=v=e.match(yn),!t)u=+r[0]%360/360,c=+r[1]/100,l=+r[2]/100,i=l<=.5?l*(c+1):l+c-l*c,s=l*2-i,r.length>3&&(r[3]*=1),r[0]=an(u+1/3,s,i),r[1]=an(u,s,i),r[2]=an(u-1/3,s,i);else if(~e.indexOf("="))return r=e.match(Ur),n&&r.length<4&&(r[3]=1),r}else r=e.match(yn)||xt.transparent;r=r.map(Number)}return t&&!v&&(s=r[0]/B,i=r[1]/B,a=r[2]/B,d=Math.max(s,i,a),f=Math.min(s,i,a),l=(d+f)/2,d===f?u=c=0:(m=d-f,c=l>.5?m/(2-d-f):m/(d+f),u=d===s?(i-a)/m+(i<a?6:0):d===i?(a-s)/m+2:(s-i)/m+4,u*=60),r[0]=~~(u+.5),r[1]=~~(c*100+.5),r[2]=~~(l*100+.5)),n&&r.length<4&&(r[3]=1),r},lo=function(e){var t=[],n=[],r=-1;return e.split(Le).forEach(function(s){var i=s.match(rt)||[];t.push.apply(t,i),n.push(r+=i.length+1)}),t.c=n,t},lr=function(e,t,n){var r="",s=(e+r).match(Le),i=t?"hsla(":"rgba(",a=0,u,c,l,d;if(!s)return e;if(s=s.map(function(f){return(f=co(f,t,1))&&i+(t?f[0]+","+f[1]+"%,"+f[2]+"%,"+f[3]:f.join(","))+")"}),n&&(l=lo(e),u=n.c,u.join(r)!==l.c.join(r)))for(c=e.replace(Le,"1").split(rt),d=c.length-1;a<d;a++)r+=c[a]+(~u.indexOf(a)?s.shift()||i+"0,0,0,0)":(l.length?l:s.length?s:n).shift());if(!c)for(c=e.split(Le),d=c.length-1;a<d;a++)r+=c[a]+s[a];return r+c[d]},Le=function(){var o="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in xt)o+="|"+e+"\\b";return new RegExp(o+")","gi")}(),$s=/hsl[a]?\(/,fo=function(e){var t=e.join(" "),n;if(Le.lastIndex=0,Le.test(t))return n=$s.test(t),e[1]=lr(e[1],n),e[0]=lr(e[0],n,lo(e[1])),!0},Pt,de=function(){var o=Date.now,e=500,t=33,n=o(),r=n,s=1e3/240,i=s,a=[],u,c,l,d,f,m,v=function _(p){var h=o()-r,S=p===!0,T,E,C,g;if((h>e||h<0)&&(n+=h-t),r+=h,C=r-n,T=C-i,(T>0||S)&&(g=++d.frame,f=C-d.time*1e3,d.time=C=C/1e3,i+=T+(T>=s?4:s-T),E=1),S||(u=c(_)),E)for(m=0;m<a.length;m++)a[m](C,f,g,p)};return d={time:0,frame:0,tick:function(){v(!0)},deltaRatio:function(p){return f/(1e3/(p||60))},wake:function(){Wr&&(!bn&&Ln()&&(Se=bn=window,Un=Se.document||{},_e.gsap=ue,(Se.gsapVersions||(Se.gsapVersions=[])).push(ue.version),qr(Ht||Se.GreenSockGlobals||!Se.gsap&&Se||{}),ao.forEach(uo)),l=typeof requestAnimationFrame<"u"&&requestAnimationFrame,u&&d.sleep(),c=l||function(p){return setTimeout(p,i-d.time*1e3+1|0)},Pt=1,v(2))},sleep:function(){(l?cancelAnimationFrame:clearTimeout)(u),Pt=0,c=Mt},lagSmoothing:function(p,h){e=p||1/0,t=Math.min(h||33,e)},fps:function(p){s=1e3/(p||240),i=d.time*1e3+s},add:function(p,h,S){var T=h?function(E,C,g,b){p(E,C,g,b),d.remove(T)}:p;return d.remove(p),a[S?"unshift":"push"](T),_t(),T},remove:function(p,h){~(h=a.indexOf(p))&&a.splice(h,1)&&m>=h&&m--},_listeners:a},d}(),_t=function(){return!Pt&&de.wake()},k={},js=/^[\d.\-M][\d.\-,\s]/,Zs=/["']/g,Qs=function(e){for(var t={},n=e.substr(1,e.length-3).split(":"),r=n[0],s=1,i=n.length,a,u,c;s<i;s++)u=n[s],a=s!==i-1?u.lastIndexOf(","):u.length,c=u.substr(0,a),t[r]=isNaN(c)?c.replace(Zs,"").trim():+c,r=u.substr(a+1).trim();return t},Js=function(e){var t=e.indexOf("(")+1,n=e.indexOf(")"),r=e.indexOf("(",t);return e.substring(t,~r&&r<n?e.indexOf(")",n+1):n)},ei=function(e){var t=(e+"").split("("),n=k[t[0]];return n&&t.length>1&&n.config?n.config.apply(null,~e.indexOf("{")?[Qs(t[1])]:Js(e).split(",").map(Xr)):k._CE&&js.test(e)?k._CE("",e):n},ho=function(e){return function(t){return 1-e(1-t)}},_o=function o(e,t){for(var n=e._first,r;n;)n instanceof re?o(n,t):n.vars.yoyoEase&&(!n._yoyo||!n._repeat)&&n._yoyo!==t&&(n.timeline?o(n.timeline,t):(r=n._ease,n._ease=n._yEase,n._yEase=r,n._yoyo=t)),n=n._next},$e=function(e,t){return e&&(Y(e)?e:k[e]||ei(e))||t},et=function(e,t,n,r){n===void 0&&(n=function(u){return 1-t(1-u)}),r===void 0&&(r=function(u){return u<.5?t(u*2)/2:1-t((1-u)*2)/2});var s={easeIn:t,easeOut:n,easeInOut:r},i;return se(e,function(a){k[a]=_e[a]=s,k[i=a.toLowerCase()]=n;for(var u in s)k[i+(u==="easeIn"?".in":u==="easeOut"?".out":".inOut")]=k[a+"."+u]=s[u]}),s},po=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},un=function o(e,t,n){var r=t>=1?t:1,s=(n||(e?.3:.45))/(t<1?t:1),i=s/vn*(Math.asin(1/r)||0),a=function(l){return l===1?1:r*Math.pow(2,-10*l)*Os((l-i)*s)+1},u=e==="out"?a:e==="in"?function(c){return 1-a(1-c)}:po(a);return s=vn/s,u.config=function(c,l){return o(e,c,l)},u},cn=function o(e,t){t===void 0&&(t=1.70158);var n=function(i){return i?--i*i*((t+1)*i+t)+1:0},r=e==="out"?n:e==="in"?function(s){return 1-n(1-s)}:po(n);return r.config=function(s){return o(e,s)},r};se("Linear,Quad,Cubic,Quart,Quint,Strong",function(o,e){var t=e<5?e+1:e;et(o+",Power"+(t-1),e?function(n){return Math.pow(n,t)}:function(n){return n},function(n){return 1-Math.pow(1-n,t)},function(n){return n<.5?Math.pow(n*2,t)/2:1-Math.pow((1-n)*2,t)/2})});k.Linear.easeNone=k.none=k.Linear.easeIn;et("Elastic",un("in"),un("out"),un());(function(o,e){var t=1/e,n=2*t,r=2.5*t,s=function(a){return a<t?o*a*a:a<n?o*Math.pow(a-1.5/e,2)+.75:a<r?o*(a-=2.25/e)*a+.9375:o*Math.pow(a-2.625/e,2)+.984375};et("Bounce",function(i){return 1-s(1-i)},s)})(7.5625,2.75);et("Expo",function(o){return o?Math.pow(2,10*(o-1)):0});et("Circ",function(o){return-(Fr(1-o*o)-1)});et("Sine",function(o){return o===1?1:-ws(o*Es)+1});et("Back",cn("in"),cn("out"),cn());k.SteppedEase=k.steps=_e.SteppedEase={config:function(e,t){e===void 0&&(e=1);var n=1/e,r=e+(t?0:1),s=t?1:0,i=1-U;return function(a){return((r*Bt(0,i,a)|0)+s)*n}}};dt.ease=k["quad.out"];se("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(o){return Wn+=o+","+o+"Params,"});var mo=function(e,t){this.id=As++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:Vr,this.set=t?t.getSetter:Kn},It=function(){function o(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,ht(this,+t.duration,1,1),this.data=t.data,W&&(this._ctx=W,W.data.push(this)),Pt||de.wake()}var e=o.prototype;return e.delay=function(n){return n||n===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+n-this._delay),this._delay=n,this):this._delay},e.duration=function(n){return arguments.length?this.totalDuration(this._repeat>0?n+(n+this._rDelay)*this._repeat:n):this.totalDuration()&&this._dur},e.totalDuration=function(n){return arguments.length?(this._dirty=0,ht(this,this._repeat<0?n:(n-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(n,r){if(_t(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(en(this,n),!s._dp||s.parent||Zr(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&n<this._tDur||this._ts<0&&n>0||!this._tDur&&!n)&&Ce(this._dp,this,this._start-this._delay)}return(this._tTime!==n||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===U||!n&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=n),Kr(this,n,r)),this},e.time=function(n,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),n+ar(this))%(this._dur+this._rDelay)||(n?this._dur:0),r):this._time},e.totalProgress=function(n,r){return arguments.length?this.totalTime(this.totalDuration()*n,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},e.progress=function(n,r){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-n:n)+ar(this),r):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(n,r){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(n-1)*s,r):this._repeat?ft(this._tTime,s)+1:1},e.timeScale=function(n,r){if(!arguments.length)return this._rts===-U?0:this._rts;if(this._rts===n)return this;var s=this.parent&&this._ts?Kt(this.parent._time,this):this._tTime;return this._rts=+n||0,this._ts=this._ps||n===-U?0:this._rts,this.totalTime(Bt(-Math.abs(this._delay),this._tDur,s),r!==!1),Jt(this),Rs(this)},e.paused=function(n){return arguments.length?(this._ps!==n&&(this._ps=n,n?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(_t(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==U&&(this._tTime-=U)))),this):this._ps},e.startTime=function(n){if(arguments.length){this._start=n;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&Ce(r,this,n-this._delay),this}return this._start},e.endTime=function(n){return this._start+(oe(n)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(n){var r=this.parent||this._dp;return r?n&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Kt(r.rawTime(n),this):this._tTime:this._tTime},e.revert=function(n){n===void 0&&(n=Ds);var r=te;return te=n,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(n),this.totalTime(-.01,n.suppressEvents)),this.data!=="nested"&&n.kill!==!1&&this.kill(),te=r,this},e.globalTime=function(n){for(var r=this,s=arguments.length?n:r.rawTime();r;)s=r._start+s/(Math.abs(r._ts)||1),r=r._dp;return!this.parent&&this._sat?this._sat.globalTime(n):s},e.repeat=function(n){return arguments.length?(this._repeat=n===1/0?-2:n,ur(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(n){if(arguments.length){var r=this._time;return this._rDelay=n,ur(this),r?this.time(r):this}return this._rDelay},e.yoyo=function(n){return arguments.length?(this._yoyo=n,this):this._yoyo},e.seek=function(n,r){return this.totalTime(pe(this,n),oe(r))},e.restart=function(n,r){return this.play().totalTime(n?-this._delay:0,oe(r))},e.play=function(n,r){return n!=null&&this.seek(n,r),this.reversed(!1).paused(!1)},e.reverse=function(n,r){return n!=null&&this.seek(n||this.totalDuration(),r),this.reversed(!0).paused(!1)},e.pause=function(n,r){return n!=null&&this.seek(n,r),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(n){return arguments.length?(!!n!==this.reversed()&&this.timeScale(-this._rts||(n?-U:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-U,this},e.isActive=function(){var n=this.parent||this._dp,r=this._start,s;return!!(!n||this._ts&&this._initted&&n.isActive()&&(s=n.rawTime(!0))>=r&&s<this.endTime(!0)-U)},e.eventCallback=function(n,r,s){var i=this.vars;return arguments.length>1?(r?(i[n]=r,s&&(i[n+"Params"]=s),n==="onUpdate"&&(this._onUpdate=r)):delete i[n],this):i[n]},e.then=function(n){var r=this;return new Promise(function(s){var i=Y(n)?n:$r,a=function(){var c=r.then;r.then=null,Y(i)&&(i=i(r))&&(i.then||i===r)&&(r.then=c),s(i),r.then=c};r._initted&&r.totalProgress()===1&&r._ts>=0||!r._tTime&&r._ts<0?a():r._prom=a})},e.kill=function(){Tt(this)},o}();ve(It.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-U,_prom:0,_ps:!1,_rts:1});var re=function(o){Br(e,o);function e(n,r){var s;return n===void 0&&(n={}),s=o.call(this,n)||this,s.labels={},s.smoothChildTiming=!!n.smoothChildTiming,s.autoRemoveChildren=!!n.autoRemoveChildren,s._sort=oe(n.sortChildren),q&&Ce(n.parent||q,Ne(s),r),n.reversed&&s.reverse(),n.paused&&s.paused(!0),n.scrollTrigger&&Qr(Ne(s),n.scrollTrigger),s}var t=e.prototype;return t.to=function(r,s,i){return wt(0,arguments,this),this},t.from=function(r,s,i){return wt(1,arguments,this),this},t.fromTo=function(r,s,i,a){return wt(2,arguments,this),this},t.set=function(r,s,i){return s.duration=0,s.parent=this,At(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new K(r,s,pe(this,i),1),this},t.call=function(r,s,i){return Ce(this,K.delayedCall(0,r,s),i)},t.staggerTo=function(r,s,i,a,u,c,l){return i.duration=s,i.stagger=i.stagger||a,i.onComplete=c,i.onCompleteParams=l,i.parent=this,new K(r,i,pe(this,u)),this},t.staggerFrom=function(r,s,i,a,u,c,l){return i.runBackwards=1,At(i).immediateRender=oe(i.immediateRender),this.staggerTo(r,s,i,a,u,c,l)},t.staggerFromTo=function(r,s,i,a,u,c,l,d){return a.startAt=i,At(a).immediateRender=oe(a.immediateRender),this.staggerTo(r,s,a,u,c,l,d)},t.render=function(r,s,i){var a=this._time,u=this._dirty?this.totalDuration():this._tDur,c=this._dur,l=r<=0?0:$(r),d=this._zTime<0!=r<0&&(this._initted||!c),f,m,v,_,p,h,S,T,E,C,g,b;if(this!==q&&l>u&&r>=0&&(l=u),l!==this._tTime||i||d){if(a!==this._time&&c&&(l+=this._time-a,r+=this._time-a),f=l,E=this._start,T=this._ts,h=!T,d&&(c||(a=this._zTime),(r||!s)&&(this._zTime=r)),this._repeat){if(g=this._yoyo,p=c+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(p*100+r,s,i);if(f=$(l%p),l===u?(_=this._repeat,f=c):(_=~~(l/p),_&&_===l/p&&(f=c,_--),f>c&&(f=c)),C=ft(this._tTime,p),!a&&this._tTime&&C!==_&&this._tTime-C*p-this._dur<=0&&(C=_),g&&_&1&&(f=c-f,b=1),_!==C&&!this._lock){var y=g&&C&1,x=y===(g&&_&1);if(_<C&&(y=!y),a=y?0:l%c?c:l,this._lock=1,this.render(a||(b?0:$(_*p)),s,!c)._lock=0,this._tTime=l,!s&&this.parent&&fe(this,"onRepeat"),this.vars.repeatRefresh&&!b&&(this.invalidate()._lock=1),a&&a!==this._time||h!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,u=this._tDur,x&&(this._lock=2,a=y?c:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!b&&this.invalidate()),this._lock=0,!this._ts&&!h)return this;_o(this,b)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(S=Us(this,$(a),$(f)),S&&(l-=f-(f=S._start))),this._tTime=l,this._time=f,this._act=!T,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,a=0),!a&&f&&!s&&!_&&(fe(this,"onStart"),this._tTime!==l))return this;if(f>=a&&r>=0)for(m=this._first;m;){if(v=m._next,(m._act||f>=m._start)&&m._ts&&S!==m){if(m.parent!==this)return this.render(r,s,i);if(m.render(m._ts>0?(f-m._start)*m._ts:(m._dirty?m.totalDuration():m._tDur)+(f-m._start)*m._ts,s,i),f!==this._time||!this._ts&&!h){S=0,v&&(l+=this._zTime=-U);break}}m=v}else{m=this._last;for(var A=r<0?r:f;m;){if(v=m._prev,(m._act||A<=m._end)&&m._ts&&S!==m){if(m.parent!==this)return this.render(r,s,i);if(m.render(m._ts>0?(A-m._start)*m._ts:(m._dirty?m.totalDuration():m._tDur)+(A-m._start)*m._ts,s,i||te&&(m._initted||m._startAt)),f!==this._time||!this._ts&&!h){S=0,v&&(l+=this._zTime=A?-U:U);break}}m=v}}if(S&&!s&&(this.pause(),S.render(f>=a?0:-U)._zTime=f>=a?1:-1,this._ts))return this._start=E,Jt(this),this.render(r,s,i);this._onUpdate&&!s&&fe(this,"onUpdate",!0),(l===u&&this._tTime>=this.totalDuration()||!l&&a)&&(E===this._start||Math.abs(T)!==Math.abs(this._ts))&&(this._lock||((r||!c)&&(l===u&&this._ts>0||!l&&this._ts<0)&&Ue(this,1),!s&&!(r<0&&!a)&&(l||a||!u)&&(fe(this,l===u&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(l<u&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(r,s){var i=this;if(De(s)||(s=pe(this,s,r)),!(r instanceof It)){if(ne(r))return r.forEach(function(a){return i.add(a,s)}),this;if(j(r))return this.addLabel(r,s);if(Y(r))r=K.delayedCall(0,r);else return this}return this!==r?Ce(this,r,s):this},t.getChildren=function(r,s,i,a){r===void 0&&(r=!0),s===void 0&&(s=!0),i===void 0&&(i=!0),a===void 0&&(a=-me);for(var u=[],c=this._first;c;)c._start>=a&&(c instanceof K?s&&u.push(c):(i&&u.push(c),r&&u.push.apply(u,c.getChildren(!0,s,i)))),c=c._next;return u},t.getById=function(r){for(var s=this.getChildren(1,1,1),i=s.length;i--;)if(s[i].vars.id===r)return s[i]},t.remove=function(r){return j(r)?this.removeLabel(r):Y(r)?this.killTweensOf(r):(Qt(this,r),r===this._recent&&(this._recent=this._last),Xe(this))},t.totalTime=function(r,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=$(de.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),o.prototype.totalTime.call(this,r,s),this._forcing=0,this):this._tTime},t.addLabel=function(r,s){return this.labels[r]=pe(this,s),this},t.removeLabel=function(r){return delete this.labels[r],this},t.addPause=function(r,s,i){var a=K.delayedCall(0,s||Mt,i);return a.data="isPause",this._hasPause=1,Ce(this,a,pe(this,r))},t.removePause=function(r){var s=this._first;for(r=pe(this,r);s;)s._start===r&&s.data==="isPause"&&Ue(s),s=s._next},t.killTweensOf=function(r,s,i){for(var a=this.getTweensOf(r,i),u=a.length;u--;)ke!==a[u]&&a[u].kill(r,s);return this},t.getTweensOf=function(r,s){for(var i=[],a=ge(r),u=this._first,c=De(s),l;u;)u instanceof K?Ps(u._targets,a)&&(c?(!ke||u._initted&&u._ts)&&u.globalTime(0)<=s&&u.globalTime(u.totalDuration())>s:!s||u.isActive())&&i.push(u):(l=u.getTweensOf(a,s)).length&&i.push.apply(i,l),u=u._next;return i},t.tweenTo=function(r,s){s=s||{};var i=this,a=pe(i,r),u=s,c=u.startAt,l=u.onStart,d=u.onStartParams,f=u.immediateRender,m,v=K.to(i,ve({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:s.duration||Math.abs((a-(c&&"time"in c?c.time:i._time))/i.timeScale())||U,onStart:function(){if(i.pause(),!m){var p=s.duration||Math.abs((a-(c&&"time"in c?c.time:i._time))/i.timeScale());v._dur!==p&&ht(v,p,0,1).render(v._time,!0,!0),m=1}l&&l.apply(v,d||[])}},s));return f?v.render(0):v},t.tweenFromTo=function(r,s,i){return this.tweenTo(s,ve({startAt:{time:pe(this,r)}},i))},t.recent=function(){return this._recent},t.nextLabel=function(r){return r===void 0&&(r=this._time),cr(this,pe(this,r))},t.previousLabel=function(r){return r===void 0&&(r=this._time),cr(this,pe(this,r),1)},t.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+U)},t.shiftChildren=function(r,s,i){i===void 0&&(i=0);for(var a=this._first,u=this.labels,c;a;)a._start>=i&&(a._start+=r,a._end+=r),a=a._next;if(s)for(c in u)u[c]>=i&&(u[c]+=r);return Xe(this)},t.invalidate=function(r){var s=this._first;for(this._lock=0;s;)s.invalidate(r),s=s._next;return o.prototype.invalidate.call(this,r)},t.clear=function(r){r===void 0&&(r=!0);for(var s=this._first,i;s;)i=s._next,this.remove(s),s=i;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),Xe(this)},t.totalDuration=function(r){var s=0,i=this,a=i._last,u=me,c,l,d;if(arguments.length)return i.timeScale((i._repeat<0?i.duration():i.totalDuration())/(i.reversed()?-r:r));if(i._dirty){for(d=i.parent;a;)c=a._prev,a._dirty&&a.totalDuration(),l=a._start,l>u&&i._sort&&a._ts&&!i._lock?(i._lock=1,Ce(i,a,l-a._delay,1)._lock=0):u=l,l<0&&a._ts&&(s-=l,(!d&&!i._dp||d&&d.smoothChildTiming)&&(i._start+=l/i._ts,i._time-=l,i._tTime-=l),i.shiftChildren(-l,!1,-1/0),u=0),a._end>s&&a._ts&&(s=a._end),a=c;ht(i,i===q&&i._time>s?i._time:s,1,1),i._dirty=0}return i._tDur},e.updateRoot=function(r){if(q._ts&&(Kr(q,Kt(r,q)),Yr=de.frame),de.frame>=sr){sr+=he.autoSleep||120;var s=q._first;if((!s||!s._ts)&&he.autoSleep&&de._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||de.sleep()}}},e}(It);ve(re.prototype,{_lock:0,_hasPause:0,_forcing:0});var ti=function(e,t,n,r,s,i,a){var u=new ie(this._pt,e,t,0,1,xo,null,s),c=0,l=0,d,f,m,v,_,p,h,S;for(u.b=n,u.e=r,n+="",r+="",(h=~r.indexOf("random("))&&(r=Dt(r)),i&&(S=[n,r],i(S,e,t),n=S[0],r=S[1]),f=n.match(on)||[];d=on.exec(r);)v=d[0],_=r.substring(c,d.index),m?m=(m+1)%5:_.substr(-5)==="rgba("&&(m=1),v!==f[l++]&&(p=parseFloat(f[l-1])||0,u._pt={_next:u._pt,p:_||l===1?_:",",s:p,c:v.charAt(1)==="="?it(p,v)-p:parseFloat(v)-p,m:m&&m<4?Math.round:0},c=on.lastIndex);return u.c=c<r.length?r.substring(c,r.length):"",u.fp=a,(zr.test(r)||h)&&(u.e=0),this._pt=u,u},Hn=function(e,t,n,r,s,i,a,u,c,l){Y(r)&&(r=r(s||0,e,i));var d=e[t],f=n!=="get"?n:Y(d)?c?e[t.indexOf("set")||!Y(e["get"+t.substr(3)])?t:"get"+t.substr(3)](c):e[t]():d,m=Y(d)?c?ii:bo:Vn,v;if(j(r)&&(~r.indexOf("random(")&&(r=Dt(r)),r.charAt(1)==="="&&(v=it(f,r)+(ee(f)||0),(v||v===0)&&(r=v))),!l||f!==r||wn)return!isNaN(f*r)&&r!==""?(v=new ie(this._pt,e,t,+f||0,r-(f||0),typeof d=="boolean"?ui:To,0,m),c&&(v.fp=c),a&&v.modifier(a,this,e),this._pt=v):(!d&&!(t in e)&&zn(t,r),ti.call(this,e,t,f,r,m,u||he.stringFilter,c))},ni=function(e,t,n,r,s){if(Y(e)&&(e=Ot(e,s,t,n,r)),!we(e)||e.style&&e.nodeType||ne(e)||Lr(e))return j(e)?Ot(e,s,t,n,r):e;var i={},a;for(a in e)i[a]=Ot(e[a],s,t,n,r);return i},go=function(e,t,n,r,s,i){var a,u,c,l;if(le[e]&&(a=new le[e]).init(s,a.rawVars?t[e]:ni(t[e],r,s,i,n),n,r,i)!==!1&&(n._pt=u=new ie(n._pt,s,e,0,1,a.render,a,0,a.priority),n!==ot))for(c=n._ptLookup[n._targets.indexOf(s)],l=a._props.length;l--;)c[a._props[l]]=u;return a},ke,wn,Yn=function o(e,t,n){var r=e.vars,s=r.ease,i=r.startAt,a=r.immediateRender,u=r.lazy,c=r.onUpdate,l=r.runBackwards,d=r.yoyoEase,f=r.keyframes,m=r.autoRevert,v=e._dur,_=e._startAt,p=e._targets,h=e.parent,S=h&&h.data==="nested"?h.vars.targets:p,T=e._overwrite==="auto"&&!Bn,E=e.timeline,C,g,b,y,x,A,w,M,P,F,G,R,z;if(E&&(!f||!s)&&(s="none"),e._ease=$e(s,dt.ease),e._yEase=d?ho($e(d===!0?s:d,dt.ease)):0,d&&e._yoyo&&!e._repeat&&(d=e._yEase,e._yEase=e._ease,e._ease=d),e._from=!E&&!!r.runBackwards,!E||f&&!r.stagger){if(M=p[0]?Ke(p[0]).harness:0,R=M&&r[M.prop],C=Vt(r,Gn),_&&(_._zTime<0&&_.progress(1),t<0&&l&&a&&!m?_.render(-1,!0):_.revert(l&&v?zt:Ms),_._lazy=0),i){if(Ue(e._startAt=K.set(p,ve({data:"isStart",overwrite:!1,parent:h,immediateRender:!0,lazy:!_&&oe(u),startAt:null,delay:0,onUpdate:c&&function(){return fe(e,"onUpdate")},stagger:0},i))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(te||!a&&!m)&&e._startAt.revert(zt),a&&v&&t<=0&&n<=0){t&&(e._zTime=t);return}}else if(l&&v&&!_){if(t&&(a=!1),b=ve({overwrite:!1,data:"isFromStart",lazy:a&&!_&&oe(u),immediateRender:a,stagger:0,parent:h},C),R&&(b[M.prop]=R),Ue(e._startAt=K.set(p,b)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(te?e._startAt.revert(zt):e._startAt.render(-1,!0)),e._zTime=t,!a)o(e._startAt,U,U);else if(!t)return}for(e._pt=e._ptCache=0,u=v&&oe(u)||u&&!v,g=0;g<p.length;g++){if(x=p[g],w=x._gsap||qn(p)[g]._gsap,e._ptLookup[g]=F={},Tn[w.id]&&Fe.length&&Yt(),G=S===p?g:S.indexOf(x),M&&(P=new M).init(x,R||C,e,G,S)!==!1&&(e._pt=y=new ie(e._pt,x,P.name,0,1,P.render,P,0,P.priority),P._props.forEach(function(X){F[X]=y}),P.priority&&(A=1)),!M||R)for(b in C)le[b]&&(P=go(b,C,e,G,x,S))?P.priority&&(A=1):F[b]=y=Hn.call(e,x,b,"get",C[b],G,S,0,r.stringFilter);e._op&&e._op[g]&&e.kill(x,e._op[g]),T&&e._pt&&(ke=e,q.killTweensOf(x,F,e.globalTime(t)),z=!e.parent,ke=0),e._pt&&u&&(Tn[w.id]=1)}A&&So(e),e._onInit&&e._onInit(e)}e._onUpdate=c,e._initted=(!e._op||e._pt)&&!z,f&&t<=0&&E.render(me,!0,!0)},ri=function(e,t,n,r,s,i,a,u){var c=(e._pt&&e._ptCache||(e._ptCache={}))[t],l,d,f,m;if(!c)for(c=e._ptCache[t]=[],f=e._ptLookup,m=e._targets.length;m--;){if(l=f[m][t],l&&l.d&&l.d._pt)for(l=l.d._pt;l&&l.p!==t&&l.fp!==t;)l=l._next;if(!l)return wn=1,e.vars[t]="+=0",Yn(e,a),wn=0,u?Nt(t+" not eligible for reset"):1;c.push(l)}for(m=c.length;m--;)d=c[m],l=d._pt||d,l.s=(r||r===0)&&!s?r:l.s+(r||0)+i*l.c,l.c=n-l.s,d.e&&(d.e=V(n)+ee(d.e)),d.b&&(d.b=l.s+ee(d.b))},oi=function(e,t){var n=e[0]?Ke(e[0]).harness:0,r=n&&n.aliases,s,i,a,u;if(!r)return t;s=Ze({},t);for(i in r)if(i in s)for(u=r[i].split(","),a=u.length;a--;)s[u[a]]=s[i];return s},si=function(e,t,n,r){var s=t.ease||r||"power1.inOut",i,a;if(ne(t))a=n[e]||(n[e]=[]),t.forEach(function(u,c){return a.push({t:c/(t.length-1)*100,v:u,e:s})});else for(i in t)a=n[i]||(n[i]=[]),i==="ease"||a.push({t:parseFloat(e),v:t[i],e:s})},Ot=function(e,t,n,r,s){return Y(e)?e.call(t,n,r,s):j(e)&&~e.indexOf("random(")?Dt(e):e},vo=Wn+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",yo={};se(vo+",id,stagger,delay,duration,paused,scrollTrigger",function(o){return yo[o]=1});var K=function(o){Br(e,o);function e(n,r,s,i){var a;typeof r=="number"&&(s.duration=r,r=s,s=null),a=o.call(this,i?r:At(r))||this;var u=a.vars,c=u.duration,l=u.delay,d=u.immediateRender,f=u.stagger,m=u.overwrite,v=u.keyframes,_=u.defaults,p=u.scrollTrigger,h=u.yoyoEase,S=r.parent||q,T=(ne(n)||Lr(n)?De(n[0]):"length"in r)?[n]:ge(n),E,C,g,b,y,x,A,w;if(a._targets=T.length?qn(T):Nt("GSAP target "+n+" not found. https://gsap.com",!he.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=m,v||f||Ut(c)||Ut(l)){if(r=a.vars,E=a.timeline=new re({data:"nested",defaults:_||{},targets:S&&S.data==="nested"?S.vars.targets:T}),E.kill(),E.parent=E._dp=Ne(a),E._start=0,f||Ut(c)||Ut(l)){if(b=T.length,A=f&&no(f),we(f))for(y in f)~vo.indexOf(y)&&(w||(w={}),w[y]=f[y]);for(C=0;C<b;C++)g=Vt(r,yo),g.stagger=0,h&&(g.yoyoEase=h),w&&Ze(g,w),x=T[C],g.duration=+Ot(c,Ne(a),C,x,T),g.delay=(+Ot(l,Ne(a),C,x,T)||0)-a._delay,!f&&b===1&&g.delay&&(a._delay=l=g.delay,a._start+=l,g.delay=0),E.to(x,g,A?A(C,x,T):0),E._ease=k.none;E.duration()?c=l=0:a.timeline=0}else if(v){At(ve(E.vars.defaults,{ease:"none"})),E._ease=$e(v.ease||r.ease||"none");var M=0,P,F,G;if(ne(v))v.forEach(function(R){return E.to(T,R,">")}),E.duration();else{g={};for(y in v)y==="ease"||y==="easeEach"||si(y,v[y],g,v.easeEach);for(y in g)for(P=g[y].sort(function(R,z){return R.t-z.t}),M=0,C=0;C<P.length;C++)F=P[C],G={ease:F.e,duration:(F.t-(C?P[C-1].t:0))/100*c},G[y]=F.v,E.to(T,G,M),M+=G.duration;E.duration()<c&&E.to({},{duration:c-E.duration()})}}c||a.duration(c=E.duration())}else a.timeline=0;return m===!0&&!Bn&&(ke=Ne(a),q.killTweensOf(T),ke=0),Ce(S,Ne(a),s),r.reversed&&a.reverse(),r.paused&&a.paused(!0),(d||!c&&!v&&a._start===$(S._time)&&oe(d)&&Bs(Ne(a))&&S.data!=="nested")&&(a._tTime=-U,a.render(Math.max(0,-l)||0)),p&&Qr(Ne(a),p),a}var t=e.prototype;return t.render=function(r,s,i){var a=this._time,u=this._tDur,c=this._dur,l=r<0,d=r>u-U&&!l?u:r<U?0:r,f,m,v,_,p,h,S,T,E;if(!c)Ls(this,r,s,i);else if(d!==this._tTime||!r||i||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==l){if(f=d,T=this.timeline,this._repeat){if(_=c+this._rDelay,this._repeat<-1&&l)return this.totalTime(_*100+r,s,i);if(f=$(d%_),d===u?(v=this._repeat,f=c):(v=~~(d/_),v&&v===$(d/_)&&(f=c,v--),f>c&&(f=c)),h=this._yoyo&&v&1,h&&(E=this._yEase,f=c-f),p=ft(this._tTime,_),f===a&&!i&&this._initted&&v===p)return this._tTime=d,this;v!==p&&(T&&this._yEase&&_o(T,h),this.vars.repeatRefresh&&!h&&!this._lock&&this._time!==_&&this._initted&&(this._lock=i=1,this.render($(_*v),!0).invalidate()._lock=0))}if(!this._initted){if(Jr(this,l?r:f,i,s,d))return this._tTime=0,this;if(a!==this._time&&!(i&&this.vars.repeatRefresh&&v!==p))return this;if(c!==this._dur)return this.render(r,s,i)}if(this._tTime=d,this._time=f,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=S=(E||this._ease)(f/c),this._from&&(this.ratio=S=1-S),f&&!a&&!s&&!v&&(fe(this,"onStart"),this._tTime!==d))return this;for(m=this._pt;m;)m.r(S,m.d),m=m._next;T&&T.render(r<0?r:T._dur*T._ease(f/this._dur),s,i)||this._startAt&&(this._zTime=r),this._onUpdate&&!s&&(l&&xn(this,r,s,i),fe(this,"onUpdate")),this._repeat&&v!==p&&this.vars.onRepeat&&!s&&this.parent&&fe(this,"onRepeat"),(d===this._tDur||!d)&&this._tTime===d&&(l&&!this._onUpdate&&xn(this,r,!0,!0),(r||!c)&&(d===this._tDur&&this._ts>0||!d&&this._ts<0)&&Ue(this,1),!s&&!(l&&!a)&&(d||a||h)&&(fe(this,d===u?"onComplete":"onReverseComplete",!0),this._prom&&!(d<u&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(r){return(!r||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(r),o.prototype.invalidate.call(this,r)},t.resetTo=function(r,s,i,a,u){Pt||de.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts),l;return this._initted||Yn(this,c),l=this._ease(c/this._dur),ri(this,r,s,i,a,l,c,u)?this.resetTo(r,s,i,a,1):(en(this,0),this.parent||jr(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(r,s){if(s===void 0&&(s="all"),!r&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?Tt(this):this;if(this.timeline){var i=this.timeline.totalDuration();return this.timeline.killTweensOf(r,s,ke&&ke.vars.overwrite!==!0)._first||Tt(this),this.parent&&i!==this.timeline.totalDuration()&&ht(this,this._dur*this.timeline._tDur/i,0,1),this}var a=this._targets,u=r?ge(r):a,c=this._ptLookup,l=this._pt,d,f,m,v,_,p,h;if((!s||s==="all")&&ks(a,u))return s==="all"&&(this._pt=0),Tt(this);for(d=this._op=this._op||[],s!=="all"&&(j(s)&&(_={},se(s,function(S){return _[S]=1}),s=_),s=oi(a,s)),h=a.length;h--;)if(~u.indexOf(a[h])){f=c[h],s==="all"?(d[h]=s,v=f,m={}):(m=d[h]=d[h]||{},v=s);for(_ in v)p=f&&f[_],p&&((!("kill"in p.d)||p.d.kill(_)===!0)&&Qt(this,p,"_pt"),delete f[_]),m!=="all"&&(m[_]=1)}return this._initted&&!this._pt&&l&&Tt(this),this},e.to=function(r,s){return new e(r,s,arguments[2])},e.from=function(r,s){return wt(1,arguments)},e.delayedCall=function(r,s,i,a){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:s,onReverseComplete:s,onCompleteParams:i,onReverseCompleteParams:i,callbackScope:a})},e.fromTo=function(r,s,i){return wt(2,arguments)},e.set=function(r,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(r,s)},e.killTweensOf=function(r,s,i){return q.killTweensOf(r,s,i)},e}(It);ve(K.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});se("staggerTo,staggerFrom,staggerFromTo",function(o){K[o]=function(){var e=new re,t=Cn.call(arguments,0);return t.splice(o==="staggerFromTo"?5:4,0,0),e[o].apply(e,t)}});var Vn=function(e,t,n){return e[t]=n},bo=function(e,t,n){return e[t](n)},ii=function(e,t,n,r){return e[t](r.fp,n)},ai=function(e,t,n){return e.setAttribute(t,n)},Kn=function(e,t){return Y(e[t])?bo:Fn(e[t])&&e.setAttribute?ai:Vn},To=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},ui=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},xo=function(e,t){var n=t._pt,r="";if(!e&&t.b)r=t.b;else if(e===1&&t.e)r=t.e;else{for(;n;)r=n.p+(n.m?n.m(n.s+n.c*e):Math.round((n.s+n.c*e)*1e4)/1e4)+r,n=n._next;r+=t.c}t.set(t.t,t.p,r,t)},Xn=function(e,t){for(var n=t._pt;n;)n.r(e,n.d),n=n._next},ci=function(e,t,n,r){for(var s=this._pt,i;s;)i=s._next,s.p===r&&s.modifier(e,t,n),s=i},li=function(e){for(var t=this._pt,n,r;t;)r=t._next,t.p===e&&!t.op||t.op===e?Qt(this,t,"_pt"):t.dep||(n=1),t=r;return!n},di=function(e,t,n,r){r.mSet(e,t,r.m.call(r.tween,n,r.mt),r)},So=function(e){for(var t=e._pt,n,r,s,i;t;){for(n=t._next,r=s;r&&r.pr>t.pr;)r=r._next;(t._prev=r?r._prev:i)?t._prev._next=t:s=t,(t._next=r)?r._prev=t:i=t,t=n}e._pt=s},ie=function(){function o(t,n,r,s,i,a,u,c,l){this.t=n,this.s=s,this.c=i,this.p=r,this.r=a||To,this.d=u||this,this.set=c||Vn,this.pr=l||0,this._next=t,t&&(t._prev=this)}var e=o.prototype;return e.modifier=function(n,r,s){this.mSet=this.mSet||this.set,this.set=di,this.m=n,this.mt=s,this.tween=r},o}();se(Wn+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(o){return Gn[o]=1});_e.TweenMax=_e.TweenLite=K;_e.TimelineLite=_e.TimelineMax=re;q=new re({sortChildren:!1,defaults:dt,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});he.stringFilter=fo;var je=[],Wt={},fi=[],dr=0,hi=0,ln=function(e){return(Wt[e]||fi).map(function(t){return t()})},On=function(){var e=Date.now(),t=[];e-dr>2&&(ln("matchMediaInit"),je.forEach(function(n){var r=n.queries,s=n.conditions,i,a,u,c;for(a in r)i=Se.matchMedia(r[a]).matches,i&&(u=1),i!==s[a]&&(s[a]=i,c=1);c&&(n.revert(),u&&t.push(n))}),ln("matchMediaRevert"),t.forEach(function(n){return n.onMatch(n,function(r){return n.add(null,r)})}),dr=e,ln("matchMedia"))},Co=function(){function o(t,n){this.selector=n&&En(n),this.data=[],this._r=[],this.isReverted=!1,this.id=hi++,t&&this.add(t)}var e=o.prototype;return e.add=function(n,r,s){Y(n)&&(s=r,r=n,n=Y);var i=this,a=function(){var c=W,l=i.selector,d;return c&&c!==i&&c.data.push(i),s&&(i.selector=En(s)),W=i,d=r.apply(i,arguments),Y(d)&&i._r.push(d),W=c,i.selector=l,i.isReverted=!1,d};return i.last=a,n===Y?a(i,function(u){return i.add(null,u)}):n?i[n]=a:a},e.ignore=function(n){var r=W;W=null,n(this),W=r},e.getTweens=function(){var n=[];return this.data.forEach(function(r){return r instanceof o?n.push.apply(n,r.getTweens()):r instanceof K&&!(r.parent&&r.parent.data==="nested")&&n.push(r)}),n},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(n,r){var s=this;if(n?function(){for(var a=s.getTweens(),u=s.data.length,c;u--;)c=s.data[u],c.data==="isFlip"&&(c.revert(),c.getChildren(!0,!0,!1).forEach(function(l){return a.splice(a.indexOf(l),1)}));for(a.map(function(l){return{g:l._dur||l._delay||l._sat&&!l._sat.vars.immediateRender?l.globalTime(0):-1/0,t:l}}).sort(function(l,d){return d.g-l.g||-1/0}).forEach(function(l){return l.t.revert(n)}),u=s.data.length;u--;)c=s.data[u],c instanceof re?c.data!=="nested"&&(c.scrollTrigger&&c.scrollTrigger.revert(),c.kill()):!(c instanceof K)&&c.revert&&c.revert(n);s._r.forEach(function(l){return l(n,s)}),s.isReverted=!0}():this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),r)for(var i=je.length;i--;)je[i].id===this.id&&je.splice(i,1)},e.revert=function(n){this.kill(n||{})},o}(),_i=function(){function o(t){this.contexts=[],this.scope=t,W&&W.data.push(this)}var e=o.prototype;return e.add=function(n,r,s){we(n)||(n={matches:n});var i=new Co(0,s||this.scope),a=i.conditions={},u,c,l;W&&!i.selector&&(i.selector=W.selector),this.contexts.push(i),r=i.add("onMatch",r),i.queries=n;for(c in n)c==="all"?l=1:(u=Se.matchMedia(n[c]),u&&(je.indexOf(i)<0&&je.push(i),(a[c]=u.matches)&&(l=1),u.addListener?u.addListener(On):u.addEventListener("change",On)));return l&&r(i,function(d){return i.add(null,d)}),this},e.revert=function(n){this.kill(n||{})},e.kill=function(n){this.contexts.forEach(function(r){return r.kill(n,!0)})},o}(),Xt={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(function(r){return uo(r)})},timeline:function(e){return new re(e)},getTweensOf:function(e,t){return q.getTweensOf(e,t)},getProperty:function(e,t,n,r){j(e)&&(e=ge(e)[0]);var s=Ke(e||{}).get,i=n?$r:Xr;return n==="native"&&(n=""),e&&(t?i((le[t]&&le[t].get||s)(e,t,n,r)):function(a,u,c){return i((le[a]&&le[a].get||s)(e,a,u,c))})},quickSetter:function(e,t,n){if(e=ge(e),e.length>1){var r=e.map(function(l){return ue.quickSetter(l,t,n)}),s=r.length;return function(l){for(var d=s;d--;)r[d](l)}}e=e[0]||{};var i=le[t],a=Ke(e),u=a.harness&&(a.harness.aliases||{})[t]||t,c=i?function(l){var d=new i;ot._pt=0,d.init(e,n?l+n:l,ot,0,[e]),d.render(1,d),ot._pt&&Xn(1,ot)}:a.set(e,u);return i?c:function(l){return c(e,u,n?l+n:l,a,1)}},quickTo:function(e,t,n){var r,s=ue.to(e,Ze((r={},r[t]="+=0.1",r.paused=!0,r),n||{})),i=function(u,c,l){return s.resetTo(t,u,c,l)};return i.tween=s,i},isTweening:function(e){return q.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=$e(e.ease,dt.ease)),ir(dt,e||{})},config:function(e){return ir(he,e||{})},registerEffect:function(e){var t=e.name,n=e.effect,r=e.plugins,s=e.defaults,i=e.extendTimeline;(r||"").split(",").forEach(function(a){return a&&!le[a]&&!_e[a]&&Nt(t+" effect requires "+a+" plugin.")}),sn[t]=function(a,u,c){return n(ge(a),ve(u||{},s),c)},i&&(re.prototype[t]=function(a,u,c){return this.add(sn[t](a,we(u)?u:(c=u)&&{},this),c)})},registerEase:function(e,t){k[e]=$e(t)},parseEase:function(e,t){return arguments.length?$e(e,t):k},getById:function(e){return q.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var n=new re(e),r,s;for(n.smoothChildTiming=oe(e.smoothChildTiming),q.remove(n),n._dp=0,n._time=n._tTime=q._time,r=q._first;r;)s=r._next,(t||!(!r._dur&&r instanceof K&&r.vars.onComplete===r._targets[0]))&&Ce(n,r,r._start-r._delay),r=s;return Ce(q,n,0),n},context:function(e,t){return e?new Co(e,t):W},matchMedia:function(e){return new _i(e)},matchMediaRefresh:function(){return je.forEach(function(e){var t=e.conditions,n,r;for(r in t)t[r]&&(t[r]=!1,n=1);n&&e.revert()})||On()},addEventListener:function(e,t){var n=Wt[e]||(Wt[e]=[]);~n.indexOf(t)||n.push(t)},removeEventListener:function(e,t){var n=Wt[e],r=n&&n.indexOf(t);r>=0&&n.splice(r,1)},utils:{wrap:Vs,wrapYoyo:Ks,distribute:no,random:oo,snap:ro,normalize:Ys,getUnit:ee,clamp:Gs,splitColor:co,toArray:ge,selector:En,mapRange:io,pipe:qs,unitize:Hs,interpolate:Xs,shuffle:to},install:qr,effects:sn,ticker:de,updateRoot:re.updateRoot,plugins:le,globalTimeline:q,core:{PropTween:ie,globals:Hr,Tween:K,Timeline:re,Animation:It,getCache:Ke,_removeLinkedListItem:Qt,reverting:function(){return te},context:function(e){return e&&W&&(W.data.push(e),e._ctx=W),W},suppressOverwrites:function(e){return Bn=e}}};se("to,from,fromTo,delayedCall,set,killTweensOf",function(o){return Xt[o]=K[o]});de.add(re.updateRoot);ot=Xt.to({},{duration:0});var pi=function(e,t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n},mi=function(e,t){var n=e._targets,r,s,i;for(r in t)for(s=n.length;s--;)i=e._ptLookup[s][r],i&&(i=i.d)&&(i._pt&&(i=pi(i,r)),i&&i.modifier&&i.modifier(t[r],e,n[s],r))},dn=function(e,t){return{name:e,rawVars:1,init:function(r,s,i){i._onInit=function(a){var u,c;if(j(s)&&(u={},se(s,function(l){return u[l]=1}),s=u),t){u={};for(c in s)u[c]=t(s[c]);s=u}mi(a,s)}}}},ue=Xt.registerPlugin({name:"attr",init:function(e,t,n,r,s){var i,a,u;this.tween=n;for(i in t)u=e.getAttribute(i)||"",a=this.add(e,"setAttribute",(u||0)+"",t[i],r,s,0,0,i),a.op=i,a.b=u,this._props.push(i)},render:function(e,t){for(var n=t._pt;n;)te?n.set(n.t,n.p,n.b,n):n.r(e,n.d),n=n._next}},{name:"endArray",init:function(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n],0,0,0,0,0,1)}},dn("roundProps",An),dn("modifiers"),dn("snap",ro))||Xt;K.version=re.version=ue.version="3.12.5";Wr=1;Ln()&&_t();k.Power0;k.Power1;k.Power2;k.Power3;k.Power4;k.Linear;k.Quad;k.Cubic;k.Quart;k.Quint;k.Strong;k.Elastic;k.Back;k.SteppedEase;k.Bounce;k.Sine;k.Expo;k.Circ;/*!
 * CSSPlugin 3.12.5
 * https://gsap.com
 *
 * Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var fr,Re,at,$n,Ve,hr,jn,gi=function(){return typeof window<"u"},Pe={},Ye=180/Math.PI,ut=Math.PI/180,nt=Math.atan2,_r=1e8,Zn=/([A-Z])/g,vi=/(left|right|width|margin|padding|x)/i,yi=/[\s,\(]\S/,Ee={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Nn=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},bi=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},Ti=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},xi=function(e,t){var n=t.s+t.c*e;t.set(t.t,t.p,~~(n+(n<0?-.5:.5))+t.u,t)},Eo=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},Ao=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},Si=function(e,t,n){return e.style[t]=n},Ci=function(e,t,n){return e.style.setProperty(t,n)},Ei=function(e,t,n){return e._gsap[t]=n},Ai=function(e,t,n){return e._gsap.scaleX=e._gsap.scaleY=n},wi=function(e,t,n,r,s){var i=e._gsap;i.scaleX=i.scaleY=n,i.renderTransform(s,i)},Oi=function(e,t,n,r,s){var i=e._gsap;i[t]=n,i.renderTransform(s,i)},H="transform",ae=H+"Origin",Ni=function o(e,t){var n=this,r=this.target,s=r.style,i=r._gsap;if(e in Pe&&s){if(this.tfm=this.tfm||{},e!=="transform")e=Ee[e]||e,~e.indexOf(",")?e.split(",").forEach(function(a){return n.tfm[a]=Me(r,a)}):this.tfm[e]=i.x?i[e]:Me(r,e),e===ae&&(this.tfm.zOrigin=i.zOrigin);else return Ee.transform.split(",").forEach(function(a){return o.call(n,a,t)});if(this.props.indexOf(H)>=0)return;i.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(ae,t,"")),e=H}(s||t)&&this.props.push(e,t,s[e])},wo=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},Mi=function(){var e=this.props,t=this.target,n=t.style,r=t._gsap,s,i;for(s=0;s<e.length;s+=3)e[s+1]?t[e[s]]=e[s+2]:e[s+2]?n[e[s]]=e[s+2]:n.removeProperty(e[s].substr(0,2)==="--"?e[s]:e[s].replace(Zn,"-$1").toLowerCase());if(this.tfm){for(i in this.tfm)r[i]=this.tfm[i];r.svg&&(r.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),s=jn(),(!s||!s.isStart)&&!n[H]&&(wo(n),r.zOrigin&&n[ae]&&(n[ae]+=" "+r.zOrigin+"px",r.zOrigin=0,r.renderTransform()),r.uncache=1)}},Oo=function(e,t){var n={target:e,props:[],revert:Mi,save:Ni};return e._gsap||ue.core.getCache(e),t&&t.split(",").forEach(function(r){return n.save(r)}),n},No,Mn=function(e,t){var n=Re.createElementNS?Re.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Re.createElement(e);return n&&n.style?n:Re.createElement(e)},Ae=function o(e,t,n){var r=getComputedStyle(e);return r[t]||r.getPropertyValue(t.replace(Zn,"-$1").toLowerCase())||r.getPropertyValue(t)||!n&&o(e,pt(t)||t,1)||""},pr="O,Moz,ms,Ms,Webkit".split(","),pt=function(e,t,n){var r=t||Ve,s=r.style,i=5;if(e in s&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);i--&&!(pr[i]+e in s););return i<0?null:(i===3?"ms":i>=0?pr[i]:"")+e},Dn=function(){gi()&&window.document&&(fr=window,Re=fr.document,at=Re.documentElement,Ve=Mn("div")||{style:{}},Mn("div"),H=pt(H),ae=H+"Origin",Ve.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",No=!!pt("perspective"),jn=ue.core.reverting,$n=1)},fn=function o(e){var t=Mn("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=this.parentNode,r=this.nextSibling,s=this.style.cssText,i;if(at.appendChild(t),t.appendChild(this),this.style.display="block",e)try{i=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=o}catch{}else this._gsapBBox&&(i=this._gsapBBox());return n&&(r?n.insertBefore(this,r):n.appendChild(this)),at.removeChild(t),this.style.cssText=s,i},mr=function(e,t){for(var n=t.length;n--;)if(e.hasAttribute(t[n]))return e.getAttribute(t[n])},Mo=function(e){var t;try{t=e.getBBox()}catch{t=fn.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===fn||(t=fn.call(e,!0)),t&&!t.width&&!t.x&&!t.y?{x:+mr(e,["x","cx","x1"])||0,y:+mr(e,["y","cy","y1"])||0,width:0,height:0}:t},Do=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&Mo(e))},Qe=function(e,t){if(t){var n=e.style,r;t in Pe&&t!==ae&&(t=H),n.removeProperty?(r=t.substr(0,2),(r==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),n.removeProperty(r==="--"?t:t.replace(Zn,"-$1").toLowerCase())):n.removeAttribute(t)}},Be=function(e,t,n,r,s,i){var a=new ie(e._pt,t,n,0,1,i?Ao:Eo);return e._pt=a,a.b=r,a.e=s,e._props.push(n),a},gr={deg:1,rad:1,turn:1},Di={grid:1,flex:1},ze=function o(e,t,n,r){var s=parseFloat(n)||0,i=(n+"").trim().substr((s+"").length)||"px",a=Ve.style,u=vi.test(t),c=e.tagName.toLowerCase()==="svg",l=(c?"client":"offset")+(u?"Width":"Height"),d=100,f=r==="px",m=r==="%",v,_,p,h;if(r===i||!s||gr[r]||gr[i])return s;if(i!=="px"&&!f&&(s=o(e,t,n,"px")),h=e.getCTM&&Do(e),(m||i==="%")&&(Pe[t]||~t.indexOf("adius")))return v=h?e.getBBox()[u?"width":"height"]:e[l],V(m?s/v*d:s/100*v);if(a[u?"width":"height"]=d+(f?i:r),_=~t.indexOf("adius")||r==="em"&&e.appendChild&&!c?e:e.parentNode,h&&(_=(e.ownerSVGElement||{}).parentNode),(!_||_===Re||!_.appendChild)&&(_=Re.body),p=_._gsap,p&&m&&p.width&&u&&p.time===de.time&&!p.uncache)return V(s/p.width*d);if(m&&(t==="height"||t==="width")){var S=e.style[t];e.style[t]=d+r,v=e[l],S?e.style[t]=S:Qe(e,t)}else(m||i==="%")&&!Di[Ae(_,"display")]&&(a.position=Ae(e,"position")),_===e&&(a.position="static"),_.appendChild(Ve),v=Ve[l],_.removeChild(Ve),a.position="absolute";return u&&m&&(p=Ke(_),p.time=de.time,p.width=_[l]),V(f?v*s/d:v&&s?d/v*s:0)},Me=function(e,t,n,r){var s;return $n||Dn(),t in Ee&&t!=="transform"&&(t=Ee[t],~t.indexOf(",")&&(t=t.split(",")[0])),Pe[t]&&t!=="transform"?(s=Rt(e,r),s=t!=="transformOrigin"?s[t]:s.svg?s.origin:jt(Ae(e,ae))+" "+s.zOrigin+"px"):(s=e.style[t],(!s||s==="auto"||r||~(s+"").indexOf("calc("))&&(s=$t[t]&&$t[t](e,t,n)||Ae(e,t)||Vr(e,t)||(t==="opacity"?1:0))),n&&!~(s+"").trim().indexOf(" ")?ze(e,t,s,n)+n:s},Pi=function(e,t,n,r){if(!n||n==="none"){var s=pt(t,e,1),i=s&&Ae(e,s,1);i&&i!==n?(t=s,n=i):t==="borderColor"&&(n=Ae(e,"borderTopColor"))}var a=new ie(this._pt,e.style,t,0,1,xo),u=0,c=0,l,d,f,m,v,_,p,h,S,T,E,C;if(a.b=n,a.e=r,n+="",r+="",r==="auto"&&(_=e.style[t],e.style[t]=r,r=Ae(e,t)||r,_?e.style[t]=_:Qe(e,t)),l=[n,r],fo(l),n=l[0],r=l[1],f=n.match(rt)||[],C=r.match(rt)||[],C.length){for(;d=rt.exec(r);)p=d[0],S=r.substring(u,d.index),v?v=(v+1)%5:(S.substr(-5)==="rgba("||S.substr(-5)==="hsla(")&&(v=1),p!==(_=f[c++]||"")&&(m=parseFloat(_)||0,E=_.substr((m+"").length),p.charAt(1)==="="&&(p=it(m,p)+E),h=parseFloat(p),T=p.substr((h+"").length),u=rt.lastIndex-T.length,T||(T=T||he.units[t]||E,u===r.length&&(r+=T,a.e+=T)),E!==T&&(m=ze(e,t,_,T)||0),a._pt={_next:a._pt,p:S||c===1?S:",",s:m,c:h-m,m:v&&v<4||t==="zIndex"?Math.round:0});a.c=u<r.length?r.substring(u,r.length):""}else a.r=t==="display"&&r==="none"?Ao:Eo;return zr.test(r)&&(a.e=0),this._pt=a,a},vr={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Ii=function(e){var t=e.split(" "),n=t[0],r=t[1]||"50%";return(n==="top"||n==="bottom"||r==="left"||r==="right")&&(e=n,n=r,r=e),t[0]=vr[n]||n,t[1]=vr[r]||r,t.join(" ")},ki=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var n=t.t,r=n.style,s=t.u,i=n._gsap,a,u,c;if(s==="all"||s===!0)r.cssText="",u=1;else for(s=s.split(","),c=s.length;--c>-1;)a=s[c],Pe[a]&&(u=1,a=a==="transformOrigin"?ae:H),Qe(n,a);u&&(Qe(n,H),i&&(i.svg&&n.removeAttribute("transform"),Rt(n,1),i.uncache=1,wo(r)))}},$t={clearProps:function(e,t,n,r,s){if(s.data!=="isFromStart"){var i=e._pt=new ie(e._pt,t,n,0,0,ki);return i.u=r,i.pr=-10,i.tween=s,e._props.push(n),1}}},kt=[1,0,0,1,0,0],Po={},Io=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},yr=function(e){var t=Ae(e,H);return Io(t)?kt:t.substr(7).match(Ur).map(V)},Qn=function(e,t){var n=e._gsap||Ke(e),r=e.style,s=yr(e),i,a,u,c;return n.svg&&e.getAttribute("transform")?(u=e.transform.baseVal.consolidate().matrix,s=[u.a,u.b,u.c,u.d,u.e,u.f],s.join(",")==="1,0,0,1,0,0"?kt:s):(s===kt&&!e.offsetParent&&e!==at&&!n.svg&&(u=r.display,r.display="block",i=e.parentNode,(!i||!e.offsetParent)&&(c=1,a=e.nextElementSibling,at.appendChild(e)),s=yr(e),u?r.display=u:Qe(e,"display"),c&&(a?i.insertBefore(e,a):i?i.appendChild(e):at.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},Pn=function(e,t,n,r,s,i){var a=e._gsap,u=s||Qn(e,!0),c=a.xOrigin||0,l=a.yOrigin||0,d=a.xOffset||0,f=a.yOffset||0,m=u[0],v=u[1],_=u[2],p=u[3],h=u[4],S=u[5],T=t.split(" "),E=parseFloat(T[0])||0,C=parseFloat(T[1])||0,g,b,y,x;n?u!==kt&&(b=m*p-v*_)&&(y=E*(p/b)+C*(-_/b)+(_*S-p*h)/b,x=E*(-v/b)+C*(m/b)-(m*S-v*h)/b,E=y,C=x):(g=Mo(e),E=g.x+(~T[0].indexOf("%")?E/100*g.width:E),C=g.y+(~(T[1]||T[0]).indexOf("%")?C/100*g.height:C)),r||r!==!1&&a.smooth?(h=E-c,S=C-l,a.xOffset=d+(h*m+S*_)-h,a.yOffset=f+(h*v+S*p)-S):a.xOffset=a.yOffset=0,a.xOrigin=E,a.yOrigin=C,a.smooth=!!r,a.origin=t,a.originIsAbsolute=!!n,e.style[ae]="0px 0px",i&&(Be(i,a,"xOrigin",c,E),Be(i,a,"yOrigin",l,C),Be(i,a,"xOffset",d,a.xOffset),Be(i,a,"yOffset",f,a.yOffset)),e.setAttribute("data-svg-origin",E+" "+C)},Rt=function(e,t){var n=e._gsap||new mo(e);if("x"in n&&!t&&!n.uncache)return n;var r=e.style,s=n.scaleX<0,i="px",a="deg",u=getComputedStyle(e),c=Ae(e,ae)||"0",l,d,f,m,v,_,p,h,S,T,E,C,g,b,y,x,A,w,M,P,F,G,R,z,X,Te,Oe,Ie,xe,Z,Q,ce;return l=d=f=_=p=h=S=T=E=0,m=v=1,n.svg=!!(e.getCTM&&Do(e)),u.translate&&((u.translate!=="none"||u.scale!=="none"||u.rotate!=="none")&&(r[H]=(u.translate!=="none"?"translate3d("+(u.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(u.rotate!=="none"?"rotate("+u.rotate+") ":"")+(u.scale!=="none"?"scale("+u.scale.split(" ").join(",")+") ":"")+(u[H]!=="none"?u[H]:"")),r.scale=r.rotate=r.translate="none"),b=Qn(e,n.svg),n.svg&&(n.uncache?(X=e.getBBox(),c=n.xOrigin-X.x+"px "+(n.yOrigin-X.y)+"px",z=""):z=!t&&e.getAttribute("data-svg-origin"),Pn(e,z||c,!!z||n.originIsAbsolute,n.smooth!==!1,b)),C=n.xOrigin||0,g=n.yOrigin||0,b!==kt&&(w=b[0],M=b[1],P=b[2],F=b[3],l=G=b[4],d=R=b[5],b.length===6?(m=Math.sqrt(w*w+M*M),v=Math.sqrt(F*F+P*P),_=w||M?nt(M,w)*Ye:0,S=P||F?nt(P,F)*Ye+_:0,S&&(v*=Math.abs(Math.cos(S*ut))),n.svg&&(l-=C-(C*w+g*P),d-=g-(C*M+g*F))):(ce=b[6],Z=b[7],Oe=b[8],Ie=b[9],xe=b[10],Q=b[11],l=b[12],d=b[13],f=b[14],y=nt(ce,xe),p=y*Ye,y&&(x=Math.cos(-y),A=Math.sin(-y),z=G*x+Oe*A,X=R*x+Ie*A,Te=ce*x+xe*A,Oe=G*-A+Oe*x,Ie=R*-A+Ie*x,xe=ce*-A+xe*x,Q=Z*-A+Q*x,G=z,R=X,ce=Te),y=nt(-P,xe),h=y*Ye,y&&(x=Math.cos(-y),A=Math.sin(-y),z=w*x-Oe*A,X=M*x-Ie*A,Te=P*x-xe*A,Q=F*A+Q*x,w=z,M=X,P=Te),y=nt(M,w),_=y*Ye,y&&(x=Math.cos(y),A=Math.sin(y),z=w*x+M*A,X=G*x+R*A,M=M*x-w*A,R=R*x-G*A,w=z,G=X),p&&Math.abs(p)+Math.abs(_)>359.9&&(p=_=0,h=180-h),m=V(Math.sqrt(w*w+M*M+P*P)),v=V(Math.sqrt(R*R+ce*ce)),y=nt(G,R),S=Math.abs(y)>2e-4?y*Ye:0,E=Q?1/(Q<0?-Q:Q):0),n.svg&&(z=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!Io(Ae(e,H)),z&&e.setAttribute("transform",z))),Math.abs(S)>90&&Math.abs(S)<270&&(s?(m*=-1,S+=_<=0?180:-180,_+=_<=0?180:-180):(v*=-1,S+=S<=0?180:-180)),t=t||n.uncache,n.x=l-((n.xPercent=l&&(!t&&n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-l)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+i,n.y=d-((n.yPercent=d&&(!t&&n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-d)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+i,n.z=f+i,n.scaleX=V(m),n.scaleY=V(v),n.rotation=V(_)+a,n.rotationX=V(p)+a,n.rotationY=V(h)+a,n.skewX=S+a,n.skewY=T+a,n.transformPerspective=E+i,(n.zOrigin=parseFloat(c.split(" ")[2])||!t&&n.zOrigin||0)&&(r[ae]=jt(c)),n.xOffset=n.yOffset=0,n.force3D=he.force3D,n.renderTransform=n.svg?Bi:No?ko:Ri,n.uncache=0,n},jt=function(e){return(e=e.split(" "))[0]+" "+e[1]},hn=function(e,t,n){var r=ee(t);return V(parseFloat(t)+parseFloat(ze(e,"x",n+"px",r)))+r},Ri=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,ko(e,t)},qe="0deg",bt="0px",He=") ",ko=function(e,t){var n=t||this,r=n.xPercent,s=n.yPercent,i=n.x,a=n.y,u=n.z,c=n.rotation,l=n.rotationY,d=n.rotationX,f=n.skewX,m=n.skewY,v=n.scaleX,_=n.scaleY,p=n.transformPerspective,h=n.force3D,S=n.target,T=n.zOrigin,E="",C=h==="auto"&&e&&e!==1||h===!0;if(T&&(d!==qe||l!==qe)){var g=parseFloat(l)*ut,b=Math.sin(g),y=Math.cos(g),x;g=parseFloat(d)*ut,x=Math.cos(g),i=hn(S,i,b*x*-T),a=hn(S,a,-Math.sin(g)*-T),u=hn(S,u,y*x*-T+T)}p!==bt&&(E+="perspective("+p+He),(r||s)&&(E+="translate("+r+"%, "+s+"%) "),(C||i!==bt||a!==bt||u!==bt)&&(E+=u!==bt||C?"translate3d("+i+", "+a+", "+u+") ":"translate("+i+", "+a+He),c!==qe&&(E+="rotate("+c+He),l!==qe&&(E+="rotateY("+l+He),d!==qe&&(E+="rotateX("+d+He),(f!==qe||m!==qe)&&(E+="skew("+f+", "+m+He),(v!==1||_!==1)&&(E+="scale("+v+", "+_+He),S.style[H]=E||"translate(0, 0)"},Bi=function(e,t){var n=t||this,r=n.xPercent,s=n.yPercent,i=n.x,a=n.y,u=n.rotation,c=n.skewX,l=n.skewY,d=n.scaleX,f=n.scaleY,m=n.target,v=n.xOrigin,_=n.yOrigin,p=n.xOffset,h=n.yOffset,S=n.forceCSS,T=parseFloat(i),E=parseFloat(a),C,g,b,y,x;u=parseFloat(u),c=parseFloat(c),l=parseFloat(l),l&&(l=parseFloat(l),c+=l,u+=l),u||c?(u*=ut,c*=ut,C=Math.cos(u)*d,g=Math.sin(u)*d,b=Math.sin(u-c)*-f,y=Math.cos(u-c)*f,c&&(l*=ut,x=Math.tan(c-l),x=Math.sqrt(1+x*x),b*=x,y*=x,l&&(x=Math.tan(l),x=Math.sqrt(1+x*x),C*=x,g*=x)),C=V(C),g=V(g),b=V(b),y=V(y)):(C=d,y=f,g=b=0),(T&&!~(i+"").indexOf("px")||E&&!~(a+"").indexOf("px"))&&(T=ze(m,"x",i,"px"),E=ze(m,"y",a,"px")),(v||_||p||h)&&(T=V(T+v-(v*C+_*b)+p),E=V(E+_-(v*g+_*y)+h)),(r||s)&&(x=m.getBBox(),T=V(T+r/100*x.width),E=V(E+s/100*x.height)),x="matrix("+C+","+g+","+b+","+y+","+T+","+E+")",m.setAttribute("transform",x),S&&(m.style[H]=x)},Fi=function(e,t,n,r,s){var i=360,a=j(s),u=parseFloat(s)*(a&&~s.indexOf("rad")?Ye:1),c=u-r,l=r+c+"deg",d,f;return a&&(d=s.split("_")[1],d==="short"&&(c%=i,c!==c%(i/2)&&(c+=c<0?i:-i)),d==="cw"&&c<0?c=(c+i*_r)%i-~~(c/i)*i:d==="ccw"&&c>0&&(c=(c-i*_r)%i-~~(c/i)*i)),e._pt=f=new ie(e._pt,t,n,r,c,bi),f.e=l,f.u="deg",e._props.push(n),f},br=function(e,t){for(var n in t)e[n]=t[n];return e},Li=function(e,t,n){var r=br({},n._gsap),s="perspective,force3D,transformOrigin,svgOrigin",i=n.style,a,u,c,l,d,f,m,v;r.svg?(c=n.getAttribute("transform"),n.setAttribute("transform",""),i[H]=t,a=Rt(n,1),Qe(n,H),n.setAttribute("transform",c)):(c=getComputedStyle(n)[H],i[H]=t,a=Rt(n,1),i[H]=c);for(u in Pe)c=r[u],l=a[u],c!==l&&s.indexOf(u)<0&&(m=ee(c),v=ee(l),d=m!==v?ze(n,u,c,v):parseFloat(c),f=parseFloat(l),e._pt=new ie(e._pt,a,u,d,f-d,Nn),e._pt.u=v||0,e._props.push(u));br(a,r)};se("padding,margin,Width,Radius",function(o,e){var t="Top",n="Right",r="Bottom",s="Left",i=(e<3?[t,n,r,s]:[t+s,t+n,r+n,r+s]).map(function(a){return e<2?o+a:"border"+a+o});$t[e>1?"border"+o:o]=function(a,u,c,l,d){var f,m;if(arguments.length<4)return f=i.map(function(v){return Me(a,v,c)}),m=f.join(" "),m.split(f[0]).length===5?f[0]:m;f=(l+"").split(" "),m={},i.forEach(function(v,_){return m[v]=f[_]=f[_]||f[(_-1)/2|0]}),a.init(u,m,d)}});var Ro={name:"css",register:Dn,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,n,r,s){var i=this._props,a=e.style,u=n.vars.startAt,c,l,d,f,m,v,_,p,h,S,T,E,C,g,b,y;$n||Dn(),this.styles=this.styles||Oo(e),y=this.styles.props,this.tween=n;for(_ in t)if(_!=="autoRound"&&(l=t[_],!(le[_]&&go(_,t,n,r,e,s)))){if(m=typeof l,v=$t[_],m==="function"&&(l=l.call(n,r,e,s),m=typeof l),m==="string"&&~l.indexOf("random(")&&(l=Dt(l)),v)v(this,e,_,l,n)&&(b=1);else if(_.substr(0,2)==="--")c=(getComputedStyle(e).getPropertyValue(_)+"").trim(),l+="",Le.lastIndex=0,Le.test(c)||(p=ee(c),h=ee(l)),h?p!==h&&(c=ze(e,_,c,h)+h):p&&(l+=p),this.add(a,"setProperty",c,l,r,s,0,0,_),i.push(_),y.push(_,0,a[_]);else if(m!=="undefined"){if(u&&_ in u?(c=typeof u[_]=="function"?u[_].call(n,r,e,s):u[_],j(c)&&~c.indexOf("random(")&&(c=Dt(c)),ee(c+"")||c==="auto"||(c+=he.units[_]||ee(Me(e,_))||""),(c+"").charAt(1)==="="&&(c=Me(e,_))):c=Me(e,_),f=parseFloat(c),S=m==="string"&&l.charAt(1)==="="&&l.substr(0,2),S&&(l=l.substr(2)),d=parseFloat(l),_ in Ee&&(_==="autoAlpha"&&(f===1&&Me(e,"visibility")==="hidden"&&d&&(f=0),y.push("visibility",0,a.visibility),Be(this,a,"visibility",f?"inherit":"hidden",d?"inherit":"hidden",!d)),_!=="scale"&&_!=="transform"&&(_=Ee[_],~_.indexOf(",")&&(_=_.split(",")[0]))),T=_ in Pe,T){if(this.styles.save(_),E||(C=e._gsap,C.renderTransform&&!t.parseTransform||Rt(e,t.parseTransform),g=t.smoothOrigin!==!1&&C.smooth,E=this._pt=new ie(this._pt,a,H,0,1,C.renderTransform,C,0,-1),E.dep=1),_==="scale")this._pt=new ie(this._pt,C,"scaleY",C.scaleY,(S?it(C.scaleY,S+d):d)-C.scaleY||0,Nn),this._pt.u=0,i.push("scaleY",_),_+="X";else if(_==="transformOrigin"){y.push(ae,0,a[ae]),l=Ii(l),C.svg?Pn(e,l,0,g,0,this):(h=parseFloat(l.split(" ")[2])||0,h!==C.zOrigin&&Be(this,C,"zOrigin",C.zOrigin,h),Be(this,a,_,jt(c),jt(l)));continue}else if(_==="svgOrigin"){Pn(e,l,1,g,0,this);continue}else if(_ in Po){Fi(this,C,_,f,S?it(f,S+l):l);continue}else if(_==="smoothOrigin"){Be(this,C,"smooth",C.smooth,l);continue}else if(_==="force3D"){C[_]=l;continue}else if(_==="transform"){Li(this,l,e);continue}}else _ in a||(_=pt(_)||_);if(T||(d||d===0)&&(f||f===0)&&!yi.test(l)&&_ in a)p=(c+"").substr((f+"").length),d||(d=0),h=ee(l)||(_ in he.units?he.units[_]:p),p!==h&&(f=ze(e,_,c,h)),this._pt=new ie(this._pt,T?C:a,_,f,(S?it(f,S+d):d)-f,!T&&(h==="px"||_==="zIndex")&&t.autoRound!==!1?xi:Nn),this._pt.u=h||0,p!==h&&h!=="%"&&(this._pt.b=c,this._pt.r=Ti);else if(_ in a)Pi.call(this,e,_,c,S?S+l:l);else if(_ in e)this.add(e,_,c||e[_],S?S+l:l,r,s);else if(_!=="parseTransform"){zn(_,l);continue}T||(_ in a?y.push(_,0,a[_]):y.push(_,1,c||e[_])),i.push(_)}}b&&So(this)},render:function(e,t){if(t.tween._time||!jn())for(var n=t._pt;n;)n.r(e,n.d),n=n._next;else t.styles.revert()},get:Me,aliases:Ee,getSetter:function(e,t,n){var r=Ee[t];return r&&r.indexOf(",")<0&&(t=r),t in Pe&&t!==ae&&(e._gsap.x||Me(e,"x"))?n&&hr===n?t==="scale"?Ai:Ei:(hr=n||{})&&(t==="scale"?wi:Oi):e.style&&!Fn(e.style[t])?Si:~t.indexOf("-")?Ci:Kn(e,t)},core:{_removeProperty:Qe,_getMatrix:Qn}};ue.utils.checkPrefix=pt;ue.core.getStyleSaver=Oo;(function(o,e,t,n){var r=se(o+","+e+","+t,function(s){Pe[s]=1});se(e,function(s){he.units[s]="deg",Po[s]=1}),Ee[r[13]]=o+","+e,se(n,function(s){var i=s.split(":");Ee[i[1]]=r[i[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");se("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(o){he.units[o]="px"});ue.registerPlugin(Ro);var gt=ue.registerPlugin(Ro)||ue;gt.core.Tween;const Je=500,Ui=()=>{const o=new Map,e=new Map,t=async(s,i)=>{i.set(s,0);for(let a=0;a<=Je;a++)setTimeout(()=>{i.set(s,a)},1*a);await new Promise(a=>setTimeout(a,Je)),i.delete(s)};return{animateIn:s=>t(s,e),animateOut:s=>t(s,o),itemsAnimatingIn:e,itemsAnimatingOut:o,isAnimating:s=>e.has(s)||o.has(s)}},{mapRange:zi}=gt.utils,ye=(o,e)=>zi(Je*o,Je*e,0,1),mt=(o,e,t)=>t>=o&&t<=e,Gi=(o,e)=>{const t=o/1e3;return Math.floor(e*t)},Ft={linear:o=>o,in:o=>o*o,out:o=>o*(2-o),"in-out":o=>o<.5?2*o*o:-1+(4-2*o)*o},Wi={easeFn:"in-out"},qi=o=>{const{start:e,end:t,numberOfSteps:n,easeFn:r}={...Wi,...o};if(n<1)throw new Error(`numberOfSteps must be greater than 0, got ${n}`);if(!Number.isInteger(n))throw new Error(`numberOfSteps must be an integer, got ${n}`);const s=[],i=typeof r=="string"?Ft[r]:r;for(let a=1;a<=n;a++){const u=a/n,c=i(u),l=Math.round(e.x+(t.x-e.x)*c),d=Math.round(e.y+(t.y-e.y)*c);s.push({x:l,y:d})}return s},Hi={durationMs:1e3,frameRate:60},Yi=o=>{const{durationMs:e,frameRate:t}={...Hi,...o},n=qi({...o,numberOfSteps:Gi(e,t)});return{coords:n,timePerFrameMs:Math.floor(e/n.length)}},{interpolate:tn}=gt.utils,nn=Ft["in-out"],Vi=o=>e=>{const t=ye(0,1),n=nn(t(o));return{radius:tn(0,e.radius)(n)}},Ki=o=>e=>{const t=ye(0,1),n=nn(t(o));return{radius:tn(e.radius,0)(n)}},Xi=o=>e=>{if(e.textArea===void 0)return e;const t=ye(0,1),n=nn(t(o)),r=tn(0,e.textArea.text.fontSize);return{...e,textArea:{...e.textArea,text:{...e.textArea.text,fontSize:r(n)}}}},$i=o=>e=>{if(e.textArea===void 0)return e;const t=ye(0,1),n=nn(t(o)),r=tn(e.textArea.text.fontSize,0);return{...e,textArea:{...e.textArea,text:{...e.textArea.text,fontSize:r(n)}}}},ji=o=>e=>Zt({...e,...Xi(o)(e),...Vi(o)(e)}),Zi=o=>e=>Zt({...e,...$i(o)(e),...Ki(o)(e)}),Qi=({controller:o,id:e})=>t=>{const{itemsAnimatingIn:n,itemsAnimatingOut:r}=o,s=n.get(e);if(s!==void 0)return ji(s)(t);const i=r.get(e);return i!==void 0?Zi(i)(t):Zt(t)},Ji=(o,e,t)=>{const n=Qi({controller:t,id:o.id}),r=e("nodeColor",o),s=e("nodeBorderColor",o),i=e("nodeSize",o),a=e("nodeBorderWidth",o),u=e("nodeText",o),c=e("nodeTextSize",o),l=e("nodeTextColor",o),d=e("nodeShape",o),f=n({at:{x:o.x,y:o.y},radius:i,color:r,stroke:{color:s,width:a},textArea:{text:{content:u,fontSize:c,fontWeight:"bold",color:l},color:O.TRANSPARENT}}),m=xs({at:{x:o.x-i,y:o.y-i},size:i*2,color:r,stroke:{color:s,width:a},textArea:{text:{content:u,fontSize:c,fontWeight:"bold",color:l},color:O.TRANSPARENT}});return{shape:d==="circle"?f:m,id:o.id,graphType:"node"}},be={IN:{BODY:[0,.75],TEXT_AREA:[.75,1]}},ea=o=>e=>{const t=e.color,n=e.text.color;if(!t||!n)return e;const r=a=>Mr(a).setAlpha(o).toRgbString(),s=r(t),i=r(n);return{...e,color:s,text:{...e.text,color:i}}},Jn=o=>e=>{if(!e)return;const n=ye(...be.IN.TEXT_AREA)(o);return ea(n)(e)},er=o=>e=>{if(!e)return;const n=1-ye(0,1)(o),r=e.text.color;if(!r)return e;const i=(a=>Mr(a).setAlpha(n).toRgbString())(r);return{...e,text:{...e.text,color:i}}},{interpolate:In,normalize:ta}=gt.utils,Bo=Ft["in-out"],na=o=>e=>{const t=ye(...be.IN.BODY),n=Bo(t(o)),r=In(e.start,e.end),s=In(0,e.width);return{end:r(n),width:s(n)}},ra=o=>e=>{const t=ye(0,1),n=Bo(t(o));return{width:In(e.width,0)(n)}},oa=o=>e=>{const t=ta(0,Je,o);return mt(be.IN.BODY[0],be.IN.BODY[1],t)?Ct({...e,...na(o)(e),textArea:void 0}):mt(be.IN.TEXT_AREA[0],be.IN.TEXT_AREA[1],t)?Ct({...e,textArea:Jn(o)(e.textArea)}):Ct(e)},sa=o=>e=>Ct({...e,...ra(o)(e),textArea:er(o)(e.textArea)}),ia=({controller:o,id:e})=>t=>{const{itemsAnimatingIn:n,itemsAnimatingOut:r}=o,s=n.get(e);if(s!==void 0)return oa(s)(t);const i=r.get(e);return i!==void 0?sa(i)(t):Ct(t)},{interpolate:Fo,normalize:aa}=gt.utils,Lo=Ft["in-out"],ua=o=>e=>{const t=ye(...be.IN.BODY),n=Lo(t(o));return{width:Fo(0,e.width)(n)}},ca=o=>e=>{const t=ye(0,1),n=Lo(t(o));return{width:Fo(e.width,0)(n)}},la=o=>e=>{const t=aa(0,Je,o);return mt(be.IN.BODY[0],be.IN.BODY[1],t)?st({...e,...ua(o)(e),textArea:void 0}):mt(be.IN.TEXT_AREA[0],be.IN.TEXT_AREA[1],t)?st({...e,textArea:Jn(o)(e.textArea)}):st(e)},da=o=>e=>st({...e,...ca(o)(e),textArea:er(o)(e.textArea)}),fa=({controller:o,id:e})=>t=>{const{itemsAnimatingIn:n,itemsAnimatingOut:r}=o,s=n.get(e);if(s!==void 0)return la(s)(t);const i=r.get(e);return i!==void 0?da(i)(t):st(t)},St={IN:{LINE:[0,.25],TURN:[.25,.5],ARROW:[.5,.75],BODY:[0,.75],TEXT_AREA:[.75,1]}},{interpolate:Uo,normalize:ha}=gt.utils,zo=Ft["in-out"],_a=o=>e=>{const t=ye(...St.IN.BODY),n=zo(t(o));return{lineWidth:Uo(1e-5,e.lineWidth)(n)}},pa=o=>e=>{const t=ye(0,1),n=zo(t(o));return{lineWidth:Uo(e.lineWidth,1e-5)(n)}},ma=o=>e=>{const t=ha(0,Je,o);return mt(St.IN.BODY[0],St.IN.BODY[1],t)?Et({...e,..._a(o)(e),textArea:void 0}):mt(St.IN.TEXT_AREA[0],St.IN.TEXT_AREA[1],t)?Et({...e,textArea:Jn(o)(e.textArea)}):Et(e)},ga=o=>e=>Et({...e,...pa(o)(e),textArea:er(o)(e.textArea)}),va=({controller:o,id:e})=>t=>{const{itemsAnimatingIn:n,itemsAnimatingOut:r}=o,s=n.get(e);if(s!==void 0)return ma(s)(t);const i=r.get(e);return i!==void 0?ga(i)(t):Et(t)},Tr=2,ya=(o,e)=>{const{displayEdgeLabels:t,isGraphDirected:n}=e.settings.value,r={id:o.id,controller:e.animationController},s=ia(r),i=fa(r),a=va(r),[u,c]=mn(o.id,e),d=Dr(u.id,c.id,e).length>1,f=c===u,m=e.getTheme("nodeBorderWidth",u),v=e.getTheme("nodeBorderWidth",c),_=e.getTheme("nodeSize",u),p=e.getTheme("nodeSize",c),h=Math.atan2(c.y-u.y,c.x-u.x),S=v/2+Tr,T={x:(p+S)*Math.cos(h),y:(p+S)*Math.sin(h)},E={x:u.x,y:u.y},C={x:c.x-(n?T.x:0),y:c.y-(n?T.y:0)},g=e.getTheme("edgeWidth",o),b=Math.max(g*1.2,7);d&&(E.x+=Math.cos(h+Math.PI/2)*b,E.y+=Math.sin(h+Math.PI/2)*b,C.x+=Math.cos(h+Math.PI/2)*b,C.y+=Math.sin(h+Math.PI/2)*b);const y=$o(E,e.edges.value.filter(Z=>(Z.from===u.id||Z.to===c.id)&&Z.from!==Z.to).map(Z=>{const[Q,ce]=mn(Z.id,e);return u.id===Q.id?ce:Q}).filter((Z,Q,ce)=>Q===ce.findIndex(Lt=>Lt.x===Z.x&&Lt.y===Z.y))),x=e.getTheme("edgeColor",o),A=e.getTheme("edgeTextColor",o),w=e.getTheme("graphBgColor"),M=e.getTheme("edgeText",o),P=e.getTheme("edgeTextSize",o),F=e.getTheme("edgeTextFontWeight",o),R=t?{color:w,activeColor:w,text:{content:M,color:A,fontSize:P,fontWeight:F}}:void 0,z=(_+m)*jo,X=z-(_+m/2)-Tr;if(f)return{shape:a({spacing:g*1.2,at:{x:u.x,y:u.y},upDistance:z,downDistance:X,rotation:y,lineWidth:g,color:x,textArea:R}),id:o.id,graphType:"edge"};const Te=_+m/2+p+v/2,Oe=(u.x-c.x)**2+(u.y-c.y)**2;return Te**2>Oe?void 0:n?{shape:s({start:E,end:C,width:g,textOffsetFromCenter:(_+m/2)/2,color:x,textArea:R}),id:o.id,graphType:"edge"}:{shape:i({start:E,end:C,width:g,color:x,textArea:R}),id:o.id,graphType:"edge"}},tr={nodeShape:"circle",nodeSize:35,nodeBorderWidth:8,nodeTextSize:24,nodeAnchorRadius:Math.ceil(Math.sqrt(35)*2),edgeWidth:10,edgeTextSize:20,nodeText:({label:o})=>o,edgeText:({label:o})=>o,edgeTextFontWeight:"bold",linkPreviewWidth:10},ba="rgb(100, 60, 70)",Ta={nodeBorderColor:O.BLACK,nodeColor:O.STONE_600,nodeTextColor:O.WHITE,nodeFocusBorderColor:O.RED_700,nodeFocusColor:ba,nodeFocusTextColor:O.WHITE,edgeColor:O.STONE_900,edgeFocusColor:O.RED_700,edgeFocusTextColor:O.WHITE,edgeTextColor:O.WHITE,graphBgColor:O.GRAY_600,graphBgPatternColor:O.WHITE+"15",nodeAnchorColorWhenParentFocused:O.RED_800,nodeAnchorColor:O.GRAY_900,linkPreviewColor:O.BLACK,marqueeSelectionBoxColor:O.WHITE+"15",marqueeSelectionBoxBorderColor:O.WHITE,marqueeEncapsulatedNodeBoxBorderColor:O.RED_700,marqueeEncapsulatedNodeBoxColor:O.RED_700+"20",...tr},xa={nodeColor:O.GRAY_50,nodeBorderColor:O.GRAY_800,nodeFocusBorderColor:O.BLUE_600,nodeFocusColor:O.BLUE_100,nodeTextColor:O.GRAY_900,nodeFocusTextColor:O.GRAY_900,edgeColor:O.GRAY_800,edgeTextColor:O.GRAY_900,edgeFocusColor:O.BLUE_600,edgeFocusTextColor:O.BLACK,graphBgColor:O.GRAY_200,graphBgPatternColor:O.BLACK+"15",nodeAnchorColor:O.BLACK,nodeAnchorColorWhenParentFocused:O.BLUE_900,linkPreviewColor:O.BLACK,marqueeSelectionBoxColor:O.BLUE_300+"15",marqueeSelectionBoxBorderColor:O.BLUE_500,marqueeEncapsulatedNodeBoxBorderColor:O.BLUE_700,marqueeEncapsulatedNodeBoxColor:O.BLUE_700+"05",...tr},Sa={nodeColor:O.PINK_100,nodeBorderColor:O.PINK_400,nodeFocusBorderColor:O.PURPLE_600,nodeFocusColor:O.PURPLE_200,nodeTextColor:O.PINK_600,nodeFocusTextColor:O.PURPLE_900,edgeColor:O.PINK_600,edgeTextColor:O.PINK_600,edgeFocusColor:O.PURPLE_600,edgeFocusTextColor:O.PURPLE_600,graphBgColor:O.PINK_300,graphBgPatternColor:O.WHITE+"50",nodeAnchorColor:O.PINK_500,nodeAnchorColorWhenParentFocused:O.PURPLE_700,linkPreviewColor:O.PINK_900,marqueeSelectionBoxColor:O.PINK_300+"15",marqueeSelectionBoxBorderColor:O.PINK_500,marqueeEncapsulatedNodeBoxBorderColor:O.PINK_700,marqueeEncapsulatedNodeBoxColor:O.PINK_700+"05",...tr},Go={light:xa,dark:Ta,girl:Sa},zu=(o,e)=>({nodeSize:o("nodeSize",e),nodeBorderWidth:o("nodeBorderWidth",e),nodeColor:o("nodeColor",e),nodeBorderColor:o("nodeBorderColor",e),nodeTextSize:o("nodeTextSize",e),nodeTextColor:o("nodeTextColor",e),nodeText:o("nodeText",e),nodeShape:o("nodeShape",e)}),Ca=()=>({nodeSize:[],nodeBorderWidth:[],nodeColor:[],nodeBorderColor:[],nodeFocusColor:[],nodeFocusBorderColor:[],nodeText:[],nodeFocusTextColor:[],nodeTextSize:[],nodeTextColor:[],nodeShape:[],edgeColor:[],edgeWidth:[],edgeText:[],edgeTextSize:[],edgeTextColor:[],edgeFocusTextColor:[],edgeTextFontWeight:[],edgeFocusColor:[],graphBgColor:[],graphBgPatternColor:[],nodeAnchorRadius:[],nodeAnchorColor:[],nodeAnchorColorWhenParentFocused:[],linkPreviewColor:[],linkPreviewWidth:[],marqueeSelectionBoxColor:[],marqueeSelectionBoxBorderColor:[],marqueeEncapsulatedNodeBoxColor:[],marqueeEncapsulatedNodeBoxBorderColor:[]}),Ea=o=>Object.prototype.toString.call(o)==="[object Object]",Wo=(o,e)=>{const t={};if(!o)return e;if(!e)return null;const n=Object.keys(o),r=Object.keys(e);for(const s of r)n.includes(s)||(t[s]=e[s]);for(const s of n){if(Ea(o[s])){const i=Wo(o[s],e[s]);i&&(t[s]=i);continue}if(Array.isArray(o[s])){JSON.stringify(o[s])!==JSON.stringify(e[s])&&(t[s]=e[s]);continue}else o[s]!==e[s]&&(t[s]=e[s])}return Object.keys(t).length?t:null},kn=o=>{const e={...o};for(const t in e)typeof e[t]=="object"&&(e[t]=kn(e[t]));return e},Aa=o=>({subscribe:(e,t)=>o[e].add(t),unsubscribe:(e,t)=>o[e].delete(t),emit:(e,...t)=>{for(const n of o[e])n(...t)}}),wa=()=>({onStructureChange:new Set,onNodeAdded:new Set,onBulkNodeAdded:new Set,onNodeRemoved:new Set,onBulkNodeRemoved:new Set,onNodeMoved:new Set,onBulkNodeMoved:new Set,onEdgeAdded:new Set,onBulkEdgeAdded:new Set,onEdgeRemoved:new Set,onBulkEdgeRemoved:new Set,onEdgeLabelEdited:new Set,onRepaint:new Set,onNodeHoverChange:new Set,onGraphLoaded:new Set,onGraphReset:new Set,onClick:new Set,onMouseDown:new Set,onMouseUp:new Set,onMouseMove:new Set,onDblClick:new Set,onContextMenu:new Set,onKeyDown:new Set,onKeyUp:new Set,onThemeChange:new Set,onSettingsChange:new Set,onUndo:new Set,onRedo:new Set,onFocusChange:new Set,onNodeDragStart:new Set,onNodeDrop:new Set,onNodeAnchorDragStart:new Set,onNodeAnchorDrop:new Set,onGroupDragStart:new Set,onGroupDrop:new Set,onMarqueeBeginSelection:new Set,onMarqueeEndSelection:new Set}),xr=o=>o==null,Oa=o=>{const e=o.trim().split("/").filter(Boolean);if(e.length!==2)return!1;const[t,n]=e.map(Number);return!(xr(t)||xr(n))},Na=o=>{if(!Oa(o))return;const e=o.split("/"),[t,n]=e.map(Number);return t/n},Ma={displayEdgeLabels:!0,edgeLabelsEditable:!0,edgeInputToLabel:o=>{var n;const e=o.trim();if(!e)return;const t=(n=Na(e))==null?void 0:n.toFixed(2);return t==="Infinity"?"∞":t==="-Infinity"?"-∞":t===void 0&&isNaN(Number(e))?void 0:t??e},newNodeLabelGetter:null,isGraphDirected:!0},Da={focusable:!0,focusBlacklist:[]},Pa={draggable:!0},Ia={nodeAnchors:!0},ka={marquee:!0,marqueeSelectableGraphTypes:["node","edge"]},Ra={interactive:!0,userAddedEdgeLabel:"1",userAddedEdgeRuleNoSelfLoops:!1,userAddedEdgeRuleOneEdgePerPath:!1},Ba={persistent:!0,persistentStorageKey:"graph",persistentBlacklist:new Set},Fa={shortcuts:!0,shortcutUndo:!0,shortcutRedo:!0,shortcutSelectAll:!0,shortcutDelete:!0,shortcutEscape:!0,shortcutSave:!0},La={...Ma,...Da,...Pa,...Ia,...ka,...Ra,...Ba,...Fa},Sr=(o,...e)=>typeof o=="function"?o(...e):o,Ua=(o,e)=>(t,...n)=>{const r=e[t].findLast(i=>{const a=i.value;return Sr(a,...n)!==void 0}),s=(r==null?void 0:r.value)??Go[o.value][t];if(!s)throw new Error(`Theme property "${t}" not found`);return Sr(s,...n)},za=(o,e)=>{const t=I(()=>{const r=new Map;for(const s of o.value)r.set(s.id,s);return r}),n=I(()=>{const r=new Map;for(const s of e.value)r.set(s.id,s);return r});return{nodeIdToNodeMap:t,edgeIdToEdgeMap:n}},Ga=({canvas:o,emit:e})=>{const t=D([]),n=[],r=()=>{var f,m,v,_;if(!o.value)return;const a=o.value.getContext("2d");if(!a)return;a.clearRect(0,0,o.value.width,o.value.height);const u=n.reduce((p,h)=>h(p),[]);t.value=[...u.sort((p,h)=>p.priority-h.priority)];const c=t.value.findLastIndex(p=>p.graphType==="edge"),l=t.value.slice(0,c+1),d=t.value.slice(c+1);for(const p of l)p.shape.drawShape(a);for(const p of l)(m=(f=p.shape).drawTextAreaMatte)==null||m.call(f,a);for(const p of l)(_=(v=p.shape).drawText)==null||_.call(v,a);for(const p of d)p.shape.draw(a);e("onRepaint",a,"loop")},s=setInterval(r,1e3/60);return Rn(()=>{clearInterval(s)}),setTimeout(r,1e3),{aggregator:t,updateAggregator:n,getSchemaItemsByCoordinates:a=>t.value.sort((u,c)=>u.priority-c.priority).filter(u=>{var c,l;return u.shape.shapeHitbox(a)||((l=(c=u.shape).textHitbox)==null?void 0:l.call(c,a))})}},Wa={broadcast:!0,focus:!0,history:!0,animate:!1},qa={broadcast:!0,focus:!1,history:!0,animate:!1},Cr={broadcast:!0,history:!0,animate:!1},Er={broadcast:!0,focus:!1,history:!0,animate:!1},Ha={broadcast:!1,focus:!1,history:!1,animate:!0},Ar={broadcast:!0,history:!0,animate:!1},Ya={broadcast:!0},Va={label:""},Ka="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");Array.from({length:999},(o,e)=>(e+1).toString());const Xa=(o,e)=>()=>{let t=o.value.map(({label:a})=>a),n=0,r=0,s;const i=()=>n===0?"":e[(n-1)%e.length];for(;!s;){r>=e.length&&(t=t.slice(e.length),r=0,n++);const u=i()+e[r];t.includes(u)||(s=u),r++}return s},$a=o=>Xa(o.nodes,Ka),ja=({nodes:o,edges:e,nodeMap:t,edgeMap:n,emit:r,settings:s,animationController:i})=>{const a=T=>t.value.get(T),u=T=>n.value.get(T),c=(T,E={})=>{if(T!=null&&T.id&&a(T.id)){console.warn("prevented adding a node with an existing id, this shouldn't happen");return}const C={...Wa,...E},g=s.value.newNodeLabelGetter??$a({nodes:o}),b={id:T.id??qt(),label:T.label??g(),x:T.x??0,y:T.y??0};return C.animate&&i.animateIn(b.id),o.value.push(b),r("onNodeAdded",b,C),r("onStructureChange"),b},l=(T,E={})=>{if(T.length===0)return;const C={...qa,...E},g=[];for(const b of T){const y=c(b,{focus:!1,broadcast:!1,history:!1});y&&g.push(y)}g.length!==0&&r("onBulkNodeAdded",g,C)},d=(T,E={})=>{const C={...Er,...E},{isGraphDirected:g}=s.value,[b,y]=[a(T.from),a(T.to)];if(!b||!y)return;if(g){if(e.value.find(w=>w.from===T.from&&w.to===T.to))return}else if(e.value.find(w=>w.from===T.from&&w.to===T.to||w.from===T.to&&w.to===T.from))return;const x={...Va,id:qt(),...T};return C.animate&&i.animateIn(x.id),e.value.push(x),r("onEdgeAdded",x,C),r("onStructureChange"),x},f=(T,E={})=>{if(T.length===0)return;const C={...Ha,...E},g=[];for(const b of T){const y=d(b,{broadcast:!1,history:!1});y&&g.push(y)}g.length!==0&&r("onBulkEdgeAdded",g,C)},m=(T,E,C={})=>{const g=a(T);if(!g)return;const b={...Ya,...C};g.x=E.x,g.y=E.y,r("onNodeMoved",g,b)},v=(T,E,C={})=>{const g={...Er,...C},b=u(T);if(!b)return;const y=b.label;b.label=E,r("onEdgeLabelEdited",b,y,g),r("onStructureChange")},_=async(T,E={})=>{const C=a(T);if(!C)return;const g={...Cr,...E},b=Pr(C.id,{edges:e,getEdge:u,settings:s}),y=[];for(const x of b){const A=await h(x.id,{broadcast:!1,history:!1,animate:g.animate});A&&y.push(A)}return g.animate&&await i.animateOut(C.id),o.value=o.value.filter(x=>x.id!==C.id),r("onNodeRemoved",C,y,g),r("onStructureChange"),[C,y]},p=async(T,E={})=>{if(T.length===0)return;const C={...Cr,...E},g=[],b=[];for(const y of T){const x=await _(y,{broadcast:!1,history:!1,animate:C.animate});if(!x)continue;const[A,w]=x;g.push(A),b.push(...w)}g.length!==0&&r("onBulkNodeRemoved",g,b,C)},h=async(T,E={})=>{const C=u(T);if(!C)return;const g={...Ar,...E};return g.animate&&await i.animateOut(C.id),e.value=e.value.filter(b=>b.id!==C.id),r("onEdgeRemoved",C,g),r("onStructureChange"),C};return{getNode:a,getEdge:u,addNode:c,addEdge:d,moveNode:m,editEdgeLabel:v,removeNode:_,removeEdge:h,bulkAddNode:l,bulkRemoveNode:p,bulkAddEdge:f,bulkRemoveEdge:async(T,E={})=>{if(T.length===0)return;const C={...Ar,...E},g=[];for(const b of T){const y=await h(b,{broadcast:!1,history:!1,animate:C.animate});y&&g.push(y)}if(g.length!==0)return r("onBulkEdgeRemoved",g,C),g}}},Za=({subscribe:o,canvas:e,graphAtMousePosition:t})=>{const n=D(!1),r=D(!1),s=D({node:"grab",edge:"pointer","node-anchor":"grab","encapsulated-node-box":"move"}),i=D(),a=I(()=>!!i.value),u=f=>{i.value=f},c=()=>{i.value=void 0},l=f=>{var v;if(!f)return"default";if(a.value)return((v=i.value)==null?void 0:v.call(i,f))??!1?"pointer":"default";const m=s.value[f.graphType]??"default";return m==="grab"&&n.value?"grabbing":m},d=({items:f})=>{if(!e.value||r.value)return;const m=f.at(-1);e.value.style.cursor=l(m)};return o("onMouseDown",f=>{n.value=!0,d(f)}),o("onMouseUp",f=>{n.value=!1,d(f)}),o("onMouseMove",d),ct(s,()=>{d({items:t.value.items})},{deep:!0}),{graphToCursorMap:s,activateCursorSelectMode:u,deactivateCursorSelectMode:c,graphCursorDisabled:r}},Qa=o=>{const e=new Map,t=new Set,n=new Map;return s=>({hold:u=>{if(t.has(`${s}-${u}`))return;const l=e.get(u)??0;l===0&&(n.set(u,o.value[u]),o.value[u]=!1),e.set(u,l+1),t.add(`${s}-${u}`)},release:u=>{if(!t.has(`${s}-${u}`))return;const c=e.get(u)??0;if(c!==0){if(c===1){const l=n.get(u);if(l===void 0)throw new Error("holdState not found");o.value[u]=l,n.delete(u)}e.set(u,c-1),t.delete(`${s}-${u}`)}}})},Ja=(o,e={})=>{const t=D("light"),n=Ca(),r=Ua(t,n),s=D({...La,...e}),i=Qa(s),a=wa(),{subscribe:u,unsubscribe:c,emit:l}=Aa(a),d=D(!0);Zo(o,()=>{d.value=!1}),u("onMouseDown",()=>{d.value=!0});const f=Qo(o),m=D([]),v=D([]),_=D({coords:{x:0,y:0},items:[]}),p=Za({canvas:o,subscribe:u,graphAtMousePosition:_}),h=N=>{const L=Ir(o),J=ts(N,L);_.value={coords:J,items:b(J)}},S=N=>({..._.value,event:N}),T={click:N=>{N.preventDefault(),l("onClick",S(N))},mousemove:N=>{N.preventDefault(),l("onMouseMove",S(N))},mousedown:N=>{N.preventDefault(),l("onMouseDown",S(N))},mouseup:N=>{N.preventDefault(),l("onMouseUp",S(N))},dblclick:N=>{N.preventDefault(),l("onDblClick",S(N))},contextmenu:N=>{l("onContextMenu",S(N))}},E={keydown:N=>l("onKeyDown",N),keyup:N=>l("onKeyUp",N)},{aggregator:C,updateAggregator:g,getSchemaItemsByCoordinates:b}=Ga({canvas:o,emit:l}),y=Ui(),x=N=>{const L={edges:v,getNode:M,getEdge:P,getTheme:r,settings:s,animationController:y},J=v.value.map(We=>ya(We,L)).filter(Boolean).map((We,rn)=>({...We,priority:rn*10})),Vo=m.value.map(We=>Ji(We,r,y)).filter(Boolean).map((We,rn)=>({...We,priority:rn*10+1e3}));return N.push(...J),N.push(...Vo),N};g.push(x),Jo(()=>{if(!o.value)throw new Error("canvas element not found");o.value.addEventListener("mousemove",h);for(const[N,L]of Object.entries(T))o.value.addEventListener(N,L);for(const[N,L]of Object.entries(E))document.addEventListener(N,L)}),es(()=>{if(!o.value)throw new Error("Canvas element not found");o.value.removeEventListener("mousemove",h);for(const[N,L]of Object.entries(T))o.value.removeEventListener(N,L);for(const[N,L]of Object.entries(E))document.removeEventListener(N,L)});const{nodeIdToNodeMap:A,edgeIdToEdgeMap:w}=za(m,v),{getNode:M,getEdge:P,addNode:F,addEdge:G,moveNode:R,editEdgeLabel:z,removeNode:X,removeEdge:Te,bulkAddNode:Oe,bulkRemoveNode:Ie,bulkAddEdge:xe,bulkRemoveEdge:Z}=ja({nodes:m,edges:v,nodeMap:A,edgeMap:w,emit:l,settings:s,animationController:y}),Q=I(()=>m.value.reduce((N,L,J)=>(N.set(L.id,J),N),new Map)),ce=I(()=>v.value.reduce((N,L,J)=>(N.set(L.id,J),N),new Map)),Lt=(N,L)=>{const J=b({x:N,y:L}).pop();if(J&&J.graphType==="node")return M(J.id)};let vt;u("onMouseMove",({items:N})=>{const L=N.at(-1);if(!L||L.graphType!=="node")return;const J=M(L.id);J!==vt&&(l("onNodeHoverChange",J,vt),vt=J)});const qo=N=>(vt&&kr(vt.id,N),N);g.push(qo);const Ho=N=>{m.value=N.nodes,v.value=N.edges,l("onGraphLoaded"),l("onStructureChange")},Yo=()=>{m.value=[],v.value=[],l("onGraphReset"),l("onStructureChange")};ct(t,async(N,L)=>{l("onThemeChange",N,L)});const nr=D(kn(s.value));return ct(s,N=>{const L=Wo(nr.value,N);L&&(nr.value=kn(s.value),l("onSettingsChange",L))},{deep:!0}),{nodes:m,edges:v,nodeIdToIndex:Q,edgeIdToIndex:ce,getNode:M,getEdge:P,addNode:F,addEdge:G,moveNode:R,editEdgeLabel:z,removeNode:X,removeEdge:Te,bulkAddNode:Oe,bulkRemoveNode:Ie,bulkAddEdge:xe,bulkRemoveEdge:Z,getSchemaItemsByCoordinates:b,getNodeByCoordinates:Lt,eventBus:a,subscribe:u,unsubscribe:c,emit:l,updateAggregator:g,aggregator:C,animationController:y,pluginHoldController:i,baseTheme:I(()=>Go[t.value]),themeName:t,getTheme:r,themeMap:n,settings:s,load:Ho,reset:Yo,canvas:o,canvasFocused:d,canvasHovered:I(()=>f.value),graphAtMousePosition:_,updateGraphAtMousePosition:h,...p}},eu="use-marquee-graph",tu={THEME_ID:eu},nu=(o,e)=>{const t={at:{x:1/0,y:1/0},width:0,height:0};if(o.length<2)return t;let n=1/0,r=1/0,s=-1/0,i=-1/0;for(const a of o){const u=e.getTheme("nodeSize",a),c=e.getTheme("nodeBorderWidth",a),l=u+c/2,{x:d,y:f}=a;n=Math.min(n,d-l),r=Math.min(r,f-l),s=Math.max(s,d+l),i=Math.max(i,f+l)}return n<1/0&&r<1/0&&s>-1/0&&i>-1/0?(t.at.x=n,t.at.y=r,t.width=s-n,t.height=i-r):(t.width=0,t.height=0),t},ru=o=>{const e=D(),t=D(),n=D(),{setTheme:r,removeTheme:s}=Rr(o,tu.THEME_ID),i=()=>{r("nodeAnchorColor",O.TRANSPARENT),r("nodeAnchorColorWhenParentFocused",O.TRANSPARENT)},a=()=>{s("nodeAnchorColor"),s("nodeAnchorColorWhenParentFocused")},u=y=>{const{width:x,height:A}=y;return Math.abs(x*A)},c=({items:y,coords:x,event:A})=>{if(A.button!==lt.left)return;const w=y.at(-1);(w==null?void 0:w.graphType)!=="encapsulated-node-box"&&a(),w||m(x)},l=({items:y,coords:x})=>{if(!n.value)return;const A=y.at(-1);if((A==null?void 0:A.graphType)!=="encapsulated-node-box")return;const w=x.x-n.value.x,M=x.y-n.value.y;n.value=x;for(const P of o.focus.focusedNodes.value)o.moveNode(P.id,{x:P.x+w,y:P.y+M});p()},d=({items:y,coords:x,event:A})=>{if(A.button!==lt.left||e.value)return;const w=y.at(-1);(w==null?void 0:w.graphType)==="encapsulated-node-box"&&(n.value=x,o.emit("onGroupDragStart",o.focus.focusedNodes.value,x))},f=()=>{n.value&&(o.emit("onGroupDrop",o.focus.focusedNodes.value,n.value),n.value=void 0)},m=y=>{i(),o.graphCursorDisabled.value=!0,e.value={at:y,width:0,height:0},o.emit("onMarqueeBeginSelection",y)},v=()=>{if(!e.value)return;const y=e.value;e.value=void 0,o.graphCursorDisabled.value=!1,a(),o.emit("onMarqueeEndSelection",y)},_=y=>{if(u(y)<100)return;const A=[];for(const{id:w,shape:M,graphType:P}of o.aggregator.value){const{marqueeSelectableGraphTypes:F}=o.settings.value;if(!F.includes(P))continue;M.efficientHitbox(y)&&A.push(w)}o.focus.set(A)},p=()=>{t.value=nu(o.focus.focusedNodes.value,o)},h=({coords:y})=>{if(!e.value)return;const{x,y:A}=y;e.value.width=x-e.value.at.x,e.value.height=A-e.value.at.y,_(e.value)},S=y=>({id:"marquee-box",graphType:"marquee-box",shape:or({...y,color:o.getTheme("marqueeSelectionBoxColor"),stroke:{color:o.getTheme("marqueeSelectionBoxBorderColor"),width:2}}),priority:1/0}),T=y=>{if(!e.value)return y;const x=S(e.value);return y.push(x),y},E=y=>({id:"encapsulated-node-box",graphType:"encapsulated-node-box",shape:or({...y,color:o.getTheme("marqueeEncapsulatedNodeBoxColor"),stroke:{color:o.getTheme("marqueeEncapsulatedNodeBoxBorderColor"),width:2}}),priority:1/0}),C=y=>{if(!t.value)return y;const x=E(t.value);return y.push(x),y};o.updateAggregator.push(C),o.updateAggregator.push(T);const g=()=>{o.subscribe("onFocusChange",p),o.subscribe("onMouseDown",c),o.subscribe("onMouseUp",v),o.subscribe("onContextMenu",v),o.subscribe("onMouseMove",h),o.subscribe("onMouseDown",d),o.subscribe("onMouseUp",f),o.subscribe("onMouseMove",l),o.subscribe("onUndo",p),o.subscribe("onRedo",p)},b=()=>{o.unsubscribe("onFocusChange",p),o.unsubscribe("onMouseDown",c),o.unsubscribe("onMouseUp",v),o.unsubscribe("onContextMenu",v),o.unsubscribe("onMouseMove",h),o.unsubscribe("onMouseDown",d),o.unsubscribe("onMouseUp",f),o.unsubscribe("onMouseMove",l),o.unsubscribe("onUndo",p),o.unsubscribe("onRedo",p),e.value&&v()};return o.subscribe("onSettingsChange",y=>{y.marquee===!0?g():y.marquee===!1&&b()}),o.settings.value.marquee&&g(),{updateEncapsulatedNodeBox:p}},ou=o=>{const e=D(),{hold:t,release:n}=o.pluginHoldController("node-drag"),r=({items:c,coords:l,event:d})=>{if(d.button!==lt.left)return;const f=c.at(-1);if(!f||f.graphType!=="node")return;t("nodeAnchors");const m=o.getNode(f.id);m&&(e.value={node:m,coords:l},o.emit("onNodeDragStart",m))},s=()=>{e.value&&(o.emit("onNodeDrop",e.value.node),n("nodeAnchors"),o.nodeAnchors.setParentNode(e.value.node.id),e.value=void 0)},i=({coords:c})=>{if(!e.value)return;const{node:l,coords:d}=e.value,f=c.x-d.x,m=c.y-d.y;o.moveNode(l.id,{x:l.x+f,y:l.y+m}),e.value.coords=c},a=()=>{o.subscribe("onMouseDown",r),o.subscribe("onMouseUp",s),o.subscribe("onMouseMove",i),o.graphToCursorMap.value.node="grab"},u=()=>{o.unsubscribe("onMouseDown",r),o.unsubscribe("onMouseUp",s),o.unsubscribe("onMouseMove",i),o.graphToCursorMap.value.node="pointer",e.value&&s()};return o.subscribe("onSettingsChange",c=>{c.draggable===!1?u():c.draggable===!0&&a()}),o.settings.value.draggable&&a(),o.settings.value.draggable||u(),{currentlyDraggingNode:I(()=>{var c;return(c=e.value)==null?void 0:c.node})}},su=o=>{const e=D(),t=D(),n=g=>{if(o.settings.value.nodeAnchors===!1)return;const b=o.getNode(g);if(!b)throw new Error("node not found");o.animationController.isAnimating(b.id)||(e.value=b,c(b))},r=()=>{e.value=void 0,t.value=void 0},s=D(),i=({items:g})=>{const b=g.at(-1);if(!b)return s.value=void 0;s.value=b.id},a=g=>{var M;const{getTheme:b}=o,y=b("nodeAnchorColor",g),x=b("nodeAnchorColorWhenParentFocused",g),A=b("nodeAnchorRadius",g),w=[];for(const P of u.value){const{x:F,y:G,id:R}=P,z=R===s.value||R===((M=t.value)==null?void 0:M.id),X={at:{x:F,y:G},radius:A,color:z?x:y};t.value&&t.value.direction===P.direction&&(X.at.x=t.value.x,X.at.y=t.value.y);const Te=Zt(X);w.push({id:P.id,graphType:"node-anchor",shape:Te,priority:1/0})}return w},u=D([]),c=g=>{if(!g)return u.value=[];const{getTheme:b}=o,y=b("nodeAnchorRadius",g),x=b("nodeSize",g),A=b("nodeBorderWidth",g),w=x-y/3+A/2;u.value=[{x:g.x,y:g.y-w,direction:"north"},{x:g.x+w,y:g.y,direction:"east"},{x:g.x,y:g.y+w,direction:"south"},{x:g.x-w,y:g.y,direction:"west"}].map(M=>({...M,id:qt()}))},l=({items:g,event:b})=>{if(b.button!==lt.left)return;const y=g.at(-1);if(!y||y.graphType!=="node-anchor")return;const{id:x}=y;return u.value.find(A=>A.id===x)},d=()=>{if(!e.value||!t.value)return;const{x:g,y:b}=t.value,y={x:e.value.x,y:e.value.y},x={x:g,y:b},{getTheme:A}=o,w=A("linkPreviewColor",e.value,t.value),M=A("linkPreviewWidth",e.value,t.value);return{id:"link-preview",graphType:"link-preview",shape:st({start:y,end:x,color:w,width:M})}},f=({items:g})=>{if(t.value)return;const b=g.at(-1);if(!b)return r();if(b.graphType!=="node")return;const y=o.getNode(b.id);if(!y)throw new Error("node in aggregator but not in graph");const x=o.focus.isFocused(y.id),A=o.focus.focusedNodes.value.length>1;if(x&&A)return r();n(y.id),c(y)},m=g=>{if(!e.value)return;const b=l(g);b&&(t.value=b,o.emit("onNodeAnchorDragStart",e.value,b))},v=({coords:g})=>{if(!t.value)return;const{x:b,y}=g;t.value.x=b,t.value.y=y},_=()=>{if(t.value){if(!e.value)throw new Error("active anchor without parent node")}else return;o.emit("onNodeAnchorDrop",e.value,t.value),r()},p=g=>{if(!e.value)return g;const b=a(e.value);for(const y of b)g.push(y);return g},h=g=>{var w;if(!e.value||!t.value)return g;const{id:b}=e.value;kr(b,g);const y=(w=g.find(M=>M.id===b))==null?void 0:w.priority;if(!y)return g;const x=d();if(!x)return g;const A={...x,priority:y-.1};return g.push(A),g};o.updateAggregator.push(p),o.updateAggregator.push(h);const S=g=>{var b;((b=e.value)==null?void 0:b.id)===g.id&&r()},T=()=>{if(!e.value)return;const g=o.focus.isFocused(e.value.id),b=o.focus.focusedNodes.value.length>1;g&&b&&r()},E=()=>{o.subscribe("onNodeRemoved",S),o.subscribe("onNodeMoved",r),o.subscribe("onNodeDrop",c),o.subscribe("onMouseMove",f),o.subscribe("onMouseMove",v),o.subscribe("onMouseMove",i),o.subscribe("onMouseDown",m),o.subscribe("onMouseUp",_),o.subscribe("onFocusChange",T)},C=()=>{o.unsubscribe("onNodeRemoved",S),o.unsubscribe("onNodeMoved",r),o.unsubscribe("onNodeDrop",c),o.unsubscribe("onMouseMove",f),o.unsubscribe("onMouseMove",v),o.unsubscribe("onMouseMove",i),o.unsubscribe("onMouseDown",m),o.unsubscribe("onMouseUp",_),o.unsubscribe("onFocusChange",T),r()};return o.subscribe("onSettingsChange",g=>{g.nodeAnchors===!0?E():g.nodeAnchors===!1&&C()}),o.settings.value.nodeAnchors&&E(),{currentDraggingAnchor:gn(t),parentNode:gn(e),setParentNode:n}},iu=(o=!1)=>{const e=a=>a.key===" "?"Space":a.key.length>1||o?a.key:a.key.toUpperCase(),t=D(""),n=I(()=>{let a;return t.value.split("+").filter(u=>{const c=u===a;return a=u,!c}).join("+")}),r=a=>{t.value.length>0&&(t.value+="+"),t.value+=e(a)},s=()=>{t.value=""},i=a=>n.value===a;return document.addEventListener("keydown",r),document.addEventListener("keyup",s),Rn(()=>{document.removeEventListener("keydown",r),document.removeEventListener("keyup",s)}),{isPressed:i,currentKeyString:t}},_n=window.navigator.userAgent.includes("Mac")?"Mac":"Windows",au=o=>{const{settings:e}=o,t=ns(),n=()=>{if(o.annotation.isActive.value&&o.annotation.undo(),e.value.interactive){const g=o.history.undo();if(!g)return;o.focus.set(g.affectedItems.map(b=>b.data.id))}},r=()=>{if(o.annotation.isActive.value&&o.annotation.redo(),e.value.interactive){const g=o.history.redo();if(!g)return;o.focus.set(g.affectedItems.map(b=>b.data.id))}},s=()=>o.focus.reset(),i=()=>o.focus.all(),a=()=>{e.value.interactive!==!1&&(o.bulkRemoveNode([...o.focus.focusedItemIds.value]),o.bulkRemoveEdge([...o.focus.focusedItemIds.value]))},u=()=>{const g=["Magic Graphs saves for you automagically ⚡","Don’t worry, We’ve been saving while you weren’t looking. 😎","Magic Graphs syncs with your browser automatically. ✨",`Pressing ${_n==="Mac"?"⌘":"Ctrl"} + S again? Okay, We saved it twice... just kidding! 😂`,"Saved automatically — like magic, but better because it’s real. 🌟","Magic Graphs keeps your data saved so you don’t have to worry 😅","Saving? Already done. You’re fast, but we’re faster. 🏃‍♂️💨"];t.add({severity:"secondary",life:3e3,detail:g[Math.floor(Math.random()*g.length)]})},c=(g,b)=>b===!1?()=>{}:typeof b=="function"?b:g,l=I(()=>c(r,e.value.shortcutRedo)),d=I(()=>c(n,e.value.shortcutUndo)),f=I(()=>c(s,e.value.shortcutEscape)),m=I(()=>c(i,e.value.shortcutSelectAll)),v=I(()=>c(a,e.value.shortcutDelete)),_=I(()=>c(u,e.value.shortcutSave)),p=I(()=>({Mac:{"Meta+Z":{name:"Undo",shortcut:d.value},"Shift+Meta+Z":{name:"Redo",shortcut:l.value},"Meta+Shift+Z":{name:"Redo",shortcut:l.value},Backspace:{name:"Delete",shortcut:v.value},"Meta+A":{name:"Select All",shortcut:m.value},Escape:{name:"Deselect",shortcut:f.value},"Meta+S":{name:"Save",shortcut:_.value}},Windows:{"Control+Z":{name:"Undo",shortcut:d.value},"Shift+Control+Z":{name:"Redo",shortcut:l.value},"Control+Shift+Z":{name:"Redo",shortcut:l.value},Delete:{name:"Delete",shortcut:v.value},"Control+A":{name:"Select All",shortcut:m.value},Escape:{name:"Deselect",shortcut:f.value},"Control+S":{name:"Save",shortcut:_.value}}})),h=I(()=>{const g=p.value[_n],b={};for(const y in g)b[g[y].name]=y;return b}),{isPressed:S}=iu(),T=g=>{if(o.canvasFocused.value===!1)return;const b=p.value[_n];for(const y in b)if(S(y)){b[y].shortcut(),g.preventDefault();return}},E=()=>{o.subscribe("onKeyDown",T)},C=()=>{o.unsubscribe("onKeyDown",T)};return e.value.shortcuts&&E(),o.subscribe("onSettingsChange",g=>{g.shortcuts===!0?E():g.shortcuts===!1&&C()}),Rn(()=>t.removeAllGroups()),{nameToBindingKeys:h,trigger:{delete:v,selectAll:m,escape:f,redo:l,undo:d}}},uu=[O.RED_600,O.BLUE_600,O.GREEN_600,O.YELLOW_600],cu=[3,6,9,12],wr=100,lu=o=>{const e=D([]),t=D([]);return{clearHistory:()=>{e.value=[],t.value=[]},undo:()=>{const u=e.value.pop();if(!u)return;const{action:c,annotations:l}=u,d=l.map(({id:f})=>f);c==="add"?o.value=o.value.filter(({id:f})=>!d.includes(f)):c==="remove"&&o.value.push(...l),t.value.push(u)},redo:()=>{const u=t.value.pop();if(!u)return;const{action:c,annotations:l}=u,d=l.map(({id:f})=>f);c==="add"?o.value.push(...l):c==="remove"&&(o.value=o.value.filter(({id:f})=>!d.includes(f))),e.value.push(u)},addToUndoStack:u=>{e.value.push(u),e.value.length>wr&&e.value.shift()},addToRedoStack:u=>{t.value.push(u),t.value.length>wr&&t.value.shift()},canUndo:I(()=>e.value.length!==0),canRedo:I(()=>t.value.length!==0)}},pn=10,du=rs(),fu=o=>{const e=D(uu[0]),t=D(cu[1]),n=D(!1),r=D(!1),s=D(),i=D(Date.now()),a=D(new Set),u=D([]),c=D([]),l=D(!1),d=D(),f=D(!1),m=lu(c),v=()=>{c.value.length!==0&&(m.addToUndoStack({action:"remove",annotations:c.value}),c.value=[])},_=()=>{s.value||(s.value=setInterval(()=>{Date.now()-i.value>50&&r.value&&u.value.length>=2&&u.value.shift()},50))},p=({coords:y,event:x})=>{if(x.button===lt.left){if(n.value){const A=rr({at:y,radius:pn})(),w=c.value.filter(M=>tt.scribble(M).efficientHitbox(A));for(const M of w)a.value.add(M.id)}l.value=!0,d.value=y,u.value=[y]}},h=({coords:y})=>{if(!(!l.value||!d.value)&&u.value.length!==0){if(n.value){const x=rr({at:y,radius:pn})(),A=c.value.filter(w=>tt.scribble(w).efficientHitbox(x));for(const w of A)a.value.add(w.id);return}d.value=y,u.value.push(y),r.value&&u.value.length>10&&u.value.shift(),r.value&&_(),i.value=Date.now()}},S=()=>{if(!l.value)return;if(l.value=!1,d.value=void 0,n.value){const x=c.value.filter(A=>a.value.has(A.id));m.addToUndoStack({action:"remove",annotations:x}),c.value=c.value.filter(A=>!a.value.has(A.id)),a.value.clear();return}if(r.value){s.value=void 0;return}const y={id:qt(),type:"draw",points:u.value,color:e.value,brushWeight:t.value};c.value.push(y),m.addToUndoStack({action:"add",annotations:[y]}),u.value=[]},T=I(()=>n.value||r.value);ct(T,()=>{o.canvas.value&&(o.canvas.value.style.cursor=T.value?"none":"crosshair")});const E=y=>{if(!f.value)return y;if(n.value&&o.canvasHovered.value){const x=tt.circle({at:o.graphAtMousePosition.value.coords,radius:pn,color:O.TRANSPARENT,stroke:{color:du.value.contrast,width:2}});y.push({graphType:"annotation",id:x.id,shape:x,priority:5050})}else if(u.value.length>0&&l.value){const x=tt.scribble({type:"draw",points:u.value,color:e.value,brushWeight:t.value});y.push({graphType:"annotation",id:x.id,shape:x,priority:5001})}else if(r.value&&o.canvasHovered.value){const x=tt.circle({at:o.graphAtMousePosition.value.coords,radius:t.value,color:e.value});y.push({graphType:"annotation",id:x.id,shape:x,priority:5050})}for(const x of c.value){const A=a.value.has(x.id);y.push({graphType:"annotation",id:x.id,shape:tt.scribble({...x,color:x.color+(A?"50":"")}),priority:5e3})}return y};return o.updateAggregator.push(E),{clear:v,isActive:f,annotations:c,isLaserPointing:r,isErasing:n,color:e,brushWeight:t,activate:()=>{o.canvas.value&&(f.value=!0,o.settings.value.interactive=!1,o.settings.value.marquee=!1,o.settings.value.focusable=!1,o.settings.value.draggable=!1,o.graphCursorDisabled.value=!0,o.canvas.value.style.cursor="crosshair",o.subscribe("onMouseDown",p),o.subscribe("onMouseMove",h),o.subscribe("onMouseUp",S))},deactivate:()=>{o.canvas.value&&(f.value=!1,n.value=!1,o.settings.value.interactive=!0,o.settings.value.marquee=!0,o.settings.value.focusable=!0,o.settings.value.draggable=!0,o.graphCursorDisabled.value=!1,o.canvas.value.style.cursor="default",o.unsubscribe("onMouseDown",p),o.unsubscribe("onMouseMove",h),o.unsubscribe("onMouseUp",S))},load:y=>{c.value=y},undo:m.undo,redo:m.redo,canUndo:m.canUndo,canRedo:m.canRedo}},hu=["node","edge"],_u="use-focus-graph",pu=o=>{const{setTheme:e}=Rr(o,_u),t=D(new Set),n=D(!1),r=h=>{const S=h.filter(g=>!o.settings.value.focusBlacklist.includes(g));if(S.length===t.value.size&&S.every(g=>t.value.has(g)))return;const C=new Set([...t.value]);t.value=new Set(S),o.emit("onFocusChange",t.value,C)},s=h=>{if(t.value.has(h)||o.settings.value.focusBlacklist.includes(h))return;const E=new Set([...t.value]);t.value.add(h),o.emit("onFocusChange",t.value,E)},i=h=>{var T,E;const S=Ir(o.canvas);(E=(T=h.shape).activateTextArea)==null||E.call(T,S,C=>{const g=o.getEdge(h.id);if(!g)throw new Error("textarea only implemented for edges");const b=o.settings.value.edgeInputToLabel(C);b===void 0||g.label===b||o.editEdgeLabel(g.id,b)})},a=()=>{const h=Array.from(t.value),S=h.filter(T=>o.getNode(T)||o.getEdge(T));S.length!==h.length&&r(S)},u=({items:h,coords:S,event:T})=>{var y,x;if(T.button!==lt.left)return;const E=h.at(-1);if(!E)return n.value?void 0:c();if(((x=(y=E.shape).textHitbox)==null?void 0:x.call(y,S))&&o.settings.value.edgeLabelsEditable&&E.graphType==="edge")return c(),i(E);hu.some(A=>A===E.graphType)&&(n.value?s(E.id):r([E.id]))},c=()=>r([]),l=()=>{const h=o.nodes.value.map(T=>T.id),S=o.edges.value.map(T=>T.id);r([...h,...S])},d=({id:h},{focus:S})=>{S&&r([h])},f=h=>t.value.has(h);e("nodeColor",h=>{if(f(h.id))return o.getTheme("nodeFocusColor",h)}),e("nodeBorderColor",h=>{if(f(h.id))return o.getTheme("nodeFocusBorderColor",h)}),e("nodeTextColor",h=>{if(f(h.id))return o.getTheme("nodeFocusTextColor",h)}),e("edgeColor",h=>{if(f(h.id))return o.getTheme("edgeFocusColor",h)}),e("edgeTextColor",h=>{if(f(h.id))return o.getTheme("edgeFocusTextColor",h)}),e("nodeAnchorColor",h=>{if(f(h.id))return o.getTheme("nodeAnchorColorWhenParentFocused",h)});const m=h=>{h.key==="Shift"&&(n.value=!0)},v=h=>{h.key==="Shift"&&(n.value=!1)},_=()=>{o.subscribe("onNodeAdded",d),o.subscribe("onEdgeAdded",d),o.subscribe("onMouseDown",u),o.subscribe("onKeyDown",m),o.subscribe("onKeyUp",v),o.subscribe("onStructureChange",a)},p=()=>{o.unsubscribe("onNodeAdded",d),o.unsubscribe("onEdgeAdded",d),o.unsubscribe("onMouseDown",u),o.unsubscribe("onKeyDown",m),o.unsubscribe("onKeyUp",v),o.unsubscribe("onStructureChange",a),c()};return o.subscribe("onSettingsChange",h=>{h.focusable===!1?p():h.focusable===!0&&_()}),o.settings.value.focusable&&_(),{set:r,reset:c,add:s,all:l,isFocused:f,focusedItemIds:gn(t),focusedNodes:I(()=>o.nodes.value.filter(h=>f(h.id))),focusedEdges:I(()=>o.edges.value.filter(h=>f(h.id)))}},mu={focus:!0},gu={focus:!0},Or=100,Nr=3,vu=o=>{const e=D([]),t=D([]),n=p=>{e.value.push(p),e.value.length>Or&&e.value.shift()},r=p=>{t.value.push(p),t.value.length>Or&&t.value.shift()},s=D([]),i=D([]),u=Ss(()=>{if(s.value.length===0&&i.value.length===0)return;const p=s.value.map(S=>({graphType:"node",data:S})),h=i.value.map(S=>({graphType:"edge",data:S}));n({action:"remove",affectedItems:[...p,...h]}),s.value=[],i.value=[]},250);o.subscribe("onNodeAdded",(p,{history:h})=>{h&&n({action:"add",affectedItems:[{graphType:"node",data:p}]})}),o.subscribe("onBulkNodeAdded",(p,{history:h})=>{h&&n({action:"add",affectedItems:p.map(S=>({graphType:"node",data:S}))})}),o.subscribe("onNodeRemoved",(p,h,{history:S})=>{if(!S)return;const T=h.map(E=>({graphType:"edge",data:E}));n({action:"remove",affectedItems:[{graphType:"node",data:p},...T]})}),o.subscribe("onBulkNodeRemoved",(p,h,{history:S})=>{S&&(s.value.push(...p),i.value.push(...h),u())}),o.subscribe("onEdgeLabelEdited",(p,h,{history:S})=>{S&&n({action:"edit",affectedItems:[{graphType:"edge",data:{id:p.id,from:h,to:p.label}}]})}),o.subscribe("onEdgeAdded",(p,{history:h})=>{h&&n({action:"add",affectedItems:[{graphType:"edge",data:p}]})}),o.subscribe("onBulkEdgeAdded",(p,{history:h})=>{h&&n({action:"add",affectedItems:p.map(S=>({graphType:"edge",data:S}))})}),o.subscribe("onEdgeRemoved",(p,{history:h})=>{h&&n({action:"remove",affectedItems:[{graphType:"edge",data:p}]})}),o.subscribe("onBulkEdgeRemoved",(p,{history:h})=>{h&&(i.value.push(...p),u())});const c=D();o.subscribe("onGroupDragStart",(p,h)=>{c.value={startingCoordinates:h,nodes:p}}),o.subscribe("onGroupDrop",(p,h)=>{if(!c.value)throw new Error("dropped a group we didn't know was being dragged");if(c.value.nodes.length!==p.length)throw new Error("group size mismatch");const S=c.value.startingCoordinates.y-h.y,T=c.value.startingCoordinates.x-h.x;Math.sqrt(S**2+T**2)<Nr||n({action:"move",affectedItems:c.value.nodes.map(C=>({graphType:"node",data:{id:C.id,from:{x:C.x+T,y:C.y+S},to:{x:C.x,y:C.y}}}))})});const l=D();o.subscribe("onNodeDragStart",p=>{l.value={id:p.id,from:{x:p.x,y:p.y},to:{x:p.x,y:p.y}}}),o.subscribe("onNodeDrop",p=>{if(!l.value)throw new Error("dropped a node we didn't know was being dragged");if(l.value.id!==p.id)throw new Error("node ID mismatch");l.value.to={x:p.x,y:p.y};const h=l.value.from.y-l.value.to.y,S=l.value.from.x-l.value.to.x;Math.sqrt(h**2+S**2)<Nr||n({action:"move",affectedItems:[{graphType:"node",data:l.value}]})});const d=(p={})=>{const h=e.value.pop();if(h)return r(h),m(h),o.emit("onUndo",h,{...mu,...p}),h},f=(p={})=>{const h=t.value.pop();if(h)return n(h),v(h),o.emit("onRedo",h,{...gu,...p}),h},m=p=>{if(p.action==="add")for(const h of p.affectedItems)h.graphType==="node"?o.removeNode(h.data.id,{history:!1}):h.graphType==="edge"&&o.removeEdge(h.data.id,{history:!1});else if(p.action==="remove")for(const h of p.affectedItems)h.graphType==="node"?o.addNode(h.data,{history:!1,focus:!1}):h.graphType==="edge"&&o.addEdge(h.data,{history:!1,focus:!1});else if(p.action==="move"){for(const h of p.affectedItems)if(h.graphType==="node"){const{from:S,id:T}=h.data;o.moveNode(T,{x:S.x,y:S.y})}}else if(p.action==="edit")for(const h of p.affectedItems)o.editEdgeLabel(h.data.id,h.data.from,{history:!1})},v=p=>{if(p.action==="add")for(const h of p.affectedItems)h.graphType==="node"?o.addNode(h.data,{history:!1,focus:!1}):h.graphType==="edge"&&o.addEdge(h.data,{history:!1,focus:!1});else if(p.action==="remove")for(const h of p.affectedItems)h.graphType==="node"?o.removeNode(h.data.id,{history:!1}):h.graphType==="edge"&&o.removeEdge(h.data.id,{history:!1});else if(p.action==="move"){for(const h of p.affectedItems)if(h.graphType==="node"){const{to:S,id:T}=h.data;o.moveNode(T,{x:S.x,y:S.y})}}else if(p.action==="edit")for(const h of p.affectedItems)o.editEdgeLabel(h.data.id,h.data.to,{history:!1})},_=()=>{e.value=[],t.value=[]};return{undo:d,redo:f,canUndo:I(()=>e.value.length>0),canRedo:I(()=>t.value.length>0),undoStack:e,redoStack:t,addToUndoStack:n,addToRedoStack:r,clearHistory:_}},yu=o=>{const e={get:()=>JSON.parse(localStorage.getItem(o.settings.value.persistentStorageKey+"-nodes")??"[]"),set:u=>{const c=u.filter(l=>!o.settings.value.persistentBlacklist.has(l.id));localStorage.setItem(o.settings.value.persistentStorageKey+"-nodes",JSON.stringify(c))}},t={get:()=>JSON.parse(localStorage.getItem(o.settings.value.persistentStorageKey+"-edges")??"[]"),set:u=>{const c=u.filter(l=>!o.settings.value.persistentBlacklist.has(l.id));localStorage.setItem(o.settings.value.persistentStorageKey+"-edges",JSON.stringify(c))}},n=async()=>{await new Promise(u=>setTimeout(u,10)),e.set(o.nodes.value),t.set(o.edges.value)},r=()=>o.load({nodes:e.get(),edges:t.get()}),s=["onStructureChange","onNodeDrop","onGroupDrop"],i=()=>{s.forEach(u=>o.subscribe(u,n))},a=()=>{s.forEach(u=>o.unsubscribe(u,n))};return o.subscribe("onSettingsChange",u=>{if(a(),"persistent"in u&&!u.persistent)return;if("persistent"in u&&u.persistent){r(),i();return}"persistentStorageKey"in u&&r(),i()}),o.settings.value.persistent&&(queueMicrotask(r),i()),{trackGraphState:n}},bu={durationMs:300,broadcast:!0,history:!0,persist:!0},Tu=o=>({node:async t=>{const{nodeId:n,endCoords:r,durationMs:s,history:i,broadcast:a,persist:u}={...bu,...t};if(s<100)throw new Error(`durationMs must be greater than 100, got ${s}`);const c=o.getNode(n);if(!c)throw new Error(`Node with id ${n} not found`);const l={x:c.x,y:c.y},{coords:d,timePerFrameMs:f}=Yi({start:l,end:r,durationMs:s});for(let m=0;m<d.length;m++)await new Promise(v=>setTimeout(v,f)),o.moveNode(c.id,d[m],{broadcast:a}),o.focus.isFocused(c.id)&&o.marquee.updateEncapsulatedNodeBox();i&&o.history.addToUndoStack({action:"move",affectedItems:[{graphType:"node",data:{id:t.nodeId,from:l,to:t.endCoords}}]}),u&&await o.persistent.trackGraphState()}}),xu=o=>{const e=({coords:i,event:a})=>{var l;((l=o.getSchemaItemsByCoordinates(i).at(-1))==null?void 0:l.graphType)==="node"||!o.addNode(i)||setTimeout(()=>o.updateGraphAtMousePosition(a),10)},t=(i,a)=>{if(o.settings.value.userAddedEdgeRuleNoSelfLoops&&i.id===a.id)return!1;if(o.settings.value.userAddedEdgeRuleOneEdgePerPath){const u=o.edges.value.find(d=>d.from===i.id&&d.to===a.id),c=o.edges.value.find(d=>d.from===a.id&&d.to===i.id);if(u||c)return!1}return!0},n=(i,a)=>{const c=o.getSchemaItemsByCoordinates(a).findLast(f=>f.graphType==="node");if(!c)return;const l=o.getNode(c.id);!l||!t(i,l)||o.addEdge({from:i.id,to:l.id,label:o.settings.value.userAddedEdgeLabel})},r=()=>{o.subscribe("onDblClick",e),o.subscribe("onNodeAnchorDrop",n),o.settings.value.nodeAnchors=!0,o.settings.value.edgeLabelsEditable=!0},s=()=>{o.unsubscribe("onDblClick",e),o.unsubscribe("onNodeAnchorDrop",n),o.settings.value.nodeAnchors=!1,o.settings.value.edgeLabelsEditable=!1};o.settings.value.interactive&&r(),o.settings.value.interactive||s(),o.subscribe("onSettingsChange",i=>{i.interactive===!0?r():i.interactive===!1&&s()})},Su=({adjacencyList:o,undirectedAdjacencyList:e})=>{const t=(i,a)=>{const u=new Set,c=[];for(c.push(a);c.length>0;){const l=c.shift();if(!l)break;u.add(l),i[l].forEach(f=>{u.has(f)||c.push(f)})}return u},n=i=>Object.keys(i).every(a=>t(i,a).size===Object.keys(i).length),r=I(()=>n(o.value)),s=I(()=>n(e.value));return{isConnected:r,isWeaklyConnected:s}};class Cu{constructor(e){yt(this,"V");yt(this,"adj");yt(this,"Time");yt(this,"SCCs",[]);this.V=e,this.adj=new Array(e).fill(0).map(()=>[]),this.Time=0}addEdge(e,t){this.adj[e].push(t)}SCCUtil(e,t,n,r,s){n[e]=this.Time,t[e]=this.Time,this.Time+=1,r[e]=!0,s.push(e);for(const i of this.adj[e])n[i]===-1?(this.SCCUtil(i,t,n,r,s),t[e]=Math.min(t[e],t[i])):r[i]&&(t[e]=Math.min(t[e],n[i]));if(t[e]===n[e]){let i;const a=[];do i=s.pop(),a.push(i),r[i]=!1;while(i!==e);this.SCCs.push(a)}}SCC(){const e=new Array(this.V).fill(-1),t=new Array(this.V).fill(-1),n=new Array(this.V).fill(!1),r=[];for(let s=0;s<this.V;s++)e[s]===-1&&this.SCCUtil(s,t,e,n,r);return this.SCCs}}const Eu=(o,e)=>{const t=new Cu(o.length),n=o.map(s=>s.id);for(const s of e)t.addEdge(n.indexOf(s.from),n.indexOf(s.to));return t.SCC().map(s=>s.map(i=>o[i]))},Au=o=>{const{nodes:e,edges:t,adjacencyList:n}=o,r=I(()=>Eu(e.value,t.value)),s=I(()=>r.value.reduce((u,c,l)=>{for(const{id:d}of c)u.set(d,l);return u},new Map)),i=I(()=>{const a=r.value,u=n.value,c=s.value;return a.reduce((l,d,f)=>{const m=d.flatMap(v=>u[v.id]??[]).filter(v=>c.get(v)!==f).map(v=>c.get(v));return l.set(f,new Set(m)),l},new Map)});return{stronglyConnectedComponents:r,nodeIdToConnectedComponent:s,componentAdjacencyMap:i}},wu=o=>{const e={},t=[[],[]],n={...o};Object.keys(o).forEach(i=>{n[i]||(n[i]=[])});const r={};Object.entries(n).forEach(([i,a])=>{a.forEach(u=>{r[u]||(r[u]=[]),r[u].push(i)})});const s=i=>{const a=[i];for(e[i]=0,t[0].push(i);a.length>0;){const u=a.shift(),c=e[u],l=c===0?1:0,d=n[u]||[],f=r[u]||[],m=[...new Set([...d,...f])];for(const v of m)if(e[v]===void 0)e[v]=l,t[l].push(v),a.push(v);else if(e[v]===c)return!1}return!0};for(const i of Object.keys(n))if(e[i]===void 0&&!s(i))return;return t},Ou=o=>{const e=I(()=>wu(o.value)),t=I(()=>{const r=e.value,s=new Map;if(!r)return s;const[i,a]=r;for(const u of i)s.set(u,0);for(const u of a)s.set(u,1);return s}),n=I(()=>e.value!==void 0);return{bipartitePartition:e,nodeIdToBipartitePartition:t,isBipartite:n}},Nu=o=>{const e=new Set,t=[],n=[],r=new Set,s=(a,u)=>{e.add(a),n.push(a),r.add(a);for(const c of o[a]||[])if(!e.has(c))s(c,a);else if(c!==u&&r.has(c)){const l=n.indexOf(c),f=[...n.slice(l)].sort();t.some(m=>i(m,f))||t.push(f)}n.pop(),r.delete(a)},i=(a,u)=>a.length!==u.length?!1:a.every(c=>u.includes(c));for(const a in o)e.has(a)||s(a,null);return t},Mu=o=>{const{settings:e,stronglyConnectedComponents:t,adjacencyList:n}=o,r=I(()=>{const{isGraphDirected:a}=e.value;return a?t.value.filter(u=>u.length>1).map(u=>u.map(c=>c.id)):Nu(n.value).sort((c,l)=>c.length-l.length)}),s=I(()=>r.value.reduce((a,u,c)=>{for(const l of u)a.set(l,c);return a},new Map)),i=I(()=>r.value.length===0);return{cycles:r,nodeIdToCycle:s,isAcyclic:i}},Du=o=>{const e=I(()=>{const n=o.edges.value;return n.filter(r=>r.from!==r.to).filter(r=>n.some(s=>r.from===s.to&&r.to===s.from))}),t=I(()=>e.value.length>0);return{bidirectionalEdges:e,hasBidirectionalEdges:t}},Pu=o=>({isComplete:I(()=>{const t=o.settings.value.isGraphDirected,n=o.nodes.value.length;return o.edges.value.length===(t?n*(n-1):n*(n-1)/2)})}),Iu=o=>{const e=Su(o),t=Du(o),n=Au(o),r=Ou(o.adjacencyList),s=Mu({...o,...n});return{...Pu(o),...s,...n,...t,...r,...e}},ku="auto",Ru=o=>{const e=os(),t=ss("preferred-theme",ku);return ct(e,()=>{t.value==="auto"&&(o.themeName.value=e.value?"dark":"light")},{immediate:!0}),ct(t,()=>{t.value==="auto"?o.themeName.value=e.value?"dark":"light":o.themeName.value=t.value},{immediate:!0}),{preferredTheme:t}},Bu=o=>({getParentsOfNode:e=>is(e,o),getAncestorsOfNode:e=>as(e,o),getChildrenOfNode:e=>us(e,o),getDescendantsOfNode:e=>cs(e,o),getConnectedNodes:e=>mn(e,o),getConnectedEdges:e=>Pr(e,o),getInboundEdges:e=>ls(e,o),getOutboundEdges:e=>ds(e,o),isEdgeFlowingIntoNode:(e,t)=>fs(e,t,o),isEdgeFlowingOutOfNode:(e,t)=>hs(e,t,o),getEdgesAlongPath:(e,t)=>Dr(e,t,o),getEdgeWeight:e=>_s(e,o),getEdgeWeightFraction:e=>ps(e,o),getWeightBetweenNodes:(e,t)=>ms(e,t,o)}),Gu=(o,e={})=>{const t=Ja(o,e),n=pu(t),r=vu(t),s=ru({...t,focus:n}),i=su({...t,focus:n}),a=ou({...t,nodeAnchors:i}),u=fu(t),c=yu(t),l=Ru(t),d=au({...t,history:r,focus:n,annotation:u}),f=gs(t),m=vs({...t,adjacencyList:f}),v=Iu({...t,...f}),_=Tu({...t,history:r,focus:n,marquee:s,persistent:c});xu(t);const p=Bu(t);return{...t,focus:n,history:r,marquee:s,nodeDrag:a,nodeAnchors:i,annotation:u,persistent:c,animate:_,...l,adjacencyList:f,transitionMatrix:m,characteristics:v,shortcut:d,helpers:p}},Wu=ys({__name:"Graph",props:{graph:{}},emits:["graphRef"],setup(o,{emit:e}){const t=o,n=e,r=u=>n("graphRef",u),s=D(t.graph.getTheme("graphBgPatternColor")),i=D(t.graph.getTheme("graphBgColor")),a=async()=>{s.value=t.graph.getTheme("graphBgPatternColor"),i.value=t.graph.getTheme("graphBgColor")};return t.graph.subscribe("onThemeChange",a),(u,c)=>(Ts(),bs(Cs,{onCanvasRef:r,color:i.value,"pattern-color":s.value},null,8,["color","pattern-color"]))}});export{cu as B,uu as C,Ka as L,Go as T,Wu as _,nu as a,Xa as b,gt as g,Oa as i,zu as r,Gu as u};
