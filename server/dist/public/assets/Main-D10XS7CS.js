import{u as z,b as M,_ as G}from"./Graph.vue_vue_type_script_setup_true_lang-sgLF3Suy.js";import{d as $,r as H,o as f,c as v,e as r,w as n,L as N,q as B,M as x,B as D,a as g,t as L,z as y,F as k,A as h,G as P,f as R,u as V,b as q,y as F}from"./index-B4XpbrsQ.js";import{_ as K,u as O}from"./TutorialHint.vue_vue_type_script_setup_true_lang-DsCvTQYl.js";import{u as U,c,i as j,j as I}from"./ResponsiveCanvas.vue_vue_type_script_setup_true_lang-B99YfKIB.js";const W={persistentStorageKey:"graph-sandbox"},X=["disabled"],m=$({__name:"ToolbarButton",props:{active:{type:Boolean},disabled:{type:Boolean}},setup(l){return(e,i)=>{const d=H("v-icon");return f(),v("button",{disabled:e.disabled,class:B(["text-white","p-2","rounded-md",e.disabled?"text-opacity-50":"",e.disabled?"":"hover:bg-gray-900",e.disabled?"cursor-not-allowed":"cursor-pointer",e.active?"bg-gray-900":"bg-gray-800"])},[r(d,null,{default:n(()=>[N(e.$slots,"default")]),_:3})],10,X)}}}),Y={},J={class:"w-[1px] h-6 bg-white bg-opacity-20 mx-1"};function Q(l,e){return f(),v("div",J)}const A=x(Y,[["render",Q]]),Z={},ee={class:"flex items-center relative"};function te(l,e){return f(),v("div",ee,[N(l.$slots,"default")])}const E=x(Z,[["render",te]]),oe={class:"text-white text-opacity-60 text-sm"},re=$({__name:"ToolbarHint",props:{tutorial:{}},setup(l){return(e,i)=>(f(),D(K,{tutorial:e.tutorial},{default:n(({hint:d})=>[g("h5",oe,L(d),1)]),_:1},8,["tutorial"]))}}),se={class:"flex items-center gap-2 bg-gray-800 py-1 px-1 rounded-lg"},ae=$({__name:"IslandToolbar",props:{graph:{}},setup(l){const e=l,i=O(e.graph,[{dismiss:"onNodeAdded",hint:"Double click on the canvas to add a node."},{dismiss:"onEdgeAdded",hint:"Hover node to show anchors, drag between them to add an edge."}]);i.start();const d=()=>{const o=Array.from(e.graph.highlightedItemIds.value);e.graph.bulkRemoveNode(o),e.graph.bulkRemoveEdge(o)};return(o,t)=>(f(),v(k,null,[g("div",se,[r(E,null,{default:n(()=>[r(m,{onClick:t[0]||(t[0]=u=>o.graph.settings.value.displayEdgeLabels=!0),active:o.graph.settings.value.displayEdgeLabels},{default:n(()=>t[6]||(t[6]=[h(" mdi-label-outline ")])),_:1},8,["active"]),r(A),r(m,{onClick:t[1]||(t[1]=u=>o.graph.settings.value.displayEdgeLabels=!1),active:!o.graph.settings.value.displayEdgeLabels},{default:n(()=>t[7]||(t[7]=[h(" mdi-label-off-outline ")])),_:1},8,["active"])]),_:1}),r(E,null,{default:n(()=>[r(m,{onClick:t[2]||(t[2]=u=>o.graph.settings.value.userAddedEdgeType="directed"),active:o.graph.settings.value.userAddedEdgeType==="directed"},{default:n(()=>t[8]||(t[8]=[h(" mdi-arrow-right-thin ")])),_:1},8,["active"]),r(A),r(m,{onClick:t[3]||(t[3]=u=>o.graph.settings.value.userAddedEdgeType="undirected"),active:o.graph.settings.value.userAddedEdgeType==="undirected"},{default:n(()=>t[9]||(t[9]=[h(" mdi-minus ")])),_:1},8,["active"])]),_:1}),r(E,null,{default:n(()=>[r(m,{onClick:t[4]||(t[4]=u=>o.graph.undo()),disabled:!o.graph.canUndo.value},{default:n(()=>t[10]||(t[10]=[h(" mdi-undo ")])),_:1},8,["disabled"]),r(A),r(m,{onClick:t[5]||(t[5]=u=>o.graph.redo()),disabled:!o.graph.canRedo.value},{default:n(()=>t[11]||(t[11]=[h(" mdi-redo ")])),_:1},8,["disabled"])]),_:1}),r(E,null,{default:n(()=>[r(m,{onClick:d,disabled:o.graph.highlightedItemIds.value.size===0},{default:n(()=>t[12]||(t[12]=[h(" mdi-eraser ")])),_:1},8,["disabled"])]),_:1}),r(E,null,{default:n(()=>[r(m,null,{default:n(()=>t[13]||(t[13]=[h("mdi-account-group")])),_:1})]),_:1})]),r(re,{tutorial:y(i)},null,8,["tutorial"])],64))}}),ne="markup",le=l=>{const{setTheme:e,removeAllThemes:i}=z(l,ne),d=U("markup-color-map",new Map),o=s=>{if(d.value.get(s.id))return j(l.theme.value.nodeColor,s)},t=s=>{const a=d.value.get(s.id);if(a)return l.isHighlighted(s.id)?I(a,30):a},u=s=>{const a=d.value.get(s.id);if(a)return l.isHighlighted(s.id)?I(a,30):a};return{colorize:()=>{e("nodeColor",o),e("nodeBorderColor",t),e("nodeFocusBorderColor",t),e("nodeAnchorColor",t),e("nodeAnchorColorWhenParentFocused",t),e("edgeColor",u),e("marqueeSelectionBoxColor",c.TRANSPARENT),e("marqueeEncapsulatedNodeBoxBorderColor",c.WHITE+"80"),e("marqueeEncapsulatedNodeBoxColor",c.TRANSPARENT)},decolorize:()=>{i()},colorMap:d}},de={key:0,class:"bg-gray-800 p-3 w-60 flex flex-col gap-3 rounded-r-xl"},ie={class:"text-white font-bold text-2xl"},ue={class:"flex gap-1"},ge=["onClick"],pe=$({__name:"MarkupMenu",props:{graph:{}},setup(l){const e=l,i=[c.BLUE_600,c.RED_600,c.GREEN_600,c.YELLOW_600],{colorize:d,colorMap:o}=le(e.graph);d();const t=P(()=>{const s=Array.from(e.graph.highlightedItemIds.value);if(s.length===1){const[a]=s,p=e.graph.getNode(a);if(p)return`Node ${p.label}`;const b=e.graph.getEdge(a);if(!b)return"?";const C=e.graph.getNode(b.to),T=e.graph.getNode(b.from),S=b.type==="directed"?"→":"↔";return`Edge ${(T==null?void 0:T.label)??"?"} ${S} ${(C==null?void 0:C.label)??"?"}`}return`${s.length} Nodes & Edges`}),u=()=>{const s=Array.from(e.graph.highlightedItemIds.value),a=new Set(s.map(p=>o.value.get(p)));return a.has(void 0)?c.BLACK:a.size>1?c.BLACK:a.values().next().value},_=R(u()),w=s=>{for(const a of e.graph.highlightedItemIds.value)o.value.set(a,s);_.value=s};return V(()=>e.graph.highlightedItemIds.value,()=>{_.value=u()}),(s,a)=>e.graph.highlightedItemIds.value.size>0?(f(),v("div",de,[g("h1",ie,L(t.value),1),g("div",null,[g("div",ue,[(f(),v(k,null,q(i,p=>g("button",{onClick:b=>w(p),class:B(["cursor-pointer","rounded-xl","p-1","border-2",_.value===p?"border-white":"border-transparent",_.value===p?"hover:border-white":"hover:border-gray-400"])},[g("div",{class:B(["w-8","h-8","rounded-md",`bg-[${p}]`])},null,2)],10,ge)),64))])])])):F("",!0)}}),ce={class:"absolute top-6 w-full flex flex-col justify-center items-center gap-2"},he={class:"absolute top-0 w-0 h-full flex items-center"},be=$({__name:"Main",setup(l){const e=R(),i=M(e,{settings:W});return(d,o)=>(f(),v(k,null,[r(G,{onGraphRef:o[0]||(o[0]=t=>e.value=t),graph:y(i)},null,8,["graph"]),g("div",ce,[r(ae,{graph:y(i)},null,8,["graph"])]),g("div",he,[g("div",null,[r(pe,{graph:y(i)},null,8,["graph"])])])],64))}});export{be as default};
