import{c as B,u as F,b as V,_ as U}from"./Graph.vue_vue_type_script_setup_true_lang-C0x9oZiH.js";import{b as W}from"./CollabControls.vue_vue_type_script_setup_true_lang-C0PhtUsA.js";import{f as g,u as f,d as k,s as j,o as v,c as C,a as E,x as $,C as i,e as S,F as N,E as x,w as R,D as w,b as K,t as Y,B as z}from"./index-C3OTg3YS.js";import{i as H,c as h}from"./ResponsiveCanvas.vue_vue_type_script_setup_true_lang-C4zUDYr9.js";import{_ as q}from"./SimulationPlaybackControls.vue_vue_type_script_setup_true_lang-Y2EojUTH.js";import{_ as y}from"./Button.vue_vue_type_script_setup_true_lang-DDh6gAXs.js";const J=o=>{const e=g([]),l=(s,t)=>(s.get(t)!==t&&s.set(t,l(s,s.get(t))),s.get(t)),p=(s,t,r,c)=>{const a=l(s,r),d=l(s,c);if(a!==d){const m=t.get(a),_=t.get(d);m<_?s.set(a,d):m>_?s.set(d,a):(s.set(d,a),t.set(a,m+1))}},u=()=>{const s=Object.values(B(o.edges.value)).sort((a,d)=>Number(a.label)-Number(d.label)),t=new Map,r=new Map;o.nodes.value.forEach(a=>{t.set(a.id,a.id),r.set(a.id,0)});const c=[];for(const a of s){const d=l(t,a.from),m=l(t,a.to);if(d!==m&&(c.push(a),p(t,r,d,m),c.length===o.nodes.value.length-1))break}return c},n=()=>{e.value=u()};return o.subscribe("onStructureChange",n),o.subscribe("onEdgeLabelChange",n),o.subscribe("onGraphReset",n),e},G=o=>{const e=g([]),l=(n,s)=>{let t=null;for(const r of n)(s.has(r.from)&&!s.has(r.to)||s.has(r.to)&&!s.has(r.from))&&(!t||Number(r.label)<Number(t.label))&&(t=r);return t},p=()=>{if(o.nodes.value.length===0)return[];const n=[],s=new Set,t=o.nodes.value[0].id;s.add(t);const r=Object.values(B(o.edges.value));for(;n.length<o.nodes.value.length-1;){const c=l(r,s);if(!c)break;n.push(c),s.add(c.from),s.add(c.to)}return n},u=()=>{e.value=p()};return o.subscribe("onStructureChange",u),o.subscribe("onEdgeLabelChange",u),o.subscribe("onGraphReset",u),e},L=20,Q="mst",O=(o,e)=>{const{setTheme:l,removeAllThemes:p}=F(o,Q),u=r=>{if(o.isHighlighted(r.id))return;const c=e.value.some(d=>d.id===r.id),a=H(o.theme.value.edgeColor,r);return c?a:a+L},n=r=>{if(o.isHighlighted(r.id))return;const c=e.value.some(d=>d.id===r.id),a=H(o.theme.value.edgeTextColor,r);return c?a:a+L};return{colorize:()=>{l("edgeColor",u),l("edgeTextColor",n)},decolorize:()=>{p()}}},D=["kruskal","prim"],X=(o,e)=>{const l=J(o),p=G(o),u=f(()=>e.value==="prim"?p.value:l.value),n=g(0),s=g(!0),t=g(1500),r=g(!1),c=g(),a=f(()=>n.value>0),d=f(()=>n.value===u.value.length+1),m=f(()=>u.value.slice(0,n.value)),{colorize:_,decolorize:b}=O(o,m),M=()=>{s.value=!1,r.value=!0,n.value=0,_(),c.value=setInterval(()=>{d.value||s.value||P()},t.value)},I=()=>{c.value&&clearInterval(c.value),r.value=!1,b()},P=()=>{d.value||n.value++};return{nextStep:P,prevStep:()=>{a.value&&n.value--},setStep:A=>{A<-1||A>u.value.length||(n.value=A)},trace:f(()=>u.value),step:f(()=>n.value),start:M,stop:I,paused:s,playbackSpeed:t,isOver:d,hasBegun:a,isActive:f(()=>r.value)}},T={backgroundColor:"white",progressColor:"green",easeTime:250,progressEasing:"ease-in-out",borderRadius:0},Z=k({__name:"Progressbar",props:{theme:{},startProgress:{},currentProgress:{},endProgress:{}},setup(o){var c,a,d,m,_;const e=o,l=((c=e.theme)==null?void 0:c.backgroundColor)||T.backgroundColor,p=((a=e.theme)==null?void 0:a.progressColor)||T.progressColor,u=((d=e.theme)==null?void 0:d.easeTime)||T.easeTime,n=((m=e.theme)==null?void 0:m.progressEasing)||T.progressEasing,s=((_=e.theme)==null?void 0:_.borderRadius)||T.borderRadius,t=g(0),r=f(()=>{const b=e.endProgress-e.startProgress;return Math.min(Math.max(e.currentProgress-e.startProgress,0),b)/b*100});return j(()=>r.value,b=>{t.value=b},{immediate:!0}),(b,M)=>(v(),C("div",{class:"relative overflow-hidden h-[25px] w-full",style:$({backgroundColor:i(l),borderRadius:`${i(s)}px`})},[E("div",{class:"absolute top-0 left-0 h-[25px] w-full",style:$({width:`${t.value}%`,backgroundColor:i(p),transition:`width ${i(u)}ms ${i(n)}`})},null,4)],4))}}),ee=k({__name:"SimulationControls",props:{controls:{}},setup(o){return(e,l)=>(v(),C(N,null,[S(Z,{class:"w-[300px] border-gray-200 border-2 mb-8",theme:{progressColor:i(h).GRAY_200,backgroundColor:i(h).SLATE_500,borderRadius:20},"start-progress":0,"current-progress":e.controls.step.value,"end-progress":e.controls.trace.value.length,"set-progress":e.controls.setStep},null,8,["theme","current-progress","end-progress","set-progress"]),S(q,{controls:e.controls},null,8,["controls"])],64))}}),se={persistentStorageKey:"min-spanning-tree",userAddedEdgeType:"undirected",edgeInputToLabel:o=>{const e=Number(o),l=e<0,p=isNaN(e);if(!(l||p))return e.toString()}},te="s",oe=k({__name:"TopRightToolbar",props:{graph:{}},setup(o){const e=o,l=G(e.graph),{colorize:p,decolorize:u}=O(e.graph,l),n=g(!1),s=()=>{n.value=!0,p()},t=()=>{n.value=!1,u()};return e.graph.subscribe("onKeydown",r=>{r.key.toLowerCase()===te&&(n.value?t():s())}),(r,c)=>n.value?(v(),x(y,{key:1,onClick:t,color:i(h).RED_600,"text-color":i(h).WHITE,style:{"min-width":"135px"}},{default:R(()=>c[1]||(c[1]=[w(" Hide MST (S) ")])),_:1},8,["color","text-color"])):(v(),x(y,{key:0,onClick:s,color:i(h).BLUE_500,"text-color":i(h).WHITE,style:{"min-width":"135px"}},{default:R(()=>c[0]||(c[0]=[w(" Show MST (S) ")])),_:1},8,["color","text-color"]))}}),re={key:0,class:"gap-3 flex"},ne=k({__name:"TopLeftToolbar",props:{graph:{},simControls:{},startSimulation:{type:Function}},setup(o){return(e,l)=>e.simControls.isActive.value?(v(),x(y,{key:1,onClick:e.simControls.stop,color:i(h).RED_600,"text-color":i(h).WHITE,class:"capitalize"},{default:R(()=>l[0]||(l[0]=[w(" Stop Simulation ")])),_:1},8,["onClick","color","text-color"])):(v(),C("div",re,[(v(!0),C(N,null,K(i(D),p=>(v(),x(y,{onClick:()=>e.startSimulation(p),class:"capitalize"},{default:R(()=>[w(" Run "+Y(p)+"s ",1)]),_:2},1032,["onClick"]))),256))]))}}),le={class:"w-full h-full relative"},ae={class:"absolute top-0 p-3 flex gap-3"},ce={class:"absolute top-0 right-0 p-3 flex gap-3"},ue={key:0,class:"absolute bottom-8 w-full flex flex-col justify-center items-center p-3"},ie={key:1,class:"absolute right-0 p-3 h-14 flex gap-3 bottom-0"},be=k({__name:"Main",setup(o){const e=g(),l=V(e,{settings:se}),p=g(D[0]),u=X(l,p),n=s=>{p.value=s,u.start()};return(s,t)=>(v(),C(N,null,[E("div",le,[S(U,{onGraphRef:t[0]||(t[0]=r=>e.value=r),graph:i(l)},null,8,["graph"])]),E("div",ae,[S(ne,{graph:i(l),simControls:i(u),startSimulation:n},null,8,["graph","simControls"])]),E("div",ce,[S(oe,{graph:i(l)},null,8,["graph"])]),i(u).isActive.value?(v(),C("div",ue,[S(ee,{controls:i(u)},null,8,["controls"])])):z("",!0),i(u).isActive.value?z("",!0):(v(),C("div",ie,[S(W,{graph:i(l)},null,8,["graph"])]))],64))}});export{be as default};
