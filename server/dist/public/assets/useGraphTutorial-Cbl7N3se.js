import{D as b,a as p}from"./TutorialHint.vue_vue_type_script_setup_true_lang-DWZG_nza.js";import{g as m,ab as y,z as E,G as c}from"./index-BauKbB-4.js";const _=(l,s)=>{const t=m(-1),a=y(s),r=m(!1),d=m(!1);let o,v;const I=e=>{const{event:i,predicate:n}=typeof e.dismiss=="string"?{event:e.dismiss,predicate:()=>!0}:e.dismiss;if(i==="onInterval"){const f="interval"in e?e.interval:p;let g=0;const T=setInterval(()=>{n(++g)&&t.value++},f);return()=>clearInterval(T)}const u=(...f)=>{(n==null?void 0:n(...f))&&t.value++};return l.subscribe(i,u),()=>l.unsubscribe(i,u)},A=()=>{var i,n;const e=a.value[t.value];if(e){if((i=e.onInit)==null||i.call(e),(n=e.precondition)!=null&&n.call(e,l)){t.value++;return}e!=null&&e.highlightElement&&(o=w(e)),v=I(e.dismiss!=="onTimeout"?e:{hint:e.hint,dismiss:"onInterval",interval:e.after})}},h=(e,i)=>{var u;if(e<0)return t.value=0;if(e>a.value.length)return t.value=a.value.length;const n=a.value[i];(u=n==null?void 0:n.onDismiss)==null||u.call(n),v==null||v(),o==null||o(),A()};E(t,(e,i)=>{d.value||h(e,i)}),E(a,()=>h(t.value,t.value));const L=()=>{t.value=0,r.value=!0},N=()=>{t.value=a.value.length,r.value=!1};return{sequence:a,step:c(()=>t.value),setStep:e=>t.value=e,paused:d,nextStep:()=>t.value++,prevStep:()=>t.value--,stop:N,start:L,isActive:c(()=>r.value),hasBegun:c(()=>t.value>-1),isOver:c(()=>t.value>=a.value.length)}},w=l=>{const{highlightElement:s}=l;if(!s)return()=>{};const{id:t,className:a}={id:typeof s=="string"?s:s.id,className:typeof s=="string"||!(s!=null&&s.className)?b:s.className};if(!t)return()=>{};const r=document.getElementById(t);if(!r)throw new Error(`element with id ${t} not found`);return r.classList.add(a),()=>r.classList.remove(a)};export{_ as u};
