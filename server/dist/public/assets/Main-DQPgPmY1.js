import{u as A}from"./Graph.vue_vue_type_script_setup_true_lang-C7aWDySR.js";import{b as S,_ as B}from"./GraphProduct.vue_vue_type_script_setup_true_lang-D1wvnyRJ.js";import{aq as F,d as g,o as m,c as C,a as M,a4 as P,b as u,w as l,F as z,f as y,E as I,A as T,e as v,t as p,V as h,x,ar as V,y as r,as as b,g as w,at as G}from"./index-Wvoc3Gvc.js";import{_ as L,u as E}from"./useSCCColorizer-BQ6teeRs.js";import{_ as k}from"./GHoverInfoTop.vue_vue_type_script_setup_true_lang-Dly99hEe.js";import"./ResponsiveCanvas.vue_vue_type_script_setup_true_lang-jduWpegf.js";import"./Button.vue_vue_type_script_setup_true_lang-Dt14VFd8.js";import"./Icon.vue_vue_type_script_setup_true_lang-BBvBH1WR.js";import"./TutorialHint.vue_vue_type_script_setup_true_lang-C3Zn5Vyd.js";import"./GHoverInfo.vue_vue_type_script_setup_true_lang-wR7Lbjsj.js";const R={persistentStorageKey:"markov-chains",edgeInputToLabel:o=>{try{const e=new F(o).simplify(.001).toFraction();return e==="0"?void 0:e}catch{}}},H={class:"flex flex-col gap-1"},Y={class:"text-base font-bold"},D={class:"flex flex-row gap-1"},N=g({__name:"MarkovClassNodes",props:{classes:{}},setup(o){return(e,a)=>(m(),C("div",H,[M("p",Y,[P(e.$slots,"default")]),u(S,{secondary:"",class:"p-2 rounded-md flex gap-3"},{default:l(()=>[(m(!0),C(z,null,y(e.classes,s=>(m(),C("div",null,[M("div",D,[(m(!0),C(z,null,y(s,t=>(m(),C("div",{key:t.id},[u(L,{node:t,size:40},null,8,["node"])]))),128))])]))),256))]),_:1})]))}}),U={class:"flex gap-4 items-center"},q=g({__name:"MarkovChainInfo",props:{markov:{}},setup(o){const e=o,a=n=>n.map(c=>Array.from(c).map(f=>h.value.getNode(f))),s=I(()=>a(e.markov.recurrentClasses.value)),t=I(()=>a(e.markov.transientClasses.value));return(n,c)=>(m(),T(S,{class:"p-3 rounded-lg"},{default:l(()=>[M("div",U,[u(N,{classes:s.value},{default:l(()=>[v(" Recurrent Classes ("+p(s.value.length)+") ",1)]),_:1},8,["classes"]),u(N,{classes:t.value},{default:l(()=>[v(" Transient Classes ("+p(t.value.length)+") ",1)]),_:1},8,["classes"])])]),_:1}))}}),$="markov-chains",K=(o,e)=>{const a=E(o),{setTheme:s,removeTheme:t}=x(o,$),n=i=>{if(o.focus.isFocused(i.id))return o.baseTheme.value.nodeFocusBorderColor;if(e.transientStates.value.has(i.id))return o.baseTheme.value.nodeBorderColor};return{colorize:()=>{a.colorize(),s("nodeBorderColor",n),s("nodeAnchorColor",n)},decolorize:()=>{a.decolorize(),t("nodeBorderColor"),t("nodeAnchorColor")}}},O=(o,e)=>{const{setTheme:a,removeTheme:s}=x(o,$),{recurrentClassPeriods:t,nodeIdToRecurrentClassIndex:n}=e,c=_=>{if(o.focus.isFocused(_.id))return;const d=n.value.get(_.id);if(d!==void 0)return t.value[d].toString()};return{label:()=>{a("nodeText",c)},unlabel:()=>{s("nodeText")}}},j="markov-steady-state-label",J=(o,e)=>{const{setTheme:a,removeTheme:s}=x(o,j),{steadyState:t}=e,n=i=>{if(!t.value||o.focus.isFocused(i.id))return;const _=o.nodeIdToIndex.value.get(i.id);return t.value[_??-1].toFixed(2)};return{label:()=>{a("nodeText",n)},unlabel:()=>{s("nodeText")}}},Q=g({__name:"MarkovChainInfoLabels",props:{markov:{}},setup(o){const e=o,{label:a,unlabel:s}=O(h.value,e.markov),{label:t,unlabel:n}=J(h.value,e.markov),{colorize:c,decolorize:f}=V(h.value,e.markov),{colorize:i,decolorize:_}=E(h.value,"markov-communicating-class");return(d,W)=>(m(),T(S,{secondary:"",class:"p-2 rounded-lg flex flex-wrap gap-2"},{default:l(()=>[u(k,{onMouseenter:r(c),onMouseleave:r(f),tooltip:r(b).valid},{default:l(()=>[v(" Valid? "+p(d.markov.illegalNodeIds.value.size===0?"Yes":"No"),1)]),_:1},8,["onMouseenter","onMouseleave","tooltip"]),u(k,{onMouseenter:r(a),onMouseleave:r(s),tooltip:r(b).periodic},{default:l(()=>[v(" Periodic? "+p(d.markov.isPeriodic.value?"Yes":"No"),1)]),_:1},8,["onMouseenter","onMouseleave","tooltip"]),u(k,{tooltip:r(b).absorbing},{default:l(()=>[v(" Absorbing? "+p(d.markov.isAbsorbing.value?"Yes":"No"),1)]),_:1},8,["tooltip"]),u(k,{onMouseenter:r(i),onMouseleave:r(_),tooltip:r(b).communicatingClasses},{default:l(()=>[v(" Communicating Classes: "+p(d.markov.communicatingClasses.value.length),1)]),_:1},8,["onMouseenter","onMouseleave","tooltip"]),u(k,{onMouseenter:r(t),onMouseleave:r(n),tooltip:r(b).steadyState},{default:l(()=>[v(" Unique Steady State? "+p(d.markov.steadyState.value?"Yes":"No"),1)]),_:1},8,["onMouseenter","onMouseleave","tooltip"])]),_:1}))}}),ue=g({__name:"Main",setup(o){const e=w(),a=A(e,R),s=G(a);return K(a,s).colorize(),(t,n)=>(m(),T(B,{onGraphRef:n[0]||(n[0]=c=>e.value=c),graph:r(a)},{"top-center":l(()=>[u(q,{markov:r(s)},null,8,["markov"])]),"bottom-center":l(()=>[u(Q,{markov:r(s)},null,8,["markov"])]),_:1},8,["graph"]))}});export{ue as default};
