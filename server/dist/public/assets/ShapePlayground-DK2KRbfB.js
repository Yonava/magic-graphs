import{c as e,d as G,a as N,b as D,e as Y,_ as $,s as O,A as I}from"./ResponsiveCanvas.vue_vue_type_script_setup_true_lang-BuzAFiyo.js";import{f as E,G as H,u as L,d as W,H as F,o as P,c as b,e as R,w as T,z as v,B as q,y as z,a as C,t as A,I as V,F as X,A as S}from"./index-jfH_lu32.js";import{_ as k}from"./Button.vue_vue_type_script_setup_true_lang-Bn5TR-zN.js";import{_ as U}from"./InputRange.vue_vue_type_script_setup_true_lang-CrNJ1dOt.js";const B=d=>{if(!d)throw new Error("canvas not found");const l="value"in d?d.value:d;if(!l)throw new Error("canvas not found");const c=l.getContext("2d");if(!c)throw new Error("2d context not found");return c},j=e.GREEN_500,J=e.RED_500,K=e.YELLOW_500,Q=(d,l)=>{const c=E(!1),f=E(4),t=E(99),r=E(0),i=H(()=>t.value<1?"00":t.value<10?`0${t.value}`:t.value>99?"":t.value.toString()),a=document.createElement("canvas"),g=()=>{if(!d.value)throw new Error("target canvas not found");const{width:n,height:x}=d.value.getBoundingClientRect();a.width=n,a.height=x,a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.pointerEvents="none";const h=document.getElementById("responsive-canvas-container");if(!h)throw new Error("Canvas container not found");h.appendChild(a)},s=E("precise"),m=()=>{s.value=s.value==="efficient"?"precise":"efficient",u()},_=n=>{const x=s.value==="precise"?l.value.findLast(p=>p.shapeHitbox(n)):l.value.findLast(p=>p.efficientHitbox({at:n,width:1,height:1})),h=l.value.findLast(p=>{var M;return(M=p.textHitbox)==null?void 0:M.call(p,n)}),w={at:n,radius:2,color:j+i.value};h?w.color=K+i.value:x&&(w.color=J+i.value);const y=B(a);N(w).draw(y)},u=async()=>{if(B(a).clearRect(0,0,a.width,a.height),r.value=0,!a||!c.value)return;const{width:x,height:h}=a.getBoundingClientRect();for(let w=0;w<h;w+=f.value)for(let y=0;y<x;y+=f.value)r.value%2e4===0&&await new Promise(p=>setTimeout(p,10)),_({x:y,y:w}),r.value++};L(c,u);const o=G(u,500);return L(f,o),L(t,o),L(l,o),setTimeout(g,500),{heatmapActive:c,heatmapOpacity:t,heatmapResolution:f,runHeatmap:u,runHeatmapDebounced:o,pointsSampled:r,toggleHeatmapMode:m,heatmapMode:s}},Z={key:1,class:"flex items-center gap-3 text-white h-6 mt-1 text-sm font-bold"},ee=W({__name:"Toolbar",props:{canvas:{},items:{},draw:{type:Function}},setup(d){const l=d,{items:c,canvas:f}=F(l),{heatmapActive:t,heatmapOpacity:r,heatmapResolution:i,toggleHeatmapMode:a,heatmapMode:g}=Q(f,c),s=H(()=>t.value?"Hide Heatmap":"Show Heatmap"),m=H(()=>g.value==="efficient"?"Precise Heatmap":"Efficient Heatmap"),_=()=>{var u,o;(o=(u=c.value[2]).activateTextArea)==null||o.call(u,n=>{console.log("value",n)})};return(u,o)=>(P(),b(X,null,[R(k,{onClick:u.draw},{default:T(()=>o[3]||(o[3]=[S("Redraw")])),_:1},8,["onClick"]),R(k,{onClick:o[0]||(o[0]=n=>t.value=!v(t))},{default:T(()=>[S(A(s.value),1)]),_:1}),v(t)?(P(),q(k,{key:0,onClick:v(a)},{default:T(()=>[S(A(m.value),1)]),_:1},8,["onClick"])):z("",!0),R(k,{onClick:_},{default:T(()=>o[4]||(o[4]=[S(" Micro Control ")])),_:1}),v(t)?(P(),b("div",Z,[C("div",null,[C("p",null,"Opacity "+A(v(r)),1),R(U,{modelValue:v(r),"onUpdate:modelValue":o[1]||(o[1]=n=>V(r)?r.value=n:null),modelModifiers:{number:!0},min:"0",max:"100"},null,8,["modelValue"])]),C("div",null,[C("p",null,"Resolution "+A(v(i)),1),R(U,{modelValue:v(i),"onUpdate:modelValue":o[2]||(o[2]=n=>V(i)?i.value=n:null),modelModifiers:{number:!0},min:"1",max:"10"},null,8,["modelValue"])])])):z("",!0)],64))}}),te={class:"h-full w-full"},oe={class:"absolute m-3 flex gap-3 z-50"},ie=W({__name:"ShapePlayground",setup(d){const l=E(),c=D(),f=H(()=>c.value?e.GRAY_800:e.GRAY_200),t=E([]),r=H(()=>(c.value?e.GRAY_200:e.GRAY_700)+"15"),i=()=>{const s=B(l);s.clearRect(0,0,s.canvas.width,s.canvas.height);const{circle:m,uturn:_,cross:u,rect:o,square:n}=O;t.value.push(m({at:{x:200,y:200},radius:50,color:e.BLUE_500,stroke:{color:e.BLUE_700,width:10,dash:[10,5]},textArea:{text:{content:"51",color:e.WHITE,fontSize:20},color:e.TRANSPARENT}})),t.value.push(_({at:{x:600,y:100},downDistance:50,upDistance:50,lineWidth:10,color:e.BLUE_500,rotation:Math.PI*.2,spacing:20,textArea:{color:e.PURPLE_500,activeColor:e.PURPLE_600,text:{content:"5",color:e.WHITE,fontSize:20}}}));const x=O.line({start:{x:100,y:100},end:{x:600,y:900},color:e.GRAY_900,width:10,textArea:{color:e.PURPLE_500,activeColor:e.PURPLE_600,text:{content:"5",color:e.WHITE,fontSize:20}}});t.value.push(x),t.value.push(u({at:{x:500,y:300},color:e.SLATE_600,size:150,rotation:Math.PI/.6,borderRadius:10,lineWidth:80})),t.value.push(n({at:{x:600,y:400},size:120,rotation:Math.PI/.7,color:e.GREEN_600,borderRadius:25,stroke:{color:e.YELLOW_200,width:10,dash:[10,5]},textArea:{text:{content:"13",color:e.WHITE,fontSize:20},color:I}})),t.value.forEach(h=>h.draw(s))};document.addEventListener("resize",i),document.addEventListener("keyup",s=>{s.code==="Space"&&i()}),setTimeout(i,100);const{width:a,height:g}=Y();return(s,m)=>(P(),b("div",te,[C("div",oe,[R(ee,{canvas:l.value,items:t.value,draw:i},null,8,["canvas","items"])]),R($,{onCanvasRef:m[0]||(m[0]=_=>l.value=_),color:f.value,"pattern-color":r.value,"canvas-width":v(a),"canvas-height":v(g)},null,8,["color","pattern-color","canvas-width","canvas-height"])]))}});export{ie as default};
