import{g,s as T,u as x,a as z,_ as U}from"./ResponsiveCanvas.vue_vue_type_script_setup_true_lang-CUOECkLd.js";import{v as i,g as l,x as X,y as I,e as q,z as B,o as H,c as V,b as D,A,a as $}from"./index-CHTm4t2_.js";import{_ as j}from"./AnnotationControls.vue_vue_type_script_setup_true_lang-BsPipJz8.js";import"./types-BPZUaLaU.js";const F=[i.RED_600,i.BLUE_600,i.GREEN_600,i.YELLOW_600],J=[1,3,5,7],K={color:F[0],brushWeight:J[0],eraserBrushWeight:50},Q=(o,m={})=>{const{color:p,brushWeight:w,eraserBrushWeight:v}={...K,...m},d=l(p),h=l(w),f=l(!1),c=l(!1),a=l(),r=l([]),E=l([]),Y=()=>{const e=g(o);e.clearRect(0,0,e.canvas.width,e.canvas.height),E.value=[]},L=()=>{const e=g(o);e.clearRect(0,0,e.canvas.width,e.canvas.height);for(const s of E.value)T(s).draw(e)},R=e=>{const s=g(o);c.value=!0;const{offsetX:t,offsetY:n}=e;s.beginPath(),s.moveTo(t,n),a.value={x:t,y:n},r.value=[{x:t,y:n}]},y=({ctx:e,at:{x:s,y:t}})=>{if(!a.value)return;const{x:n,y:u}=a.value;e.globalCompositeOperation="destination-out";const M=Math.pow(s-n,2)+Math.pow(t-u,2),N=Math.sqrt(M),b=Math.ceil(N/v);for(let _=0;_<=b;_++){const P=n+_/b*(s-n),S=u+_/b*(t-u);e.beginPath(),e.arc(P,S,v,0,Math.PI*2),e.fill()}e.globalCompositeOperation="source-over"},O=({ctx:e,at:{x:s,y:t}})=>{e.lineTo(s,t),e.strokeStyle=d.value,e.lineWidth=h.value,e.stroke()},W=e=>{if(!c.value||!a.value)return;const s=g(o),{offsetX:t,offsetY:n}=e,u={ctx:s,at:{x:t,y:n}};f.value?y(u):O(u),a.value={x:t,y:n},r.value.push({x:t,y:n})},C=()=>{if(!c.value||(c.value=!1,a.value=void 0,r.value.length===0))return;const e={type:"draw",color:d.value,brushWeight:h.value,points:r.value},s={type:"erase",brushWeight:v,points:r.value},t=f.value?s:e;E.value.push(t),r.value=[]},k=()=>{o.value&&(o.value.addEventListener("mousedown",R),o.value.addEventListener("mousemove",W),o.value.addEventListener("mouseup",C),window.addEventListener("resize",L))},G=()=>{o.value&&(o.value.removeEventListener("mousedown",R),o.value.removeEventListener("mousemove",W),o.value.removeEventListener("mouseup",C),window.removeEventListener("resize",L))};return X(k),I(G),{selectedColor:d,selectedBrushWeight:h,erasing:f,clear:Y,isDrawing:c,draw:L}},Z={class:"h-full w-full"},ee={class:"absolute bottom-12 flex w-full justify-center"},ae=q({__name:"AnnotationPlayground",setup(o){const m=l(),p=x(),w=Q(m),v=B(()=>p.value?i.GRAY_600:i.GRAY_200),d=B(()=>(p.value?i.GRAY_200:i.GRAY_700)+"15"),{width:h,height:f}=z();return(c,a)=>(H(),V("div",Z,[D(U,{onCanvasRef:a[0]||(a[0]=r=>m.value=r),color:v.value,"pattern-color":d.value,"canvas-width":A(h),"canvas-height":A(f)},null,8,["color","pattern-color","canvas-width","canvas-height"]),$("div",ee,[D(j,{controls:A(w)},null,8,["controls"])])]))}});export{ae as default};
